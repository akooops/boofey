import{a9 as tt,q as lt,D as st,t as at}from"../chunks/paths.0e30d36d.js";import{a as ye}from"../chunks/auth.660986fb.js";import{s as qe,a as M,f as m,c as A,g as p,h as S,d as _,B as pe,i as F,P as rt,o as Ke,l as K,m as W,z as ae,j as n,E as ve,C as i,F as ke,n as le,R as Ce,D as We,p as Ee,S as Xe,Q as nt,G as it,H as ot}from"../chunks/scheduler.726ac76d.js";import{S as Le,i as Me,g as dt,t as ee,c as ut,a as te,b as ie,d as oe,m as de,e as ue,h as Ze,f as ct}from"../chunks/index.8a5ed380.js";import{g as Ae,a as Pe}from"../chunks/spread.8a54911c.js";import{P as ft}from"../chunks/Pagination.94643daa.js";import{S as ht}from"../chunks/SearchTable.d9fb7dc1.js";import{Q as _t}from"../chunks/QueueStudentsTable.ca1ca9db.js";import{t as mt}from"../chunks/toast.aca1940a.js";import{i as pt}from"../chunks/utils.7c7f4a39.js";import{l as Qe,I as vt}from"../chunks/initFlatpickr.06386e0f.js";import{e as Ve}from"../chunks/each.381f634d.js";import"../chunks/paths.b98f38ef.js";import{M as xe,a as et}from"../chunks/ModalPagination.03117239.js";import{A as gt}from"../chunks/Accordion.adfb252c.js";import{f as bt}from"../chunks/index.955fed47.js";import{i as Et}from"../chunks/initToolTip.b2308c6a.js";function Oe(s,e,t){const a=s.slice();return a[20]=e[t],a}function Re(s,e,t){const a=s.slice();return a[20]=e[t],a}function je(s){let e,t,a,r,d,l,c,f,v=s[0].id+"",h,u,b,k,g,I,L,o,E,q=s[0].fullname+"",D,C,w,T,V,y='<i class="ri-close-line"></i>',$,X;return{c(){e=m("label"),t=K(s[2]),a=M(),r=m("div"),d=m("table"),l=m("tbody"),c=m("tr"),f=m("th"),h=K(v),u=M(),b=m("th"),k=m("div"),g=m("div"),I=m("img"),o=M(),E=m("div"),D=K(q),C=M(),w=m("th"),T=m("div"),V=m("a"),V.innerHTML=y,this.h()},l(P){e=p(P,"LABEL",{for:!0,class:!0});var B=S(e);t=W(B,s[2]),B.forEach(_),a=A(P),r=p(P,"DIV",{class:!0});var z=S(r);d=p(z,"TABLE",{class:!0});var R=S(d);l=p(R,"TBODY",{class:!0});var N=S(l);c=p(N,"TR",{class:!0});var Y=S(c);f=p(Y,"TH",{});var fe=S(f);h=W(fe,v),fe.forEach(_),u=A(Y),b=p(Y,"TH",{});var ce=S(b);k=p(ce,"DIV",{class:!0});var Z=S(k);g=p(Z,"DIV",{class:!0});var re=S(g);I=p(re,"IMG",{src:!0,alt:!0,class:!0}),re.forEach(_),o=A(Z),E=p(Z,"DIV",{class:!0});var j=S(E);D=W(j,q),j.forEach(_),Z.forEach(_),ce.forEach(_),C=A(Y),w=p(Y,"TH",{scope:!0});var J=S(w);T=p(J,"DIV",{class:!0});var Q=S(T);V=p(Q,"A",{href:!0,class:!0,"data-bs-toggle":!0,"data-bs-original-title":!0,"data-svelte-h":!0}),ae(V)!=="svelte-1b3cw3w"&&(V.innerHTML=y),Q.forEach(_),J.forEach(_),Y.forEach(_),N.forEach(_),R.forEach(_),z.forEach(_),this.h()},h(){n(e,"for","productarName"),n(e,"class","form-label"),ve(I.src,L=s[0].image.full_path)||n(I,"src",L),n(I,"alt",""),n(I,"class","avatar-xs rounded-circle"),n(g,"class","flex-shrink-0"),n(E,"class","flex-grow-1"),n(k,"class","d-flex gap-2 align-items-center"),n(V,"href","javascript:void(0);"),n(V,"class","fs-15"),n(V,"data-bs-toggle","tooltip"),n(V,"data-bs-original-title","Select"),n(T,"class","hstack gap-3 flex-wrap"),n(w,"scope","col"),n(c,"class","bg-secondary-subtle"),n(l,"class","list align-middle"),n(d,"class","table align-middle table-nowrap mb-0 border-top"),n(r,"class","table-responsive mt-0")},m(P,B){F(P,e,B),i(e,t),F(P,a,B),F(P,r,B),i(r,d),i(d,l),i(l,c),i(c,f),i(f,h),i(c,u),i(c,b),i(b,k),i(k,g),i(g,I),i(k,o),i(k,E),i(E,D),i(c,C),i(c,w),i(w,T),i(T,V),$||(X=ke(V,"click",s[7]),$=!0)},p(P,B){B&4&&le(t,P[2]),B&1&&v!==(v=P[0].id+"")&&le(h,v),B&1&&!ve(I.src,L=P[0].image.full_path)&&n(I,"src",L),B&1&&q!==(q=P[0].fullname+"")&&le(D,q)},d(P){P&&(_(e),_(a),_(r)),$=!1,X()}}}function St(s){let e,t,a,r,d,l,c='<tr scope="row"><td scope="col">ID</td> <td scope="col">Full Name</td> <td scope="col">Action</td></tr>',f,v,h,u,b;e=new xe({props:{type:"Student"}}),e.$on("search",s[8]);let k=Ve(s[3]),g=[];for(let o=0;o<k.length;o+=1)g[o]=Be(Oe(s,k,o));const I=[s[4]];let L={};for(let o=0;o<I.length;o+=1)L=Ce(L,I[o]);return u=new et({props:L}),u.$on("switchPage",s[9]),{c(){ie(e.$$.fragment),t=M(),a=m("div"),r=m("div"),d=m("table"),l=m("thead"),l.innerHTML=c,f=M(),v=m("tbody");for(let o=0;o<g.length;o+=1)g[o].c();h=M(),ie(u.$$.fragment),this.h()},l(o){oe(e.$$.fragment,o),t=A(o),a=p(o,"DIV",{class:!0});var E=S(a);r=p(E,"DIV",{class:!0});var q=S(r);d=p(q,"TABLE",{class:!0});var D=S(d);l=p(D,"THEAD",{class:!0,"data-svelte-h":!0}),ae(l)!=="svelte-doigdf"&&(l.innerHTML=c),f=A(D),v=p(D,"TBODY",{class:!0});var C=S(v);for(let w=0;w<g.length;w+=1)g[w].l(C);C.forEach(_),D.forEach(_),q.forEach(_),E.forEach(_),h=A(o),oe(u.$$.fragment,o),this.h()},h(){n(l,"class","table-light"),n(v,"class","list"),n(d,"class","table align-middle table-nowrap mb-0 border-top"),n(r,"class","table-responsive"),n(a,"class","row pe-0")},m(o,E){de(e,o,E),F(o,t,E),F(o,a,E),i(a,r),i(r,d),i(d,l),i(d,f),i(d,v);for(let q=0;q<g.length;q+=1)g[q]&&g[q].m(v,null);F(o,h,E),de(u,o,E),b=!0},p(o,E){if(E&73){k=Ve(o[3]);let D;for(D=0;D<k.length;D+=1){const C=Oe(o,k,D);g[D]?g[D].p(C,E):(g[D]=Be(C),g[D].c(),g[D].m(v,null))}for(;D<g.length;D+=1)g[D].d(1);g.length=k.length}const q=E&16?Ae(I,[Pe(o[4])]):{};u.$set(q)},i(o){b||(te(e.$$.fragment,o),te(u.$$.fragment,o),b=!0)},o(o){ee(e.$$.fragment,o),ee(u.$$.fragment,o),b=!1},d(o){o&&(_(t),_(a),_(h)),ue(e,o),We(g,o),ue(u,o)}}}function Dt(s){let e,t,a;function r(l){s[14](l)}let d={id:"student",title:s[2],$$slots:{default:[kt]},$$scope:{ctx:s}};return s[5]!==void 0&&(d.openCollapse=s[5]),e=new gt({props:d}),Ee.push(()=>Ze(e,"openCollapse",r)),{c(){ie(e.$$.fragment)},l(l){oe(e.$$.fragment,l)},m(l,c){de(e,l,c),a=!0},p(l,c){const f={};c&4&&(f.title=l[2]),c&33554457&&(f.$$scope={dirty:c,ctx:l}),!t&&c&32&&(t=!0,f.openCollapse=l[5],Xe(()=>t=!1)),e.$set(f)},i(l){a||(te(e.$$.fragment,l),a=!0)},o(l){ee(e.$$.fragment,l),a=!1},d(l){ue(e,l)}}}function Be(s){let e,t,a=s[20].id+"",r,d,l,c,f,v,h,u,b,k=s[20].fullname+"",g,I,L,o,E,q='<i class="ri-check-line"></i>',D,C,w;function T(){return s[15](s[20])}return{c(){e=m("tr"),t=m("td"),r=K(a),d=M(),l=m("td"),c=m("div"),f=m("div"),v=m("img"),u=M(),b=m("div"),g=K(k),I=M(),L=m("td"),o=m("div"),E=m("a"),E.innerHTML=q,D=M(),this.h()},l(V){e=p(V,"TR",{scope:!0});var y=S(e);t=p(y,"TD",{});var $=S(t);r=W($,a),$.forEach(_),d=A(y),l=p(y,"TD",{});var X=S(l);c=p(X,"DIV",{class:!0});var P=S(c);f=p(P,"DIV",{class:!0});var B=S(f);v=p(B,"IMG",{src:!0,alt:!0,class:!0}),B.forEach(_),u=A(P),b=p(P,"DIV",{class:!0});var z=S(b);g=W(z,k),z.forEach(_),P.forEach(_),X.forEach(_),I=A(y),L=p(y,"TD",{});var R=S(L);o=p(R,"DIV",{class:!0});var N=S(o);E=p(N,"A",{href:!0,class:!0,"data-bs-toggle":!0,"data-bs-original-title":!0,"data-svelte-h":!0}),ae(E)!=="svelte-f140kx"&&(E.innerHTML=q),N.forEach(_),R.forEach(_),D=A(y),y.forEach(_),this.h()},h(){var V;ve(v.src,h=s[20].image.full_path)||n(v,"src",h),n(v,"alt",""),n(v,"class","avatar-xs rounded-circle"),n(f,"class","flex-shrink-0"),n(b,"class","flex-grow-1"),n(c,"class","d-flex gap-2 align-items-center"),n(E,"href","javascript:void(0);"),n(E,"class","fs-15"),n(E,"data-bs-toggle","tooltip"),n(E,"data-bs-original-title","Select"),n(o,"class","hstack gap-3 flex-wrap"),n(e,"scope","row"),pe(e,"bg-secondary-subtle",s[20].id==((V=s[0])==null?void 0:V.id))},m(V,y){F(V,e,y),i(e,t),i(t,r),i(e,d),i(e,l),i(l,c),i(c,f),i(f,v),i(c,u),i(c,b),i(b,g),i(e,I),i(e,L),i(L,o),i(o,E),i(e,D),C||(w=ke(E,"click",T),C=!0)},p(V,y){var $;s=V,y&8&&a!==(a=s[20].id+"")&&le(r,a),y&8&&!ve(v.src,h=s[20].image.full_path)&&n(v,"src",h),y&8&&k!==(k=s[20].fullname+"")&&le(g,k),y&9&&pe(e,"bg-secondary-subtle",s[20].id==(($=s[0])==null?void 0:$.id))},d(V){V&&_(e),C=!1,w()}}}function Ge(s){let e,t,a=s[20].id+"",r,d,l,c,f,v,h,u,b,k=s[20].fullname+"",g,I,L,o,E,q='<i class="ri-check-line"></i>',D,C,w;function T(){return s[13](s[20])}return{c(){e=m("tr"),t=m("td"),r=K(a),d=M(),l=m("td"),c=m("div"),f=m("div"),v=m("img"),u=M(),b=m("div"),g=K(k),I=M(),L=m("td"),o=m("div"),E=m("a"),E.innerHTML=q,D=M(),this.h()},l(V){e=p(V,"TR",{scope:!0});var y=S(e);t=p(y,"TD",{});var $=S(t);r=W($,a),$.forEach(_),d=A(y),l=p(y,"TD",{});var X=S(l);c=p(X,"DIV",{class:!0});var P=S(c);f=p(P,"DIV",{class:!0});var B=S(f);v=p(B,"IMG",{src:!0,alt:!0,class:!0}),B.forEach(_),u=A(P),b=p(P,"DIV",{class:!0});var z=S(b);g=W(z,k),z.forEach(_),P.forEach(_),X.forEach(_),I=A(y),L=p(y,"TD",{});var R=S(L);o=p(R,"DIV",{class:!0});var N=S(o);E=p(N,"A",{href:!0,class:!0,"data-bs-toggle":!0,"data-bs-original-title":!0,"data-svelte-h":!0}),ae(E)!=="svelte-f140kx"&&(E.innerHTML=q),N.forEach(_),R.forEach(_),D=A(y),y.forEach(_),this.h()},h(){var V;ve(v.src,h=s[20].image.full_path)||n(v,"src",h),n(v,"alt",""),n(v,"class","avatar-xs rounded-circle"),n(f,"class","flex-shrink-0"),n(b,"class","flex-grow-1"),n(c,"class","d-flex gap-2 align-items-center"),n(E,"href","javascript:void(0);"),n(E,"class","fs-15"),n(E,"data-bs-toggle","tooltip"),n(E,"data-bs-original-title","Select"),n(o,"class","hstack gap-3 flex-wrap"),n(e,"scope","row"),pe(e,"bg-secondary-subtle",s[20].id==((V=s[0])==null?void 0:V.id))},m(V,y){F(V,e,y),i(e,t),i(t,r),i(e,d),i(e,l),i(l,c),i(c,f),i(f,v),i(c,u),i(c,b),i(b,g),i(e,I),i(e,L),i(L,o),i(o,E),i(e,D),C||(w=ke(E,"click",T),C=!0)},p(V,y){var $;s=V,y&8&&a!==(a=s[20].id+"")&&le(r,a),y&8&&!ve(v.src,h=s[20].image.full_path)&&n(v,"src",h),y&8&&k!==(k=s[20].fullname+"")&&le(g,k),y&9&&pe(e,"bg-secondary-subtle",s[20].id==(($=s[0])==null?void 0:$.id))},d(V){V&&_(e),C=!1,w()}}}function kt(s){let e,t,a,r,d,l,c='<tr scope="row"><td scope="col">ID</td> <td scope="col">Full Name</td> <td scope="col">Action</td></tr>',f,v,h,u,b;e=new xe({props:{type:"Student"}}),e.$on("search",s[8]);let k=Ve(s[3]),g=[];for(let o=0;o<k.length;o+=1)g[o]=Ge(Re(s,k,o));const I=[s[4]];let L={};for(let o=0;o<I.length;o+=1)L=Ce(L,I[o]);return u=new et({props:L}),u.$on("switchPage",s[9]),{c(){ie(e.$$.fragment),t=M(),a=m("div"),r=m("div"),d=m("table"),l=m("thead"),l.innerHTML=c,f=M(),v=m("tbody");for(let o=0;o<g.length;o+=1)g[o].c();h=M(),ie(u.$$.fragment),this.h()},l(o){oe(e.$$.fragment,o),t=A(o),a=p(o,"DIV",{class:!0});var E=S(a);r=p(E,"DIV",{class:!0});var q=S(r);d=p(q,"TABLE",{class:!0});var D=S(d);l=p(D,"THEAD",{class:!0,"data-svelte-h":!0}),ae(l)!=="svelte-q6ex5v"&&(l.innerHTML=c),f=A(D),v=p(D,"TBODY",{class:!0});var C=S(v);for(let w=0;w<g.length;w+=1)g[w].l(C);C.forEach(_),D.forEach(_),q.forEach(_),E.forEach(_),h=A(o),oe(u.$$.fragment,o),this.h()},h(){n(l,"class","table-light"),n(v,"class","list"),n(d,"class","table align-middle table-nowrap mb-0 border-top"),n(r,"class","table-responsive"),n(a,"class","row pe-0")},m(o,E){de(e,o,E),F(o,t,E),F(o,a,E),i(a,r),i(r,d),i(d,l),i(d,f),i(d,v);for(let q=0;q<g.length;q+=1)g[q]&&g[q].m(v,null);F(o,h,E),de(u,o,E),b=!0},p(o,E){if(E&73){k=Ve(o[3]);let D;for(D=0;D<k.length;D+=1){const C=Re(o,k,D);g[D]?g[D].p(C,E):(g[D]=Ge(C),g[D].c(),g[D].m(v,null))}for(;D<g.length;D+=1)g[D].d(1);g.length=k.length}const q=E&16?Ae(I,[Pe(o[4])]):{};u.$set(q)},i(o){b||(te(e.$$.fragment,o),te(u.$$.fragment,o),b=!0)},o(o){ee(e.$$.fragment,o),ee(u.$$.fragment,o),b=!1},d(o){o&&(_(t),_(a),_(h)),ue(e,o),We(g,o),ue(u,o)}}}function It(s){var h;let e,t,a,r,d,l=((h=s[0])==null?void 0:h.id)&&je(s);const c=[Dt,St],f=[];function v(u,b){return u[1]?0:1}return a=v(s),r=f[a]=c[a](s),{c(){l&&l.c(),e=M(),t=m("div"),r.c(),this.h()},l(u){l&&l.l(u),e=A(u),t=p(u,"DIV",{});var b=S(t);r.l(b),b.forEach(_),this.h()},h(){var u;pe(t,"d-none",((u=s[0])==null?void 0:u.id)!=null)},m(u,b){l&&l.m(u,b),F(u,e,b),F(u,t,b),f[a].m(t,null),d=!0},p(u,[b]){var g,I;(g=u[0])!=null&&g.id?l?l.p(u,b):(l=je(u),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null);let k=a;a=v(u),a===k?f[a].p(u,b):(dt(),ee(f[k],1,1,()=>{f[k]=null}),ut(),r=f[a],r?r.p(u,b):(r=f[a]=c[a](u),r.c()),te(r,1),r.m(t,null)),(!d||b&1)&&pe(t,"d-none",((I=u[0])==null?void 0:I.id)!=null)},i(u){d||(te(r),d=!0)},o(u){ee(r),d=!1},d(u){u&&(_(e),_(t)),l&&l.d(u),f[a].d()}}}function wt(s,e,t){const a=rt();let r=[],d,l=1,c="",{selected:f={}}=e,{collapse:v}=e,{title:h}=e,{subscribed:u}=e,{archived:b}=e,k;async function g(){let T=await fetch(tt({page:l,search:c},null,{subscribed:u,archived:b}),{headers:{Authorization:`${localStorage.getItem("SID")}`}});ye(T);let V=await T.json();t(3,r=V.data.students),t(4,d=V.pagination)}Ke(()=>{g()});function I(T){t(0,f=T),a("select",{studentId:f.id})}function L(){t(0,f={}),a("select",{studentId:""}),k()}function o(T){l=1,c=T.detail.searchQuery,g()}function E(T){l=T.detail.page,g()}function q(){t(0,f={})}const D=T=>I(T);function C(T){k=T,t(5,k)}const w=T=>I(T);return s.$$set=T=>{"selected"in T&&t(0,f=T.selected),"collapse"in T&&t(1,v=T.collapse),"title"in T&&t(2,h=T.title),"subscribed"in T&&t(10,u=T.subscribed),"archived"in T&&t(11,b=T.archived)},[f,v,h,r,d,k,I,L,o,E,u,b,q,D,C,w]}class Tt extends Le{constructor(e){super(),Me(this,e,wt,It,qe,{selected:0,collapse:1,title:2,subscribed:10,archived:11,resetStudent:12})}get resetStudent(){return this.$$.ctx[12]}}const Vt=!1;async function yt({fetch:s,url:e,depends:t,params:a}){t("queueStudents:refresh");let r=await s(lt(a.queueId,st(e)),{headers:{Authorization:`${localStorage.getItem("SID")}`}});return ye(r),{queueStudentsResponse:await r.json(),tabTitle:"Students' Queue"}}const xt=Object.freeze(Object.defineProperty({__proto__:null,load:yt,ssr:Vt},Symbol.toStringTag,{value:"Module"}));function Fe(s){let e,t='<lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon>';return{c(){e=m("div"),e.innerHTML=t,this.h()},l(a){e=p(a,"DIV",{class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-1eqlld5"&&(e.innerHTML=t),this.h()},h(){n(e,"class","text-center")},m(a,r){F(a,e,r)},d(a){a&&_(e)}}}function Ue(s){let e,t=s[2].student_id[0]+"",a;return{c(){e=m("strong"),a=K(t),this.h()},l(r){e=p(r,"STRONG",{class:!0});var d=S(e);a=W(d,t),d.forEach(_),this.h()},h(){n(e,"class","text-danger ms-1 my-2")},m(r,d){F(r,e,d),i(e,a)},p(r,d){d&4&&t!==(t=r[2].student_id[0]+"")&&le(a,t)},d(r){r&&_(e)}}}function ze(s){let e,t=s[2].started_at[0]+"",a;return{c(){e=m("strong"),a=K(t),this.h()},l(r){e=p(r,"STRONG",{class:!0});var d=S(e);a=W(d,t),d.forEach(_),this.h()},h(){n(e,"class","text-danger ms-1 my-2")},m(r,d){F(r,e,d),i(e,a)},p(r,d){d&4&&t!==(t=r[2].started_at[0]+"")&&le(a,t)},d(r){r&&_(e)}}}function Ye(s){var v;let e,t,a,r="Exited At",d,l,c,f=((v=s[2])==null?void 0:v.exited_at)&&Je(s);return{c(){e=m("div"),t=m("div"),a=m("label"),a.textContent=r,d=M(),l=m("input"),c=M(),f&&f.c(),this.h()},l(h){e=p(h,"DIV",{});var u=S(e);t=p(u,"DIV",{});var b=S(t);a=p(b,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(a)!=="svelte-q2n55n"&&(a.textContent=r),d=A(b),l=p(b,"INPUT",{type:!0,name:!0,class:!0,"data-provider":!0,"data-date-format":!0,"data-enable-time":!0,id:!0}),c=A(b),f&&f.l(b),b.forEach(_),u.forEach(_),this.h()},h(){n(a,"for","firstName"),n(a,"class","form-label"),n(l,"type","text"),n(l,"name","exited_at"),n(l,"class","form-control"),n(l,"data-provider","flatpickr"),n(l,"data-date-format","Y-m-d"),n(l,"data-enable-time",""),n(l,"id","from")},m(h,u){F(h,e,u),i(e,t),i(t,a),i(t,d),i(t,l),s[16](l),i(t,c),f&&f.m(t,null)},p(h,u){var b;(b=h[2])!=null&&b.exited_at?f?f.p(h,u):(f=Je(h),f.c(),f.m(t,null)):f&&(f.d(1),f=null)},d(h){h&&_(e),s[16](null),f&&f.d()}}}function Je(s){let e,t=s[2].exited_at[0]+"",a;return{c(){e=m("strong"),a=K(t),this.h()},l(r){e=p(r,"STRONG",{class:!0});var d=S(e);a=W(d,t),d.forEach(_),this.h()},h(){n(e,"class","text-danger ms-1 my-2")},m(r,d){F(r,e,d),i(e,a)},p(r,d){d&4&&t!==(t=r[2].exited_at[0]+"")&&le(a,t)},d(r){r&&_(e)}}}function qt(s){var he,_e;let e,t,a,r,d='<h5 class="modal-title" id="exampleModalgridLabel">Add Student</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>',l,c,f,v,h,u,b,k,g,I,L,o,E,q="Started At",D,C,w,T,V,y,$,X,P,B="exited",z,R,N,Y,fe="Close",ce,Z,re,j,J,Q=s[3]&&Fe();function se(H){s[12](H)}let ne={collapse:!0,title:"Students",subscribed:!0,archived:!1};s[7]!==void 0&&(ne.resetStudent=s[7]),h=new Tt({props:ne}),Ee.push(()=>Ze(h,"resetStudent",se)),h.$on("select",s[13]);let G=((he=s[2])==null?void 0:he.student_id)&&Ue(s),U=((_e=s[2])==null?void 0:_e.started_at)&&ze(s),O=s[6]&&Ye(s);return{c(){e=m("div"),t=m("div"),a=m("div"),r=m("div"),r.innerHTML=d,l=M(),c=m("div"),Q&&Q.c(),f=M(),v=m("div"),ie(h.$$.fragment),b=M(),G&&G.c(),k=M(),g=m("form"),I=m("div"),L=m("div"),o=m("div"),E=m("label"),E.textContent=q,D=M(),C=m("input"),w=M(),U&&U.c(),T=M(),V=m("div"),y=m("div"),$=m("input"),X=M(),P=m("label"),P.textContent=B,z=M(),O&&O.c(),R=M(),N=m("div"),Y=m("button"),Y.textContent=fe,ce=M(),Z=m("input"),this.h()},l(H){e=p(H,"DIV",{class:!0,id:!0,tabindex:!0,"data-bs-focus":!0,"aria-labelledby":!0,"aria-modal":!0});var x=S(e);t=p(x,"DIV",{class:!0});var Ie=S(t);a=p(Ie,"DIV",{class:!0});var ge=S(a);r=p(ge,"DIV",{class:!0,"data-svelte-h":!0}),ae(r)!=="svelte-4b19vr"&&(r.innerHTML=d),l=A(ge),c=p(ge,"DIV",{class:!0});var be=S(c);Q&&Q.l(be),f=A(be),v=p(be,"DIV",{class:!0});var Se=S(v);oe(h.$$.fragment,Se),b=A(Se),G&&G.l(Se),k=A(Se),g=p(Se,"FORM",{});var He=S(g);I=p(He,"DIV",{class:!0});var me=S(I);L=p(me,"DIV",{});var $e=S(L);o=p($e,"DIV",{});var De=S(o);E=p(De,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),ae(E)!=="svelte-luor3v"&&(E.textContent=q),D=A(De),C=p(De,"INPUT",{type:!0,name:!0,class:!0,"data-provider":!0,"data-date-format":!0,"data-enable-time":!0,id:!0}),w=A(De),U&&U.l(De),De.forEach(_),$e.forEach(_),T=A(me),V=p(me,"DIV",{class:!0});var Ne=S(V);y=p(Ne,"DIV",{class:!0});var we=S(y);$=p(we,"INPUT",{class:!0,type:!0,role:!0,id:!0}),X=A(we),P=p(we,"LABEL",{class:!0,for:!0,"data-svelte-h":!0}),ae(P)!=="svelte-1fyp4e1"&&(P.textContent=B),we.forEach(_),Ne.forEach(_),z=A(me),O&&O.l(me),R=A(me),N=p(me,"DIV",{class:!0});var Te=S(N);Y=p(Te,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"data-svelte-h":!0}),ae(Y)!=="svelte-1h5uvws"&&(Y.textContent=fe),ce=A(Te),Z=p(Te,"INPUT",{type:!0,class:!0}),Te.forEach(_),me.forEach(_),He.forEach(_),Se.forEach(_),be.forEach(_),ge.forEach(_),Ie.forEach(_),x.forEach(_),this.h()},h(){n(r,"class","modal-header"),n(E,"for","firstName"),n(E,"class","form-label"),n(C,"type","text"),n(C,"name","started_at"),n(C,"class","form-control"),n(C,"data-provider","flatpickr"),n(C,"data-date-format","Y-m-d"),n(C,"data-enable-time",""),n(C,"id","from"),n($,"class","form-check-input"),n($,"type","checkbox"),n($,"role","switch"),n($,"id","SwitchCheck1"),n(P,"class","form-check-label"),n(P,"for","SwitchCheck1"),n(y,"class","form-check form-switch col"),n(V,"class","row ps-3 g-3"),n(Y,"type","button"),n(Y,"class","btn btn-light fw-light"),n(Y,"data-bs-dismiss","modal"),n(Z,"type","submit"),n(Z,"class","btn btn-primary waves-effect waves-light"),Z.value="Save",n(N,"class","hstack gap-2 justify-content-end"),n(I,"class","row g-3"),n(v,"class","row g-3"),pe(v,"d-none",s[3]),n(c,"class","modal-body"),n(a,"class","modal-content"),n(t,"class","modal-dialog modal-dialog-centered"),n(e,"class","modal fade"),n(e,"id","addQueueStudentModal"),n(e,"tabindex","-1"),n(e,"data-bs-focus","false"),n(e,"aria-labelledby","exampleModalgridLabel"),n(e,"aria-modal","true")},m(H,x){F(H,e,x),i(e,t),i(t,a),i(a,r),i(a,l),i(a,c),Q&&Q.m(c,null),i(c,f),i(c,v),de(h,v,null),i(v,b),G&&G.m(v,null),i(v,k),i(v,g),i(g,I),i(I,L),i(L,o),i(o,E),i(o,D),i(o,C),s[14](C),i(o,w),U&&U.m(o,null),i(I,T),i(I,V),i(V,y),i(y,$),$.checked=s[6],i(y,X),i(y,P),i(I,z),O&&O.m(I,null),i(I,R),i(I,N),i(N,Y),s[17](Y),i(N,ce),i(N,Z),s[18](g),re=!0,j||(J=[ke($,"change",s[15]),ke(g,"submit",nt(s[9])),ke(e,"hidden.bs.modal",s[10])],j=!0)},p(H,[x]){var ge,be;H[3]?Q||(Q=Fe(),Q.c(),Q.m(c,f)):Q&&(Q.d(1),Q=null);const Ie={};!u&&x&128&&(u=!0,Ie.resetStudent=H[7],Xe(()=>u=!1)),h.$set(Ie),(ge=H[2])!=null&&ge.student_id?G?G.p(H,x):(G=Ue(H),G.c(),G.m(v,k)):G&&(G.d(1),G=null),(be=H[2])!=null&&be.started_at?U?U.p(H,x):(U=ze(H),U.c(),U.m(o,null)):U&&(U.d(1),U=null),x&64&&($.checked=H[6]),H[6]?O?O.p(H,x):(O=Ye(H),O.c(),O.m(I,R)):O&&(O.d(1),O=null),(!re||x&8)&&pe(v,"d-none",H[3])},i(H){re||(te(h.$$.fragment,H),re=!0)},o(H){ee(h.$$.fragment,H),re=!1},d(H){H&&_(e),Q&&Q.d(),ue(h),G&&G.d(),s[14](null),U&&U.d(),O&&O.d(),s[17](null),s[18](null),j=!1,it(J)}}}function Ct(s,e,t){let a,r,d,l=!1,c,f,v=!0,h,u="",{queue:b}=e;async function k(){t(3,l=!0),t(2,d={});let w=new FormData(r);w.set("exited",v),u&&w.set("student_id",u),w.set("simplified",!1);let T=await fetch(at(b.id),{headers:{Authorization:`${localStorage.getItem("SID")}`},method:"POST",body:w});ye(T),T=await T.json(),t(3,l=!1),T.status=="success"?(a.click(),mt("Added a new student to the  queue","success"),pt("queueStudents:refresh"),g()):t(2,d=T.errors)}function g(){Qe(c,Date.now()),f&&Qe(f,Date.now()),r.reset(),h(),t(8,u=""),t(2,d={})}function I(w){h=w,t(7,h)}const L=w=>t(8,u=w.detail.studentId);function o(w){Ee[w?"unshift":"push"](()=>{c=w,t(4,c)})}function E(){v=this.checked,t(6,v)}function q(w){Ee[w?"unshift":"push"](()=>{f=w,t(5,f)})}function D(w){Ee[w?"unshift":"push"](()=>{a=w,t(0,a)})}function C(w){Ee[w?"unshift":"push"](()=>{r=w,t(1,r)})}return s.$$set=w=>{"queue"in w&&t(11,b=w.queue)},[a,r,d,l,c,f,v,h,u,k,g,b,I,L,o,E,q,D,C]}class Lt extends Le{constructor(e){super(),Me(this,e,Ct,qt,qe,{queue:11})}}function Mt(s){let e,t='<i class="ri-add-line align-bottom me-1"></i>Add Student',a,r,d;return r=new Lt({props:{queue:s[2]}}),{c(){e=m("button"),e.innerHTML=t,a=M(),ie(r.$$.fragment),this.h()},l(l){e=p(l,"BUTTON",{type:!0,"data-bs-toggle":!0,"data-bs-target":!0,class:!0,"data-svelte-h":!0}),ae(e)!=="svelte-bgmpdu"&&(e.innerHTML=t),a=A(l),oe(r.$$.fragment,l),this.h()},h(){n(e,"type","button"),n(e,"data-bs-toggle","modal"),n(e,"data-bs-target","#addQueueStudentModal"),n(e,"class","btn btn-primary waves-effect waves-light")},m(l,c){F(l,e,c),F(l,a,c),de(r,l,c),d=!0},p(l,c){const f={};c&4&&(f.queue=l[2]),r.$set(f)},i(l){d||(te(r.$$.fragment,l),d=!0)},o(l){ee(r.$$.fragment,l),d=!1},d(l){l&&(_(e),_(a)),ue(r,l)}}}function At(s){let e,t,a,r,d,l,c;t=new ht({props:{type:"Student"}}),r=new _t({props:{queueStudentsList:s[3]}});const f=[s[1]];let v={};for(let h=0;h<f.length;h+=1)v=Ce(v,f[h]);return l=new ft({props:v}),{c(){e=m("div"),ie(t.$$.fragment),a=M(),ie(r.$$.fragment),d=M(),ie(l.$$.fragment),this.h()},l(h){e=p(h,"DIV",{class:!0});var u=S(e);oe(t.$$.fragment,u),a=A(u),oe(r.$$.fragment,u),d=A(u),oe(l.$$.fragment,u),u.forEach(_),this.h()},h(){n(e,"class","card-body")},m(h,u){F(h,e,u),de(t,e,null),i(e,a),de(r,e,null),i(e,d),de(l,e,null),c=!0},p(h,u){const b={};u&8&&(b.queueStudentsList=h[3]),r.$set(b);const k=u&2?Ae(f,[Pe(h[1])]):{};l.$set(k)},i(h){c||(te(t.$$.fragment,h),te(r.$$.fragment,h),te(l.$$.fragment,h),c=!0)},o(h){ee(t.$$.fragment,h),ee(r.$$.fragment,h),ee(l.$$.fragment,h),c=!1},d(h){h&&_(e),ue(t),ue(r),ue(l)}}}function Pt(s){var Y,fe,ce,Z,re;let e,t,a,r,d,l,c,f,v,h,u,b=((ce=(fe=(Y=s[2])==null?void 0:Y.canteen)==null?void 0:fe.school)==null?void 0:ce.name)+"",k,g,I,L=((re=(Z=s[2])==null?void 0:Z.canteen)==null?void 0:re.name)+"",o,E,q,D,C=s[2].id+"",w,T,V,y,$=JSON.parse(sessionStorage.getItem("permissions")).includes("queueStudents.store"),X,P=JSON.parse(sessionStorage.getItem("permissions")).includes("queueStudents.index"),B,z,R=$&&Mt(s),N=P&&At(s);return{c(){e=m("div"),t=m("div"),a=m("div"),r=m("div"),d=m("div"),l=m("div"),c=m("img"),v=M(),h=m("h4"),u=m("span"),k=K(b),g=K(" - "),I=m("span"),o=K(L),E=K(" - "),q=m("span"),D=K("Queue #"),w=K(C),T=K(" - Queue students Managment"),V=M(),y=m("div"),R&&R.c(),X=M(),N&&N.c(),this.h()},l(j){e=p(j,"DIV",{class:!0});var J=S(e);t=p(J,"DIV",{class:!0});var Q=S(t);a=p(Q,"DIV",{class:!0});var se=S(a);r=p(se,"DIV",{class:!0});var ne=S(r);d=p(ne,"DIV",{class:!0});var G=S(d);l=p(G,"DIV",{class:!0});var U=S(l);c=p(U,"IMG",{src:!0,alt:!0,class:!0}),U.forEach(_),v=A(G),h=p(G,"H4",{class:!0});var O=S(h);u=p(O,"SPAN",{class:!0});var he=S(u);k=W(he,b),he.forEach(_),g=W(O," - "),I=p(O,"SPAN",{class:!0});var _e=S(I);o=W(_e,L),_e.forEach(_),E=W(O," - "),q=p(O,"SPAN",{class:!0});var H=S(q);D=W(H,"Queue #"),w=W(H,C),H.forEach(_),T=W(O," - Queue students Managment"),O.forEach(_),G.forEach(_),V=A(ne),y=p(ne,"DIV",{class:!0});var x=S(y);R&&R.l(x),x.forEach(_),ne.forEach(_),X=A(se),N&&N.l(se),se.forEach(_),Q.forEach(_),J.forEach(_),this.h()},h(){var j,J,Q,se;ve(c.src,f=(se=(Q=(J=(j=s[2])==null?void 0:j.canteen)==null?void 0:J.school)==null?void 0:Q.logo)==null?void 0:se.full_path)||n(c,"src",f),n(c,"alt",""),n(c,"class","avatar-xs rounded-circle"),n(l,"class","flex-shrink-0"),n(u,"class","text-primary"),n(I,"class","text-primary"),n(q,"class","text-primary"),n(h,"class","card-title mb-0 flex-grow-1"),n(d,"class","d-flex gap-2 align-items-center flex-grow-1"),n(y,"class","flex-shrink-0"),n(r,"class","card-header align-items-center d-flex"),n(a,"class","card"),n(t,"class","col-lg-12"),n(e,"class","row")},m(j,J){F(j,e,J),i(e,t),i(t,a),i(a,r),i(r,d),i(d,l),i(l,c),i(d,v),i(d,h),i(h,u),i(u,k),i(h,g),i(h,I),i(I,o),i(h,E),i(h,q),i(q,D),i(q,w),i(h,T),i(r,V),i(r,y),R&&R.m(y,null),i(a,X),N&&N.m(a,null),s[5](e),z=!0},p(j,[J]){var Q,se,ne,G,U,O,he,_e,H;(!z||J&4&&!ve(c.src,f=(G=(ne=(se=(Q=j[2])==null?void 0:Q.canteen)==null?void 0:se.school)==null?void 0:ne.logo)==null?void 0:G.full_path))&&n(c,"src",f),(!z||J&4)&&b!==(b=((he=(O=(U=j[2])==null?void 0:U.canteen)==null?void 0:O.school)==null?void 0:he.name)+"")&&le(k,b),(!z||J&4)&&L!==(L=((H=(_e=j[2])==null?void 0:_e.canteen)==null?void 0:H.name)+"")&&le(o,L),(!z||J&4)&&C!==(C=j[2].id+"")&&le(w,C),$&&R.p(j,J),P&&N.p(j,J)},i(j){z||(te(R),te(N),j&&(B||ot(()=>{B=ct(e,bt,{duration:200}),B.start()})),z=!0)},o(j){ee(R),ee(N),z=!1},d(j){j&&_(e),R&&R.d(),N&&N.d(),s[5](null)}}}function Ht(s,e,t){let a,r,d,{data:l}=e,c;Ke(()=>{Et(c),vt()});function f(v){Ee[v?"unshift":"push"](()=>{c=v,t(0,c)})}return s.$$set=v=>{"data"in v&&t(4,l=v.data)},s.$$.update=()=>{s.$$.dirty&16&&t(3,a=l.queueStudentsResponse.data.queueStudents),s.$$.dirty&16&&t(2,r=l.queueStudentsResponse.data.queue),s.$$.dirty&16&&t(1,d=l.queueStudentsResponse.pagination)},[c,d,r,a,l,f]}class el extends Le{constructor(e){super(),Me(this,e,Ht,Pt,qe,{data:4})}}export{el as component,xt as universal};
