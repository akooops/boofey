import{a as nt,bf as ot,bg as ct}from"../chunks/paths.0e30d36d.js";import{g as he}from"../chunks/utils.7c7f4a39.js";import{s as dt,f as r,a as b,g as i,h,z as F,c as y,d,j as e,i as le,C as t,F as Z,Q as ut,A as Me,G as ft,l as ee,m as te,n as Oe,p as vt}from"../chunks/scheduler.726ac76d.js";import{S as ht,i as mt}from"../chunks/index.8a5ed380.js";import"../chunks/initApp.110985ec.js";const pt=!1;async function _t({fetch:f,cookies:l,url:a,depends:n}){var m,u,c,s,x;let v=await f(nt(),{headers:{Authorization:`${localStorage.getItem("SID")}`}});if(v.ok){let C=await v.json();return((u=(m=C==null?void 0:C.data)==null?void 0:m.user)==null?void 0:u.verified)==!0&&(((x=(s=(c=C==null?void 0:C.data)==null?void 0:c.user)==null?void 0:s.roles[0])==null?void 0:x.name)!="parent"?he("/admin"):he("/students")),{user:C.data.user,tabTitle:"Verification",arTabTitle:"تاكيد الحساب"}}else he("/signin")}const Pt=Object.freeze(Object.defineProperty({__proto__:null,load:_t,ssr:pt},Symbol.toStringTag,{value:"Module"}));function rt(f){var m;let l,a,n=((m=f[1])==null?void 0:m.verification_code[0])+"",v;return{c(){l=r("div"),a=r("p"),v=ee(n),this.h()},l(u){l=i(u,"DIV",{class:!0});var c=h(l);a=i(c,"P",{class:!0});var s=h(a);v=te(s,n),s.forEach(d),c.forEach(d),this.h()},h(){e(a,"class","mb-0 text-danger"),e(l,"class","my-1 text-center")},m(u,c){le(u,l,c),t(l,a),t(a,v)},p(u,c){var s;c&2&&n!==(n=((s=u[1])==null?void 0:s.verification_code[0])+"")&&Oe(v,n)},d(u){u&&d(l)}}}function it(f){var m;let l,a,n=((m=f[1])==null?void 0:m["403"])+"",v;return{c(){l=r("div"),a=r("p"),v=ee(n),this.h()},l(u){l=i(u,"DIV",{class:!0});var c=h(l);a=i(c,"P",{class:!0});var s=h(a);v=te(s,n),s.forEach(d),c.forEach(d),this.h()},h(){e(a,"class","mb-0 text-danger"),e(l,"class","my-1 text-center")},m(u,c){le(u,l,c),t(l,a),t(a,v)},p(u,c){var s;c&2&&n!==(n=((s=u[1])==null?void 0:s["403"])+"")&&Oe(v,n)},d(u){u&&d(l)}}}function gt(f){let l;return{c(){l=ee("Confirm")},l(a){l=te(a,"Confirm")},m(a,n){le(a,l,n)},d(a){a&&d(l)}}}function bt(f){let l;return{c(){l=r("span"),this.h()},l(a){l=i(a,"SPAN",{class:!0,role:!0}),h(l).forEach(d),this.h()},h(){e(l,"class","spinner-border "),e(l,"role","status")},m(a,n){le(a,l,n)},d(a){a&&d(l)}}}function yt(f){let l,a,n,v,m;return{c(){l=r("p"),a=ee("You need to wait "),n=r("span"),v=ee(f[3]),m=ee(" in order to resend again"),this.h()},l(u){l=i(u,"P",{class:!0});var c=h(l);a=te(c,"You need to wait "),n=i(c,"SPAN",{});var s=h(n);v=te(s,f[3]),s.forEach(d),m=te(c," in order to resend again"),c.forEach(d),this.h()},h(){e(l,"class","mb-0")},m(u,c){le(u,l,c),t(l,a),t(l,n),t(n,v),t(l,m)},p(u,c){c&8&&Oe(v,u[3])},d(u){u&&d(l)}}}function It(f){let l,a,n,v="Resend",m,u;return{c(){l=r("p"),a=ee("Didn't receive the code ? "),n=r("a"),n.textContent=v,this.h()},l(c){l=i(c,"P",{class:!0});var s=h(l);a=te(s,"Didn't receive the code ? "),n=i(s,"A",{href:!0,class:!0,"data-svelte-h":!0}),F(n)!=="svelte-eby14k"&&(n.textContent=v),s.forEach(d),this.h()},h(){e(n,"href","javascript:void(0);"),e(n,"class","fw-semibold text-primary text-decoration-underline"),e(l,"class","mb-0")},m(c,s){le(c,l,s),t(l,a),t(l,n),m||(u=Z(n,"click",f[6]),m=!0)},p:Me,d(c){c&&d(l),m=!1,u()}}}function Dt(f){var Je,Ke;let l,a,n,v,m,u='<div class="avatar-lg mx-auto"><div class="avatar-title bg-light text-primary display-5 rounded-circle"><i class="ri-mail-line"></i></div></div>',c,s,x,C="<h4>Verify Your Account</h4> <p>Please enter the 6 digits code sent to your phone number</p>",de,I,_,H,A,S,me="Digit 1",ue,T,fe,o,k,g,ae="Digit 2",se,P,Ve,re,G,Y,ze="Digit 3",Te,B,Pe,ie,q,Q,Fe="Digit 4",Le,U,we,ne,J,K,He="Digit 5",Ae,M,Se,oe,W,X,Ge="Digit 6",Ne,O,je,pe,_e,ce,N,Be,R,Ue,Ye,D=((Je=f[1])==null?void 0:Je.verification_code)&&rt(f),E=((Ke=f[1])==null?void 0:Ke["403"])&&it(f);function qe(p,w){return p[2]?bt:gt}let ge=qe(f),z=ge(f);function Qe(p,w){return p[4]?It:yt}let be=Qe(f),L=be(f);return{c(){l=r("div"),a=r("div"),n=r("div"),v=r("div"),m=r("div"),m.innerHTML=u,c=b(),s=r("div"),x=r("div"),x.innerHTML=C,de=b(),I=r("form"),_=r("div"),H=r("div"),A=r("div"),S=r("label"),S.textContent=me,ue=b(),T=r("input"),fe=b(),o=r("div"),k=r("div"),g=r("label"),g.textContent=ae,se=b(),P=r("input"),Ve=b(),re=r("div"),G=r("div"),Y=r("label"),Y.textContent=ze,Te=b(),B=r("input"),Pe=b(),ie=r("div"),q=r("div"),Q=r("label"),Q.textContent=Fe,Le=b(),U=r("input"),we=b(),ne=r("div"),J=r("div"),K=r("label"),K.textContent=He,Ae=b(),M=r("input"),Se=b(),oe=r("div"),W=r("div"),X=r("label"),X.textContent=Ge,Ne=b(),O=r("input"),je=b(),D&&D.c(),pe=b(),E&&E.c(),_e=b(),ce=r("div"),N=r("button"),z.c(),Be=b(),R=r("div"),L.c(),this.h()},l(p){l=i(p,"DIV",{class:!0});var w=h(l);a=i(w,"DIV",{class:!0});var $=h(a);n=i($,"DIV",{class:!0});var ve=h(n);v=i(ve,"DIV",{class:!0});var ye=h(v);m=i(ye,"DIV",{class:!0,"data-svelte-h":!0}),F(m)!=="svelte-avlb1x"&&(m.innerHTML=u),c=y(ye),s=i(ye,"DIV",{class:!0});var j=h(s);x=i(j,"DIV",{class:!0,"data-svelte-h":!0}),F(x)!=="svelte-161mceq"&&(x.innerHTML=C),de=y(j),I=i(j,"FORM",{autocomplete:!0});var We=h(I);_=i(We,"DIV",{class:!0});var V=h(_);H=i(V,"DIV",{class:!0});var Xe=h(H);A=i(Xe,"DIV",{class:!0});var Ie=h(A);S=i(Ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(S)!=="svelte-1awd8xw"&&(S.textContent=me),ue=y(Ie),T=i(Ie,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),Ie.forEach(d),Xe.forEach(d),fe=y(V),o=i(V,"DIV",{class:!0});var Ze=h(o);k=i(Ze,"DIV",{class:!0});var De=h(k);g=i(De,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(g)!=="svelte-13ta3ua"&&(g.textContent=ae),se=y(De),P=i(De,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),De.forEach(d),Ze.forEach(d),Ve=y(V),re=i(V,"DIV",{class:!0});var Re=h(re);G=i(Re,"DIV",{class:!0});var Ee=h(G);Y=i(Ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(Y)!=="svelte-1rr05hg"&&(Y.textContent=ze),Te=y(Ee),B=i(Ee,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),Ee.forEach(d),Re.forEach(d),Pe=y(V),ie=i(V,"DIV",{class:!0});var $e=h(ie);q=i($e,"DIV",{class:!0});var xe=h(q);Q=i(xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(Q)!=="svelte-atghkm"&&(Q.textContent=Fe),Le=y(xe),U=i(xe,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),xe.forEach(d),$e.forEach(d),we=y(V),ne=i(V,"DIV",{class:!0});var et=h(ne);J=i(et,"DIV",{class:!0});var ke=h(J);K=i(ke,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(K)!=="svelte-1hdusik"&&(K.textContent=He),Ae=y(ke),M=i(ke,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),ke.forEach(d),et.forEach(d),Se=y(V),oe=i(V,"DIV",{class:!0});var tt=h(oe);W=i(tt,"DIV",{class:!0});var Ce=h(W);X=i(Ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),F(X)!=="svelte-168u1ia"&&(X.textContent=Ge),Ne=y(Ce),O=i(Ce,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),Ce.forEach(d),tt.forEach(d),V.forEach(d),We.forEach(d),je=y(j),D&&D.l(j),pe=y(j),E&&E.l(j),_e=y(j),ce=i(j,"DIV",{class:!0});var lt=h(ce);N=i(lt,"BUTTON",{class:!0,type:!0});var at=h(N);z.l(at),at.forEach(d),lt.forEach(d),j.forEach(d),ye.forEach(d),ve.forEach(d),Be=y($),R=i($,"DIV",{class:!0});var st=h(R);L.l(st),st.forEach(d),$.forEach(d),w.forEach(d),this.h()},h(){e(m,"class","mb-4"),e(x,"class","text-muted text-center mb-4 mx-lg-3"),e(S,"for","digit1-input"),e(S,"class","visually-hidden"),e(T,"type","text"),e(T,"name","1"),e(T,"class","form-control form-control-lg bg-light border-light text-center p-0 p-0"),e(T,"maxlength","1"),e(T,"id","digit1-input"),e(A,"class","mb-3"),e(H,"class","col-2"),e(g,"for","digit2-input"),e(g,"class","visually-hidden"),e(P,"type","text"),e(P,"name","2"),e(P,"class","form-control form-control-lg bg-light border-light text-center p-0"),e(P,"maxlength","1"),e(P,"id","digit2-input"),e(k,"class","mb-3"),e(o,"class","col-2"),e(Y,"for","digit3-input"),e(Y,"class","visually-hidden"),e(B,"type","text"),e(B,"name","3"),e(B,"class","form-control form-control-lg bg-light border-light text-center p-0"),e(B,"maxlength","1"),e(B,"id","digit3-input"),e(G,"class","mb-3"),e(re,"class","col-2"),e(Q,"for","digit4-input"),e(Q,"class","visually-hidden"),e(U,"type","text"),e(U,"name","4"),e(U,"class","form-control form-control-lg bg-light border-light text-center p-0"),e(U,"maxlength","1"),e(U,"id","digit4-input"),e(q,"class","mb-3"),e(ie,"class","col-2"),e(K,"for","digit5-input"),e(K,"class","visually-hidden"),e(M,"type","text"),e(M,"name","5"),e(M,"class","form-control form-control-lg bg-light border-light text-center p-0"),e(M,"maxlength","1"),e(M,"id","digit5-input"),e(J,"class","mb-3"),e(ne,"class","col-2"),e(X,"for","digit6-input"),e(X,"class","visually-hidden"),e(O,"type","text"),e(O,"name","6"),e(O,"class","form-control form-control-lg bg-light border-light text-center p-0"),e(O,"maxlength","1"),e(O,"id","digit6-input"),e(W,"class","mb-3"),e(oe,"class","col-2"),e(_,"class","row"),e(I,"autocomplete","off"),e(N,"class","btn btn-primary w-100 btn-load"),e(N,"type","submit"),N.disabled=f[2],e(ce,"class","mt-3"),e(s,"class","p-2 mt-4"),e(v,"class","card-body p-4"),e(n,"class","card mt-4"),e(R,"class","mt-4 text-center"),e(a,"class","col-md-9 col-lg-7 col-xl-6"),e(l,"class","row justify-content-center")},m(p,w){le(p,l,w),t(l,a),t(a,n),t(n,v),t(v,m),t(v,c),t(v,s),t(s,x),t(s,de),t(s,I),t(I,_),t(_,H),t(H,A),t(A,S),t(A,ue),t(A,T),t(_,fe),t(_,o),t(o,k),t(k,g),t(k,se),t(k,P),t(_,Ve),t(_,re),t(re,G),t(G,Y),t(G,Te),t(G,B),t(_,Pe),t(_,ie),t(ie,q),t(q,Q),t(q,Le),t(q,U),t(_,we),t(_,ne),t(ne,J),t(J,K),t(J,Ae),t(J,M),t(_,Se),t(_,oe),t(oe,W),t(W,X),t(W,Ne),t(W,O),f[15](I),t(s,je),D&&D.m(s,null),t(s,pe),E&&E.m(s,null),t(s,_e),t(s,ce),t(ce,N),z.m(N,null),t(a,Be),t(a,R),L.m(R,null),Ue||(Ye=[Z(T,"keyup",f[9]),Z(P,"keyup",f[10]),Z(B,"keyup",f[11]),Z(U,"keyup",f[12]),Z(M,"keyup",f[13]),Z(O,"keyup",f[14]),Z(I,"submit",ut(f[5]))],Ue=!0)},p(p,[w]){var $,ve;($=p[1])!=null&&$.verification_code?D?D.p(p,w):(D=rt(p),D.c(),D.m(s,pe)):D&&(D.d(1),D=null),(ve=p[1])!=null&&ve["403"]?E?E.p(p,w):(E=it(p),E.c(),E.m(s,_e)):E&&(E.d(1),E=null),ge!==(ge=qe(p))&&(z.d(1),z=ge(p),z&&(z.c(),z.m(N,null))),w&4&&(N.disabled=p[2]),be===(be=Qe(p))&&L?L.p(p,w):(L.d(1),L=be(p),L&&(L.c(),L.m(R,null)))},i:Me,o:Me,d(p){p&&d(l),f[15](null),D&&D.d(),E&&E.d(),z.d(),L.d(),Ue=!1,ft(Ye)}}}function Et(f,l,a){let{data:n}=l,v,m,u=!1,c="01:00",s=58,x=!0;async function C(){a(2,u=!0),a(1,m={});let o=new FormData(v),k=[];for(const ae of o.entries()){const[se,P]=ae;k.push(P)}o=new FormData,o.set("verification_code",k.join("")),o.set("lang",localStorage.getItem("language"));let g=await fetch(ot(),{method:"POST",headers:{Authorization:`${localStorage.getItem("SID")}`},body:o});g=await g.json(),g.status=="success"?n.user.roles[0].name=="parent"?he("/"):he("/admin"):a(1,m=g.errors),a(2,u=!1)}async function de(){await fetch(ct(),{method:"POST",headers:{Authorization:`${localStorage.getItem("SID")}`}}),a(4,x=!1),_()}function I(o,k){function g(se){return document.getElementById("digit"+se+"-input")}const ae=k.which||k.keyCode;g(o).value.length===1&&(o!==6?g(o+1).focus():(g(o).blur(),C())),ae===8&&o!==1&&g(o-1).focus()}function _(){const o=s%60;a(3,c=`00:${o<10?"0":""}${o}`),s===0?(a(4,x=!0),s=59):(s--,setTimeout(_,1e3))}const H=o=>I(1,o),A=o=>I(2,o),S=o=>I(3,o),me=o=>I(4,o),ue=o=>I(5,o),T=o=>I(6,o);function fe(o){vt[o?"unshift":"push"](()=>{v=o,a(0,v)})}return f.$$set=o=>{"data"in o&&a(8,n=o.data)},[v,m,u,c,x,C,de,I,n,H,A,S,me,ue,T,fe]}class Lt extends ht{constructor(l){super(),mt(this,l,Et,Dt,dt,{data:8})}}export{Lt as component,Pt as universal};
