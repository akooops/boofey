import{l as ft}from"../chunks/paths.29c5142d.js";import{a as vt}from"../chunks/auth.82ff8344.js";import{s as Je,f as l,a as T,l as m,g as o,h as n,d as s,c as A,m as p,z as He,E as et,j as a,i as Ie,C as e,n as Z,A as Be,P as ht,o as _t,e as Ue,p as mt,S as pt}from"../chunks/scheduler.726ac76d.js";import{S as Ke,i as We,b as ot,d as dt,m as nt,a as Le,t as Me,c as it,e as ct,g as ut,h as gt}from"../chunks/index.8a5ed380.js";import{e as tt,u as Et,o as bt}from"../chunks/each.381f634d.js";import{i as It}from"../chunks/WebUsbPrinter.be00341a.js";import"../chunks/paths.7846b4ff.js";import"../chunks/index.93323930.js";const Dt=!1;async function yt({fetch:v,url:t,depends:i,params:r}){let u=await v(ft(r.orderId),{headers:{Authorization:`${localStorage.getItem("SID")}`}});return vt(u),{orderResponse:await u.json(),tabTitle:`Order #${r.orderId}`}}const jt=Object.freeze(Object.defineProperty({__proto__:null,load:yt,ssr:Dt},Symbol.toStringTag,{value:"Module"}));function Vt(v){let t,i,r,u,f,_,c,d,h,b,V,D=v[0].product.name+"",N,ee,I,C,E,g,y=(v[0].product.category==null?"no category":v[0].product.category.name)+"",P,z,U,S,te,$,ae,de=v[0].qty+"",ve,De,q,B,F,Ae="Item Price:",ye,j,G=v[0].product.currentPrice+"",he,ne,_e,le,J,H,me="",pe,oe,K,x,ie="Total :",Ce,re,W=v[0].product.currentPrice*v[0].qty+"",Q,ce;return{c(){t=l("div"),i=l("div"),r=l("div"),u=l("div"),f=l("div"),_=l("img"),d=T(),h=l("div"),b=l("h5"),V=l("a"),N=m(D),ee=T(),I=l("ul"),C=l("li"),E=m("Category : "),g=l("span"),P=m(y),z=T(),U=l("ul"),S=l("li"),te=m("Quantity : "),$=l("span"),ae=m("x"),ve=m(de),De=T(),q=l("div"),B=l("div"),F=l("p"),F.textContent=Ae,ye=T(),j=l("h5"),he=m(G),ne=m(" SAR"),_e=T(),le=l("div"),J=l("div"),H=l("div"),H.innerHTML=me,pe=T(),oe=l("div"),K=l("div"),x=l("div"),x.textContent=ie,Ce=T(),re=l("h5"),Q=m(W),ce=m(" SAR"),this.h()},l(R){t=o(R,"DIV",{class:!0});var L=n(t);i=o(L,"DIV",{class:!0});var Re=n(i);r=o(Re,"DIV",{class:!0});var Y=n(r);u=o(Y,"DIV",{class:!0});var X=n(u);f=o(X,"DIV",{class:!0});var Ve=n(f);_=o(Ve,"IMG",{src:!0,alt:!0,class:!0}),Ve.forEach(s),X.forEach(s),d=A(Y),h=o(Y,"DIV",{class:!0});var O=n(h);b=o(O,"H5",{class:!0});var ge=n(b);V=o(ge,"A",{href:!0,class:!0});var ke=n(V);N=p(ke,D),ke.forEach(s),ge.forEach(s),ee=A(O),I=o(O,"UL",{class:!0});var Se=n(I);C=o(Se,"LI",{class:!0});var w=n(C);E=p(w,"Category : "),g=o(w,"SPAN",{class:!0});var k=n(g);P=p(k,y),k.forEach(s),w.forEach(s),Se.forEach(s),z=A(O),U=o(O,"UL",{class:!0});var M=n(U);S=o(M,"LI",{class:!0});var Pe=n(S);te=p(Pe,"Quantity : "),$=o(Pe,"SPAN",{class:!0});var Ee=n($);ae=p(Ee,"x"),ve=p(Ee,de),Ee.forEach(s),Pe.forEach(s),M.forEach(s),O.forEach(s),De=A(Y),q=o(Y,"DIV",{class:!0});var we=n(q);B=o(we,"DIV",{class:!0});var Te=n(B);F=o(Te,"P",{class:!0,"data-svelte-h":!0}),He(F)!=="svelte-2y45sf"&&(F.textContent=Ae),ye=A(Te),j=o(Te,"H5",{class:!0});var $e=n(j);he=p($e,G),ne=p($e," SAR"),$e.forEach(s),Te.forEach(s),we.forEach(s),Y.forEach(s),Re.forEach(s),_e=A(L),le=o(L,"DIV",{class:!0});var se=n(le);J=o(se,"DIV",{class:!0});var ue=n(J);H=o(ue,"DIV",{class:!0,"data-svelte-h":!0}),He(H)!=="svelte-yefo47"&&(H.innerHTML=me),pe=A(ue),oe=o(ue,"DIV",{class:!0});var Oe=n(oe);K=o(Oe,"DIV",{class:!0});var fe=n(K);x=o(fe,"DIV",{"data-svelte-h":!0}),He(x)!=="svelte-lxj2re"&&(x.textContent=ie),Ce=A(fe),re=o(fe,"H5",{class:!0});var be=n(re);Q=p(be,W),ce=p(be," SAR"),be.forEach(s),fe.forEach(s),Oe.forEach(s),ue.forEach(s),se.forEach(s),L.forEach(s),this.h()},h(){et(_.src,c=v[0].product.image.full_path)||a(_,"src",c),a(_,"alt",""),a(_,"class","img-fluid d-block"),a(f,"class","avatar-lg bg-light rounded p-1"),a(u,"class","col-sm-auto"),a(V,"href","ecommerce-orderItem.product-detail.html"),a(V,"class","text-body"),a(b,"class","fs-14 text-truncate"),a(g,"class","fw-medium"),a(C,"class","list-inline-item"),a(I,"class","list-inline text-muted"),a($,"class","fw-medium"),a(S,"class","list-inline-item"),a(U,"class","list-inline text-muted"),a(h,"class","col-sm"),a(F,"class","text-muted mb-1"),a(j,"class","fs-14"),a(B,"class","text-lg-end"),a(q,"class","col-sm-auto"),a(r,"class","row gy-3"),a(i,"class","card-body"),a(H,"class","col-sm"),a(re,"class","fs-14 mb-0"),a(K,"class","d-flex align-items-center gap-2 text-muted"),a(oe,"class","col-sm-auto"),a(J,"class","row align-items-center gy-3"),a(le,"class","card-footer"),a(t,"class","card product")},m(R,L){Ie(R,t,L),e(t,i),e(i,r),e(r,u),e(u,f),e(f,_),e(r,d),e(r,h),e(h,b),e(b,V),e(V,N),e(h,ee),e(h,I),e(I,C),e(C,E),e(C,g),e(g,P),e(h,z),e(h,U),e(U,S),e(S,te),e(S,$),e($,ae),e($,ve),e(r,De),e(r,q),e(q,B),e(B,F),e(B,ye),e(B,j),e(j,he),e(j,ne),e(t,_e),e(t,le),e(le,J),e(J,H),e(J,pe),e(J,oe),e(oe,K),e(K,x),e(K,Ce),e(K,re),e(re,Q),e(re,ce)},p(R,[L]){L&1&&!et(_.src,c=R[0].product.image.full_path)&&a(_,"src",c),L&1&&D!==(D=R[0].product.name+"")&&Z(N,D),L&1&&y!==(y=(R[0].product.category==null?"no category":R[0].product.category.name)+"")&&Z(P,y),L&1&&de!==(de=R[0].qty+"")&&Z(ve,de),L&1&&G!==(G=R[0].product.currentPrice+"")&&Z(he,G),L&1&&W!==(W=R[0].product.currentPrice*R[0].qty+"")&&Z(Q,W)},i:Be,o:Be,d(R){R&&s(t)}}}function St(v,t,i){let{orderItem:r}=t;return ht(),v.$$set=u=>{"orderItem"in u&&i(0,r=u.orderItem)},[r]}class wt extends Ke{constructor(t){super(),We(this,t,St,Vt,Je,{orderItem:0})}}function at(v){let t,i,r,u;return{c(){t=l("a"),i=l("i"),r=m(" New Order"),this.h()},l(f){t=o(f,"A",{role:!0,href:!0,class:!0});var _=n(t);i=o(_,"I",{class:!0}),n(i).forEach(s),r=p(_," New Order"),_.forEach(s),this.h()},h(){a(i,"class","ri-printer-line align-bottom me-1"),a(t,"role","button"),a(t,"href",u="/admin/canteens/"+v[1]+"/orders/add"),a(t,"class","btn btn-primary waves-effect waves-light")},m(f,_){Ie(f,t,_),e(t,i),e(t,r)},p(f,_){_&2&&u!==(u="/admin/canteens/"+f[1]+"/orders/add")&&a(t,"href",u)},d(f){f&&s(t)}}}function Tt(v){let t,i,r,u,f='<h5 class="card-title mb-0">Order Summary</h5>',_,c,d,h,b,V,D,N="Sub Total :",ee,I,C=v[0].subtotal+"",E,g,y,P,z,U,S,te,$=v[0].discount+"",ae,de,ve,De,q,B=v[0].discountCalculated+"",F,Ae,ye,j,G,he,ne=v[0].tax+"",_e,le,J,H,me=v[0].taxCalculated+"",pe,oe,K,x,ie,Ce="Total (SAR) :",re,W,Q,ce=v[0].total+"",R,L,Re,Y,X,Ve,O,ge,ke,Se,w=v[1]&&at(v);return{c(){t=l("div"),i=l("div"),r=l("div"),u=l("div"),u.innerHTML=f,_=T(),c=l("div"),d=l("div"),h=l("table"),b=l("tbody"),V=l("tr"),D=l("td"),D.textContent=N,ee=T(),I=l("td"),E=m(C),g=m(" SAR"),y=T(),P=l("tr"),z=l("td"),U=m("Discount "),S=l("span"),te=m("("),ae=m($),de=m("%)"),ve=m(" :"),De=T(),q=l("td"),F=m(B),Ae=m(" SAR"),ye=T(),j=l("tr"),G=l("td"),he=m("Estimated Tax ("),_e=m(ne),le=m("%) :"),J=T(),H=l("td"),pe=m(me),oe=m(" SAR"),K=T(),x=l("tr"),ie=l("th"),ie.textContent=Ce,re=T(),W=l("td"),Q=l("span"),R=m(ce),L=m(" SAR"),Re=T(),Y=l("div"),X=l("div"),w&&w.c(),Ve=T(),O=l("a"),ge=l("i"),ke=m(" Print Order"),this.h()},l(k){t=o(k,"DIV",{class:!0});var M=n(t);i=o(M,"DIV",{class:!0});var Pe=n(i);r=o(Pe,"DIV",{class:!0});var Ee=n(r);u=o(Ee,"DIV",{class:!0,"data-svelte-h":!0}),He(u)!=="svelte-1y5tcqw"&&(u.innerHTML=f),_=A(Ee),c=o(Ee,"DIV",{class:!0});var we=n(c);d=o(we,"DIV",{class:!0});var Te=n(d);h=o(Te,"TABLE",{class:!0});var $e=n(h);b=o($e,"TBODY",{});var se=n(b);V=o(se,"TR",{});var ue=n(V);D=o(ue,"TD",{"data-svelte-h":!0}),He(D)!=="svelte-pfaxes"&&(D.textContent=N),ee=A(ue),I=o(ue,"TD",{class:!0,id:!0});var Oe=n(I);E=p(Oe,C),g=p(Oe," SAR"),Oe.forEach(s),ue.forEach(s),y=A(se),P=o(se,"TR",{});var fe=n(P);z=o(fe,"TD",{});var be=n(z);U=p(be,"Discount "),S=o(be,"SPAN",{class:!0});var Ne=n(S);te=p(Ne,"("),ae=p(Ne,$),de=p(Ne,"%)"),Ne.forEach(s),ve=p(be," :"),be.forEach(s),De=A(fe),q=o(fe,"TD",{class:!0,id:!0});var Ge=n(q);F=p(Ge,B),Ae=p(Ge," SAR"),Ge.forEach(s),fe.forEach(s),ye=A(se),j=o(se,"TR",{});var qe=n(j);G=o(qe,"TD",{});var je=n(G);he=p(je,"Estimated Tax ("),_e=p(je,ne),le=p(je,"%) :"),je.forEach(s),J=A(qe),H=o(qe,"TD",{class:!0,id:!0});var Qe=n(H);pe=p(Qe,me),oe=p(Qe," SAR"),Qe.forEach(s),qe.forEach(s),K=A(se),x=o(se,"TR",{class:!0});var xe=n(x);ie=o(xe,"TH",{"data-svelte-h":!0}),He(ie)!=="svelte-w5xebh"&&(ie.textContent=Ce),re=A(xe),W=o(xe,"TD",{class:!0});var Xe=n(W);Q=o(Xe,"SPAN",{class:!0,id:!0});var Ye=n(Q);R=p(Ye,ce),L=p(Ye," SAR"),Ye.forEach(s),Xe.forEach(s),xe.forEach(s),se.forEach(s),$e.forEach(s),Te.forEach(s),Re=A(we),Y=o(we,"DIV",{class:!0});var Ze=n(Y);X=o(Ze,"DIV",{class:!0});var ze=n(X);w&&w.l(ze),Ve=A(ze),O=o(ze,"A",{role:!0,href:!0,target:!0,class:!0});var Fe=n(O);ge=o(Fe,"I",{class:!0}),n(ge).forEach(s),ke=p(Fe," Print Order"),Fe.forEach(s),ze.forEach(s),Ze.forEach(s),we.forEach(s),Ee.forEach(s),Pe.forEach(s),M.forEach(s),this.h()},h(){a(u,"class","card-header border-bottom-dashed"),a(I,"class","text-end"),a(I,"id","cart-subtotal"),a(S,"class","text-muted"),a(q,"class","text-end"),a(q,"id","cart-discount"),a(H,"class","text-end"),a(H,"id","cart-tax"),a(Q,"class","fw-semibold"),a(Q,"id","cart-total"),a(W,"class","text-end"),a(x,"class","table-active"),a(h,"class","table table-borderless mb-0"),a(d,"class","table-responsive"),a(ge,"class","ri-printer-line align-bottom me-1"),a(O,"role","button"),a(O,"href",Se="/admin/orders/"+v[0].id+"/print"),a(O,"target","_blank"),a(O,"class","btn btn-primary waves-effect waves-light"),a(X,"class","hstack gap-2 justify-content-end"),a(Y,"class","row g-3 mt-2 "),a(c,"class","card-body pt-2"),a(r,"class","card"),a(i,"class","sticky-side-div"),a(t,"class","col-xl-4")},m(k,M){Ie(k,t,M),e(t,i),e(i,r),e(r,u),e(r,_),e(r,c),e(c,d),e(d,h),e(h,b),e(b,V),e(V,D),e(V,ee),e(V,I),e(I,E),e(I,g),e(b,y),e(b,P),e(P,z),e(z,U),e(z,S),e(S,te),e(S,ae),e(S,de),e(z,ve),e(P,De),e(P,q),e(q,F),e(q,Ae),e(b,ye),e(b,j),e(j,G),e(G,he),e(G,_e),e(G,le),e(j,J),e(j,H),e(H,pe),e(H,oe),e(b,K),e(b,x),e(x,ie),e(x,re),e(x,W),e(W,Q),e(Q,R),e(Q,L),e(c,Re),e(c,Y),e(Y,X),w&&w.m(X,null),e(X,Ve),e(X,O),e(O,ge),e(O,ke)},p(k,[M]){M&1&&C!==(C=k[0].subtotal+"")&&Z(E,C),M&1&&$!==($=k[0].discount+"")&&Z(ae,$),M&1&&B!==(B=k[0].discountCalculated+"")&&Z(F,B),M&1&&ne!==(ne=k[0].tax+"")&&Z(_e,ne),M&1&&me!==(me=k[0].taxCalculated+"")&&Z(pe,me),M&1&&ce!==(ce=k[0].total+"")&&Z(R,ce),k[1]?w?w.p(k,M):(w=at(k),w.c(),w.m(X,Ve)):w&&(w.d(1),w=null),M&1&&Se!==(Se="/admin/orders/"+k[0].id+"/print")&&a(O,"href",Se)},i:Be,o:Be,d(k){k&&s(t),w&&w.d()}}}function At(v,t,i){let{order:r}=t,u;return _t(()=>{new It;let f=new URL(document.location).searchParams;i(1,u=f.get("canteen"))}),v.$$set=f=>{"order"in f&&i(0,r=f.order)},[r,u]}class Ct extends Ke{constructor(t){super(),We(this,t,At,Tt,Je,{order:0})}}function rt(v,t,i){const r=v.slice();return r[4]=t[i],r[5]=t,r[6]=i,r}function st(v){let t=[],i=new Map,r,u,f=tt(v[0]);const _=c=>c[4].id;for(let c=0;c<f.length;c+=1){let d=rt(v,f,c),h=_(d);i.set(h,t[c]=lt(h,d))}return{c(){for(let c=0;c<t.length;c+=1)t[c].c();r=Ue()},l(c){for(let d=0;d<t.length;d+=1)t[d].l(c);r=Ue()},m(c,d){for(let h=0;h<t.length;h+=1)t[h]&&t[h].m(c,d);Ie(c,r,d),u=!0},p(c,d){d&1&&(f=tt(c[0]),ut(),t=Et(t,d,_,1,c,f,i,r.parentNode,bt,lt,r,rt),it())},i(c){if(!u){for(let d=0;d<f.length;d+=1)Le(t[d]);u=!0}},o(c){for(let d=0;d<t.length;d+=1)Me(t[d]);u=!1},d(c){c&&s(r);for(let d=0;d<t.length;d+=1)t[d].d(c)}}}function lt(v,t){let i,r,u,f;function _(d){t[3](d,t[4],t[5],t[6])}let c={};return t[4]!==void 0&&(c.orderItem=t[4]),r=new wt({props:c}),mt.push(()=>gt(r,"orderItem",_)),{key:v,first:null,c(){i=Ue(),ot(r.$$.fragment),this.h()},l(d){i=Ue(),dt(r.$$.fragment,d),this.h()},h(){this.first=i},m(d,h){Ie(d,i,h),nt(r,d,h),f=!0},p(d,h){t=d;const b={};!u&&h&1&&(u=!0,b.orderItem=t[4],pt(()=>u=!1)),r.$set(b)},i(d){f||(Le(r.$$.fragment,d),f=!0)},o(d){Me(r.$$.fragment,d),f=!1},d(d){d&&s(i),ct(r,d)}}}function Rt(v){let t,i,r,u,f,_,c,d=v[1].id+"",h,b,V,D,N,ee,I,C,E=v[0]&&st(v);return I=new Ct({props:{order:v[1]}}),{c(){t=l("div"),i=l("div"),r=l("div"),u=l("div"),f=l("h4"),_=l("span"),c=m("#"),h=m(d),b=m(" Order View"),V=T(),D=l("div"),N=l("div"),E&&E.c(),ee=T(),ot(I.$$.fragment),this.h()},l(g){t=o(g,"DIV",{class:!0});var y=n(t);i=o(y,"DIV",{class:!0});var P=n(i);r=o(P,"DIV",{class:!0});var z=n(r);u=o(z,"DIV",{class:!0});var U=n(u);f=o(U,"H4",{class:!0});var S=n(f);_=o(S,"SPAN",{class:!0});var te=n(_);c=p(te,"#"),h=p(te,d),te.forEach(s),b=p(S," Order View"),S.forEach(s),U.forEach(s),z.forEach(s),P.forEach(s),y.forEach(s),V=A(g),D=o(g,"DIV",{class:!0});var $=n(D);N=o($,"DIV",{class:!0});var ae=n(N);E&&E.l(ae),ae.forEach(s),ee=A($),dt(I.$$.fragment,$),$.forEach(s),this.h()},h(){a(_,"class","text-primary"),a(f,"class","card-title mb-0 flex-grow-1"),a(u,"class","card-header align-items-center d-flex"),a(r,"class","card"),a(i,"class","col-lg-12"),a(t,"class","row"),a(N,"class","col-xl-8"),a(D,"class","row mb-3")},m(g,y){Ie(g,t,y),e(t,i),e(i,r),e(r,u),e(u,f),e(f,_),e(_,c),e(_,h),e(f,b),Ie(g,V,y),Ie(g,D,y),e(D,N),E&&E.m(N,null),e(D,ee),nt(I,D,null),C=!0},p(g,[y]){(!C||y&2)&&d!==(d=g[1].id+"")&&Z(h,d),g[0]?E?(E.p(g,y),y&1&&Le(E,1)):(E=st(g),E.c(),Le(E,1),E.m(N,null)):E&&(ut(),Me(E,1,1,()=>{E=null}),it());const P={};y&2&&(P.order=g[1]),I.$set(P)},i(g){C||(Le(E),Le(I.$$.fragment,g),C=!0)},o(g){Me(E),Me(I.$$.fragment,g),C=!1},d(g){g&&(s(t),s(V),s(D)),E&&E.d(),ct(I)}}}function kt(v,t,i){let r,u,{data:f}=t;function _(c,d,h,b){h[b]=c,i(0,u),i(2,f)}return v.$$set=c=>{"data"in c&&i(2,f=c.data)},v.$$.update=()=>{v.$$.dirty&4&&i(1,r=f.orderResponse.data.order),v.$$.dirty&4&&i(0,u=f.orderResponse.data.order.order_items)},[u,r,f,_]}class xt extends Ke{constructor(t){super(),We(this,t,kt,Rt,Je,{data:2})}}export{xt as component,jt as universal};
