import{a as Ge,bc as Fe,bd as We}from"../chunks/paths.29c5142d.js";import{g as De}from"../chunks/utils.5f096ebf.js";import{s as Qe,e as Me,i as J,A as fe,d as i,p as xe,f as c,l as T,a as P,g as d,h as f,m as V,c as N,z as Ve,j as o,E as Ke,W as ke,C as l,F as we,Q as qe,n as ye,G as Xe,N as Ye,O as Ze}from"../chunks/scheduler.726ac76d.js";import{S as Je,i as $e}from"../chunks/index.8a5ed380.js";import"../chunks/initApp.110985ec.js";import"../chunks/cleave-esm.c0d0931e.js";import{t as R}from"../chunks/translation.098a1f9d.js";const et=!1;async function tt({fetch:u,cookies:e,url:t,depends:r}){var s,n,h,v,I;let a=await u(Ge(),{headers:{Authorization:`${localStorage.getItem("SID")}`}});if(a.ok){let _=await a.json();((n=(s=_==null?void 0:_.data)==null?void 0:s.user)==null?void 0:n.verified)==!1&&De("/verification"),((I=(v=(h=_==null?void 0:_.data)==null?void 0:h.user)==null?void 0:v.roles[0])==null?void 0:I.name)!="parent"?De("/admin"):De("/")}return{tabTitle:"Sign In",arTabTitle:"تسجيل الدخول"}}const bt=Object.freeze(Object.defineProperty({__proto__:null,load:tt,ssr:et},Symbol.toStringTag,{value:"Module"}));function lt(u){var pe,ge;let e,t,r,a,s,n,h=R.welcomeBack[localStorage.getItem("language")]+"",v,I,_,E=R.signInToContinue[localStorage.getItem("language")]+"",j,F,L,b,ne="",re,K,p,H,m,y=R.enterSix[localStorage.getItem("language")]+"",$,A,B,ee,te,C,z,X,Y,Z,oe="Digit 1",q,G,me,D,de,le,k,_e,S,W,ce,O=((pe=u[1])==null?void 0:pe.verification_code)&&ze(u),w=((ge=u[1])==null?void 0:ge["403"])&&Ue(u);function ie(g,x){return g[2]?rt:st}let ue=ie(u),U=ue(u);function he(g,x){return g[4]?it:ot}let Q=he(u),M=Q(u);return{c(){e=c("div"),t=c("div"),r=c("div"),a=c("div"),s=c("div"),n=c("h5"),v=T(h),I=P(),_=c("p"),j=T(E),F=T(" Boofey."),L=P(),b=c("lord-icon"),b.innerHTML=ne,K=P(),p=c("div"),H=c("div"),m=c("p"),$=T(y),A=T(" : "),B=c("span"),ee=T(u[6]),te=P(),C=c("form"),z=c("div"),X=c("div"),Y=c("div"),Z=c("label"),Z.textContent=oe,q=P(),G=c("input"),me=P(),O&&O.c(),D=P(),w&&w.c(),de=P(),le=c("div"),k=c("button"),U.c(),_e=P(),S=c("div"),M.c(),this.h()},l(g){e=d(g,"DIV",{class:!0});var x=f(e);t=d(x,"DIV",{class:!0});var ae=f(t);r=d(ae,"DIV",{class:!0});var be=f(r);a=d(be,"DIV",{class:!0});var Ie=f(a);s=d(Ie,"DIV",{class:!0});var ve=f(s);n=d(ve,"H5",{class:!0});var Pe=f(n);v=V(Pe,h),Pe.forEach(i),I=N(ve),_=d(ve,"P",{class:!0});var Te=f(_);j=V(Te,E),F=V(Te," Boofey."),Te.forEach(i),L=N(ve),b=d(ve,"LORD-ICON",{src:!0,trigger:!0,colors:!0,class:!0,"data-svelte-h":!0}),Ve(b)!=="svelte-n3g4h3"&&(b.innerHTML=ne),ve.forEach(i),K=N(Ie),p=d(Ie,"DIV",{class:!0});var se=f(p);H=d(se,"DIV",{class:!0});var Ne=f(H);m=d(Ne,"P",{});var Ee=f(m);$=V(Ee,y),A=V(Ee," : "),B=d(Ee,"SPAN",{class:!0});var Oe=f(B);ee=V(Oe,u[6]),Oe.forEach(i),Ee.forEach(i),Ne.forEach(i),te=N(se),C=d(se,"FORM",{autocomplete:!0});var je=f(C);z=d(je,"DIV",{class:!0});var Le=f(z);X=d(Le,"DIV",{class:!0});var Ae=f(X);Y=d(Ae,"DIV",{class:!0});var Se=f(Y);Z=d(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),Ve(Z)!=="svelte-1awd8xw"&&(Z.textContent=oe),q=N(Se),G=d(Se,"INPUT",{type:!0,name:!0,class:!0,maxlength:!0,id:!0}),Se.forEach(i),Ae.forEach(i),Le.forEach(i),je.forEach(i),me=N(se),O&&O.l(se),D=N(se),w&&w.l(se),de=N(se),le=d(se,"DIV",{class:!0});var Be=f(le);k=d(Be,"BUTTON",{class:!0,type:!0});var Ce=f(k);U.l(Ce),Ce.forEach(i),Be.forEach(i),se.forEach(i),Ie.forEach(i),be.forEach(i),_e=N(ae),S=d(ae,"DIV",{class:!0});var He=f(S);M.l(He),He.forEach(i),ae.forEach(i),x.forEach(i),this.h()},h(){o(n,"class","text-primary"),o(_,"class","text-muted"),Ke(b.src,re="https://cdn.lordicon.com/rhvddzym.json")||ke(b,"src",re),ke(b,"trigger","loop"),ke(b,"colors","primary:#0ab39c"),ke(b,"class","avatar-xl"),o(s,"class","text-center mt-2"),o(B,"class","text-primary"),o(H,"class","text-muted text-center mb-4 mx-lg-3"),o(Z,"for","digit1-input"),o(Z,"class","visually-hidden"),o(G,"type","number"),o(G,"name","1"),o(G,"class","form-control form-control-lg bg-light border-light text-center p-0 p-0"),o(G,"maxlength","6"),o(G,"id","digit1-input"),o(Y,"class","mb-3"),o(X,"class","col-12"),o(z,"class","row"),o(C,"autocomplete","off"),o(k,"class","btn btn-primary w-100 btn-load"),o(k,"type","submit"),k.disabled=u[2],o(le,"class","mt-3"),o(p,"class","p-2 "),o(a,"class","card-body p-4"),o(r,"class","card mt-4"),o(S,"class","mt-4 text-center"),o(t,"class","col-md-9 col-lg-7 col-xl-6"),o(e,"class","row justify-content-center")},m(g,x){J(g,e,x),l(e,t),l(t,r),l(r,a),l(a,s),l(s,n),l(n,v),l(s,I),l(s,_),l(_,j),l(_,F),l(s,L),l(s,b),l(a,K),l(a,p),l(p,H),l(H,m),l(m,$),l(m,A),l(m,B),l(B,ee),l(p,te),l(p,C),l(C,z),l(z,X),l(X,Y),l(Y,Z),l(Y,q),l(Y,G),u[13](C),l(p,me),O&&O.m(p,null),l(p,D),w&&w.m(p,null),l(p,de),l(p,le),l(le,k),U.m(k,null),l(t,_e),l(t,S),M.m(S,null),W||(ce=[we(G,"input",u[10]),we(C,"submit",qe(u[9]))],W=!0)},p(g,x){var ae,be;x&64&&ye(ee,g[6]),(ae=g[1])!=null&&ae.verification_code?O?O.p(g,x):(O=ze(g),O.c(),O.m(p,D)):O&&(O.d(1),O=null),(be=g[1])!=null&&be["403"]?w?w.p(g,x):(w=Ue(g),w.c(),w.m(p,de)):w&&(w.d(1),w=null),ue===(ue=ie(g))&&U?U.p(g,x):(U.d(1),U=ue(g),U&&(U.c(),U.m(k,null))),x&4&&(k.disabled=g[2]),Q===(Q=he(g))&&M?M.p(g,x):(M.d(1),M=Q(g),M&&(M.c(),M.m(S,null)))},d(g){g&&i(e),u[13](null),O&&O.d(),w&&w.d(),U.d(),M.d(),W=!1,Xe(ce)}}}function at(u){var _e;let e,t,r,a,s,n,h=R.welcomeBack[localStorage.getItem("language")]+"",v,I,_,E=R.signInToContinue[localStorage.getItem("language")]+"",j,F,L,b,ne='<div class="avatar-lg mx-auto"><div class="avatar-title bg-light text-primary display-5 rounded-circle"><i class="ri-bank-card-2-line"></i></div></div>',re,K,p,H,m,y=R.idNumber[localStorage.getItem("language")]+"",$,A,B,ee,te,C,z,X,Y=R.acceptTermsPrivacy[localStorage.getItem("language")]+"",Z,oe,q,G,me,D=((_e=u[1])==null?void 0:_e.identity_number)&&Re(u);function de(S,W){return S[2]?ct:nt}let le=de(u),k=le(u);return{c(){e=c("div"),t=c("div"),r=c("div"),a=c("div"),s=c("div"),n=c("h5"),v=T(h),I=P(),_=c("p"),j=T(E),F=T(" Boofey."),L=P(),b=c("div"),b.innerHTML=ne,re=P(),K=c("div"),p=c("form"),H=c("div"),m=c("label"),$=T(y),A=P(),B=c("input"),ee=P(),D&&D.c(),te=P(),C=c("div"),z=c("p"),X=new Ye(!1),Z=P(),oe=c("div"),q=c("button"),k.c(),this.h()},l(S){e=d(S,"DIV",{class:!0});var W=f(e);t=d(W,"DIV",{class:!0});var ce=f(t);r=d(ce,"DIV",{class:!0});var O=f(r);a=d(O,"DIV",{class:!0});var w=f(a);s=d(w,"DIV",{class:!0});var ie=f(s);n=d(ie,"H5",{class:!0});var ue=f(n);v=V(ue,h),ue.forEach(i),I=N(ie),_=d(ie,"P",{class:!0});var U=f(_);j=V(U,E),F=V(U," Boofey."),U.forEach(i),L=N(ie),b=d(ie,"DIV",{class:!0,"data-svelte-h":!0}),Ve(b)!=="svelte-180fvxm"&&(b.innerHTML=ne),ie.forEach(i),re=N(w),K=d(w,"DIV",{class:!0});var he=f(K);p=d(he,"FORM",{});var Q=f(p);H=d(Q,"DIV",{class:!0});var M=f(H);m=d(M,"LABEL",{class:!0});var pe=f(m);$=V(pe,y),pe.forEach(i),A=N(M),B=d(M,"INPUT",{type:!0,class:!0,name:!0,id:!0,placeholder:!0}),M.forEach(i),ee=N(Q),D&&D.l(Q),te=N(Q),C=d(Q,"DIV",{class:!0});var ge=f(C);z=d(ge,"P",{class:!0});var g=f(z);X=Ze(g,!1),g.forEach(i),ge.forEach(i),Z=N(Q),oe=d(Q,"DIV",{class:!0});var x=f(oe);q=d(x,"BUTTON",{class:!0,type:!0});var ae=f(q);k.l(ae),ae.forEach(i),x.forEach(i),Q.forEach(i),he.forEach(i),w.forEach(i),O.forEach(i),ce.forEach(i),W.forEach(i),this.h()},h(){o(n,"class","text-primary"),o(_,"class","text-muted"),o(b,"class","mb-4"),o(s,"class","text-center mt-2"),o(m,"class","form-label"),o(B,"type","text"),o(B,"class","form-control"),o(B,"name","identity_number"),o(B,"id","cleave-phone"),o(B,"placeholder",R.enterIdNumber[localStorage.getItem("language")]),o(H,"class","mb-4"),X.a=null,o(z,"class","mb-0 fs-13 text-muted fst-italic"),o(C,"class","mb-4"),o(q,"class","btn btn-primary w-100 btn-load"),o(q,"type","submit"),q.disabled=u[2],o(oe,"class","text-center mt-4"),o(K,"class","p-2"),o(a,"class","card-body p-4"),o(r,"class","card mt-4"),o(t,"class","col-md-9 col-lg-7 col-xl-6"),o(e,"class","row justify-content-center")},m(S,W){J(S,e,W),l(e,t),l(t,r),l(r,a),l(a,s),l(s,n),l(n,v),l(s,I),l(s,_),l(_,j),l(_,F),l(s,L),l(s,b),l(a,re),l(a,K),l(K,p),l(p,H),l(H,m),l(m,$),l(H,A),l(H,B),l(p,ee),D&&D.m(p,null),l(p,te),l(p,C),l(C,z),X.m(Y,z),l(p,Z),l(p,oe),l(oe,q),k.m(q,null),u[12](p),G||(me=we(p,"submit",qe(u[7])),G=!0)},p(S,W){var ce;(ce=S[1])!=null&&ce.identity_number?D?D.p(S,W):(D=Re(S),D.c(),D.m(p,te)):D&&(D.d(1),D=null),le===(le=de(S))&&k?k.p(S,W):(k.d(1),k=le(S),k&&(k.c(),k.m(q,null))),W&4&&(q.disabled=S[2])},d(S){S&&i(e),D&&D.d(),k.d(),u[12](null),G=!1,me()}}}function ze(u){var s;let e,t,r=((s=u[1])==null?void 0:s.verification_code[0])+"",a;return{c(){e=c("div"),t=c("p"),a=T(r),this.h()},l(n){e=d(n,"DIV",{class:!0});var h=f(e);t=d(h,"P",{class:!0});var v=f(t);a=V(v,r),v.forEach(i),h.forEach(i),this.h()},h(){o(t,"class","mb-0 text-danger"),o(e,"class","my-1 text-center")},m(n,h){J(n,e,h),l(e,t),l(t,a)},p(n,h){var v;h&2&&r!==(r=((v=n[1])==null?void 0:v.verification_code[0])+"")&&ye(a,r)},d(n){n&&i(e)}}}function Ue(u){var s;let e,t,r=((s=u[1])==null?void 0:s["403"])+"",a;return{c(){e=c("div"),t=c("p"),a=T(r),this.h()},l(n){e=d(n,"DIV",{class:!0});var h=f(e);t=d(h,"P",{class:!0});var v=f(t);a=V(v,r),v.forEach(i),h.forEach(i),this.h()},h(){o(t,"class","mb-0 text-danger"),o(e,"class","my-1 text-center")},m(n,h){J(n,e,h),l(e,t),l(t,a)},p(n,h){var v;h&2&&r!==(r=((v=n[1])==null?void 0:v["403"])+"")&&ye(a,r)},d(n){n&&i(e)}}}function st(u){let e=R.confirm[localStorage.getItem("language")]+"",t;return{c(){t=T(e)},l(r){t=V(r,e)},m(r,a){J(r,t,a)},p:fe,d(r){r&&i(t)}}}function rt(u){let e;return{c(){e=c("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0,role:!0}),f(e).forEach(i),this.h()},h(){o(e,"class","spinner-border "),o(e,"role","status")},m(t,r){J(t,e,r)},p:fe,d(t){t&&i(e)}}}function ot(u){let e,t=R.youNeedToWait[localStorage.getItem("language")]+"",r,a,s,n,h,v=R.inOrderToResend[localStorage.getItem("language")]+"",I;return{c(){e=c("p"),r=T(t),a=P(),s=c("span"),n=T(u[5]),h=P(),I=T(v),this.h()},l(_){e=d(_,"P",{class:!0});var E=f(e);r=V(E,t),a=N(E),s=d(E,"SPAN",{});var j=f(s);n=V(j,u[5]),j.forEach(i),h=N(E),I=V(E,v),E.forEach(i),this.h()},h(){o(e,"class","mb-0")},m(_,E){J(_,e,E),l(e,r),l(e,a),l(e,s),l(s,n),l(e,h),l(e,I)},p(_,E){E&32&&ye(n,_[5])},d(_){_&&i(e)}}}function it(u){let e,t=R.didntReceiveCode[localStorage.getItem("language")]+"",r,a,s=R["?"][localStorage.getItem("language")]+"",n,h,v,I=R.resend[localStorage.getItem("language")]+"",_,E,j;return{c(){e=c("p"),r=T(t),a=P(),n=T(s),h=P(),v=c("a"),_=T(I),this.h()},l(F){e=d(F,"P",{class:!0});var L=f(e);r=V(L,t),a=N(L),n=V(L,s),h=N(L),v=d(L,"A",{href:!0,class:!0});var b=f(v);_=V(b,I),b.forEach(i),L.forEach(i),this.h()},h(){o(v,"href","javascript:void(0);"),o(v,"class","fw-semibold text-primary text-decoration-underline"),o(e,"class","mb-0")},m(F,L){J(F,e,L),l(e,r),l(e,a),l(e,n),l(e,h),l(e,v),l(v,_),E||(j=we(v,"click",u[8]),E=!0)},p:fe,d(F){F&&i(e),E=!1,j()}}}function Re(u){let e,t=u[1].identity_number[0]+"",r;return{c(){e=c("strong"),r=T(t),this.h()},l(a){e=d(a,"STRONG",{class:!0});var s=f(e);r=V(s,t),s.forEach(i),this.h()},h(){o(e,"class","text-danger ms-1 my-2")},m(a,s){J(a,e,s),l(e,r)},p(a,s){s&2&&t!==(t=a[1].identity_number[0]+"")&&ye(r,t)},d(a){a&&i(e)}}}function nt(u){let e=R.submit[localStorage.getItem("language")]+"",t;return{c(){t=T(e)},l(r){t=V(r,e)},m(r,a){J(r,t,a)},p:fe,d(r){r&&i(t)}}}function ct(u){let e;return{c(){e=c("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0,role:!0}),f(e).forEach(i),this.h()},h(){o(e,"class","spinner-border "),o(e,"role","status")},m(t,r){J(t,e,r)},p:fe,d(t){t&&i(e)}}}function dt(u){let e;function t(s,n){if(s[3]=="id")return at;if(s[3]=="verification")return lt}let r=t(u),a=r&&r(u);return{c(){a&&a.c(),e=Me()},l(s){a&&a.l(s),e=Me()},m(s,n){a&&a.m(s,n),J(s,e,n)},p(s,[n]){r===(r=t(s))&&a?a.p(s,n):(a&&a.d(1),a=r&&r(s),a&&(a.c(),a.m(e.parentNode,e)))},i:fe,o:fe,d(s){s&&i(e),a&&a.d(s)}}}function ut(u,e,t){let{data:r}=e,a,s,n=!1,h="id",v,I,_=!0,E="01:00",j=58,F;async function L(){t(2,n=!0),t(1,s={});let m=new FormData(a);v=m.get("identity_number"),m.set("lang",localStorage.getItem("language"));let y=await fetch(Fe(),{method:"POST",body:m});y=await y.json(),y.status=="success"?(I=y.data.phone,t(6,F="x".repeat(I.length-3)+I.slice(-3)),t(3,h="verification")):t(1,s=y.errors),t(2,n=!1)}async function b(){t(1,s={});let m=new FormData;m.set("identity_number",v);let y=await fetch(Fe(),{method:"POST",body:m});y=await y.json(),y.status=="success"&&(I=y.data.phone),t(4,_=!1),re()}async function ne(){var B,ee,te,C;if(n)return;t(2,n=!0),t(1,s={});let m=new FormData(a),y=[];for(const z of m.entries()){const[X,Y]=z;y.push(Y)}m=new FormData,m.set("verification_code",y.join("")),m.set("phone",I),m.set("lang",localStorage.getItem("language"));let $=await fetch(We(),{method:"POST",body:m}),A=await $.json();A.status=="success"?(localStorage.setItem("SID",`Bearer ${A.data.token}`),((ee=(B=A==null?void 0:A.data)==null?void 0:B.user)==null?void 0:ee.verified)==!1&&De("/verification"),((C=(te=A==null?void 0:A.data)==null?void 0:te.roles[0])==null?void 0:C.name)!="parent"?window.location.href=`${window.location.origin}/admin`:window.location.href=`${window.location.origin}/students`):$.status==422?t(1,s=A.errors):message=A.message,t(2,n=!1)}function re(){const m=j%60;t(5,E=`00:${m<10?"0":""}${m}`),j===0?(t(4,_=!0),j=59):(j--,setTimeout(re,1e3))}function K(m){let y=m.target;y.value=y.value.slice(0,y.maxLength),(""+y.value).length>=6&&ne()}function p(m){xe[m?"unshift":"push"](()=>{a=m,t(0,a)})}function H(m){xe[m?"unshift":"push"](()=>{a=m,t(0,a)})}return u.$$set=m=>{"data"in m&&t(11,r=m.data)},[a,s,n,h,_,E,F,L,b,ne,K,r,p,H]}class yt extends Je{constructor(e){super(),$e(this,e,ut,dt,Qe,{data:11})}}export{yt as component,bt as universal};
