import{G as Ne,D as Oe}from"../chunks/paths.0e30d36d.js";import{a as ze}from"../chunks/auth.660986fb.js";import{s as me,f as p,a as y,l as J,g as _,h as I,z as W,c as w,m as F,d,E as le,j as h,i as $,C as u,n as U,A as re,T as qe,y as xe,e as Le,J as Be,D as Je,H as Fe,o as Qe,R as Ye,p as Ke}from"../chunks/scheduler.726ac76d.js";import{S as ge,i as be,a as G,g as Re,t as Q,c as Ge,b as he,d as pe,m as _e,e as ve,f as Ue}from"../chunks/index.8a5ed380.js";import{g as We,a as Xe}from"../chunks/spread.8a54911c.js";import{P as Ze}from"../chunks/Pagination.94643daa.js";import{S as et}from"../chunks/SearchTable.d9fb7dc1.js";import{e as Me}from"../chunks/each.381f634d.js";import"../chunks/paths.b98f38ef.js";import{w as tt}from"../chunks/singletons.08415598.js";import{n as st}from"../chunks/stores.b420ea9f.js";import{f as it}from"../chunks/index.955fed47.js";import{i as lt}from"../chunks/initToolTip.b2308c6a.js";const rt=!1;async function nt({fetch:l,url:e,depends:s}){s("invoices:refresh");let t=await l(Ne(Oe(e)),{headers:{Authorization:`${localStorage.getItem("SID")}`}});return ze(t),{invoicesResponse:await t.json(),tabTitle:"Invoices"}}const Rt=Object.freeze(Object.defineProperty({__proto__:null,load:nt,ssr:rt},Symbol.toStringTag,{value:"Module"}));function at(l){let e=l[0].ref+"",s;return{c(){s=J(e)},l(t){s=F(t,e)},m(t,i){$(t,s,i)},p(t,i){i&1&&e!==(e=t[0].ref+"")&&U(s,e)},d(t){t&&d(s)}}}function ot(l){let e,s="not found";return{c(){e=p("span"),e.textContent=s,this.h()},l(t){e=_(t,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-pp1ynj"&&(e.textContent=s),this.h()},h(){h(e,"class","badge bg-danger-subtle text-danger")},m(t,i){$(t,e,i)},p:re,d(t){t&&d(e)}}}function ct(l){let e=l[0].subscription.ref+"",s;return{c(){s=J(e)},l(t){s=F(t,e)},m(t,i){$(t,s,i)},p(t,i){i&1&&e!==(e=t[0].subscription.ref+"")&&U(s,e)},d(t){t&&d(s)}}}function ft(l){let e,s="not found";return{c(){e=p("span"),e.textContent=s,this.h()},l(t){e=_(t,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-pp1ynj"&&(e.textContent=s),this.h()},h(){h(e,"class","badge bg-danger-subtle text-danger")},m(t,i){$(t,e,i)},p:re,d(t){t&&d(e)}}}function ut(l){let e,s,t,i,c,r,f=l[0].subscription.package.school.name+"",a,v,o=l[0].subscription.package.name+"",n;return{c(){e=p("div"),s=p("div"),t=p("img"),c=y(),r=p("div"),a=J(f),v=J(" - "),n=J(o),this.h()},l(m){e=_(m,"DIV",{class:!0});var b=I(e);s=_(b,"DIV",{class:!0});var E=I(s);t=_(E,"IMG",{src:!0,alt:!0,class:!0}),E.forEach(d),c=w(b),r=_(b,"DIV",{class:!0});var V=I(r);a=F(V,f),v=F(V," - "),n=F(V,o),V.forEach(d),b.forEach(d),this.h()},h(){le(t.src,i=l[0].subscription.package.school.logo.full_path)||h(t,"src",i),h(t,"alt",""),h(t,"class","avatar-xs rounded-circle"),h(s,"class","flex-shrink-0"),h(r,"class","flex-grow-1"),h(e,"class","d-flex gap-2 align-items-center")},m(m,b){$(m,e,b),u(e,s),u(s,t),u(e,c),u(e,r),u(r,a),u(r,v),u(r,n)},p(m,b){b&1&&!le(t.src,i=m[0].subscription.package.school.logo.full_path)&&h(t,"src",i),b&1&&f!==(f=m[0].subscription.package.school.name+"")&&U(a,f),b&1&&o!==(o=m[0].subscription.package.name+"")&&U(n,o)},d(m){m&&d(e)}}}function dt(l){let e,s="not found";return{c(){e=p("span"),e.textContent=s,this.h()},l(t){e=_(t,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-pp1ynj"&&(e.textContent=s),this.h()},h(){h(e,"class","badge bg-danger-subtle text-danger")},m(t,i){$(t,e,i)},p:re,d(t){t&&d(e)}}}function ht(l){let e,s,t,i,c,r,f=l[0].subscription.student.fullname+"",a;return{c(){e=p("div"),s=p("div"),t=p("img"),c=y(),r=p("div"),a=J(f),this.h()},l(v){e=_(v,"DIV",{class:!0});var o=I(e);s=_(o,"DIV",{class:!0});var n=I(s);t=_(n,"IMG",{src:!0,alt:!0,class:!0}),n.forEach(d),c=w(o),r=_(o,"DIV",{class:!0});var m=I(r);a=F(m,f),m.forEach(d),o.forEach(d),this.h()},h(){le(t.src,i=l[0].subscription.student.image.full_path)||h(t,"src",i),h(t,"alt",""),h(t,"class","avatar-xs rounded-circle"),h(s,"class","flex-shrink-0"),h(r,"class","flex-grow-1"),h(e,"class","d-flex gap-2 align-items-center")},m(v,o){$(v,e,o),u(e,s),u(s,t),u(e,c),u(e,r),u(r,a)},p(v,o){o&1&&!le(t.src,i=v[0].subscription.student.image.full_path)&&h(t,"src",i),o&1&&f!==(f=v[0].subscription.student.fullname+"")&&U(a,f)},d(v){v&&d(e)}}}function pt(l){let e,s="not found";return{c(){e=p("span"),e.textContent=s,this.h()},l(t){e=_(t,"SPAN",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-pp1ynj"&&(e.textContent=s),this.h()},h(){h(e,"class","badge bg-danger-subtle text-danger")},m(t,i){$(t,e,i)},p:re,d(t){t&&d(e)}}}function _t(l){let e,s,t;return{c(){e=p("a"),s=p("i"),this.h()},l(i){e=_(i,"A",{href:!0,target:!0,class:!0,"data-bs-toggle":!0,"data-bs-original-title":!0});var c=I(e);s=_(c,"I",{class:!0}),I(s).forEach(d),c.forEach(d),this.h()},h(){h(s,"class","ri-printer-line"),h(e,"href",t="/admin/invoices/"+l[0].id),h(e,"target","_blank"),h(e,"class","fs-15"),h(e,"data-bs-toggle","tooltip"),h(e,"data-bs-original-title","Print")},m(i,c){$(i,e,c),u(e,s)},p(i,c){c&1&&t!==(t="/admin/invoices/"+i[0].id)&&h(e,"href",t)},d(i){i&&d(e)}}}function vt(l){let e,s,t='<div class="form-check"><input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option1"/></div>',i,c,r=l[0].id+"",f,a,v,o,n,m,b,E=l[0].generated_at+"",V,ee,N,te,Y,P,O,L,X,D,T,j=l[0].father.user.profile.fullname+"",M,se,z,ie,K,q,ne=JSON.parse(sessionStorage.getItem("permissions")).includes("invoices.show");function ae(k,g){var C;return((C=k[0])==null?void 0:C.ref)==null?ot:at}let Z=ae(l),S=Z(l);function oe(k,g){var C,R;return((R=(C=k[0])==null?void 0:C.subscription)==null?void 0:R.ref)==null?ft:ct}let ce=oe(l),A=ce(l);function ke(k,g){var C,R;return((R=(C=k[0])==null?void 0:C.subscription)==null?void 0:R.ref)==null?dt:ut}let fe=ke(l),H=fe(l);function Ie(k,g){var C,R;return((R=(C=k[0])==null?void 0:C.subscription)==null?void 0:R.ref)==null?pt:ht}let ue=Ie(l),x=ue(l),B=ne&&_t(l);return{c(){e=p("tr"),s=p("td"),s.innerHTML=t,i=y(),c=p("td"),f=J(r),a=y(),v=p("td"),S.c(),o=y(),n=p("td"),A.c(),m=y(),b=p("td"),V=J(E),ee=y(),N=p("td"),H.c(),te=y(),Y=p("td"),P=p("div"),O=p("div"),L=p("img"),D=y(),T=p("div"),M=J(j),se=y(),z=p("td"),x.c(),ie=y(),K=p("td"),q=p("div"),B&&B.c(),this.h()},l(k){e=_(k,"TR",{scope:!0});var g=I(e);s=_(g,"TD",{"data-svelte-h":!0}),W(s)!=="svelte-1wqjv4e"&&(s.innerHTML=t),i=w(g),c=_(g,"TD",{});var C=I(c);f=F(C,r),C.forEach(d),a=w(g),v=_(g,"TD",{});var R=I(v);S.l(R),R.forEach(d),o=w(g),n=_(g,"TD",{});var De=I(n);A.l(De),De.forEach(d),m=w(g),b=_(g,"TD",{});var Ee=I(b);V=F(Ee,E),Ee.forEach(d),ee=w(g),N=_(g,"TD",{});var Te=I(N);H.l(Te),Te.forEach(d),te=w(g),Y=_(g,"TD",{});var $e=I(Y);P=_($e,"DIV",{class:!0});var de=I(P);O=_(de,"DIV",{class:!0});var ye=I(O);L=_(ye,"IMG",{src:!0,alt:!0,class:!0}),ye.forEach(d),D=w(de),T=_(de,"DIV",{class:!0});var we=I(T);M=F(we,j),we.forEach(d),de.forEach(d),$e.forEach(d),se=w(g),z=_(g,"TD",{});var Se=I(z);x.l(Se),Se.forEach(d),ie=w(g),K=_(g,"TD",{});var Ce=I(K);q=_(Ce,"DIV",{class:!0});var Ve=I(q);B&&B.l(Ve),Ve.forEach(d),Ce.forEach(d),g.forEach(d),this.h()},h(){le(L.src,X=l[0].father.user.profile.image.full_path)||h(L,"src",X),h(L,"alt",""),h(L,"class","avatar-xs rounded-circle"),h(O,"class","flex-shrink-0"),h(T,"class","flex-grow-1"),h(P,"class","d-flex gap-2 align-items-center"),h(q,"class","hstack gap-3"),h(e,"scope","row")},m(k,g){$(k,e,g),u(e,s),u(e,i),u(e,c),u(c,f),u(e,a),u(e,v),S.m(v,null),u(e,o),u(e,n),A.m(n,null),u(e,m),u(e,b),u(b,V),u(e,ee),u(e,N),H.m(N,null),u(e,te),u(e,Y),u(Y,P),u(P,O),u(O,L),u(P,D),u(P,T),u(T,M),u(e,se),u(e,z),x.m(z,null),u(e,ie),u(e,K),u(K,q),B&&B.m(q,null)},p(k,[g]){g&1&&r!==(r=k[0].id+"")&&U(f,r),Z===(Z=ae(k))&&S?S.p(k,g):(S.d(1),S=Z(k),S&&(S.c(),S.m(v,null))),ce===(ce=oe(k))&&A?A.p(k,g):(A.d(1),A=ce(k),A&&(A.c(),A.m(n,null))),g&1&&E!==(E=k[0].generated_at+"")&&U(V,E),fe===(fe=ke(k))&&H?H.p(k,g):(H.d(1),H=fe(k),H&&(H.c(),H.m(N,null))),g&1&&!le(L.src,X=k[0].father.user.profile.image.full_path)&&h(L,"src",X),g&1&&j!==(j=k[0].father.user.profile.fullname+"")&&U(M,j),ue===(ue=Ie(k))&&x?x.p(k,g):(x.d(1),x=ue(k),x&&(x.c(),x.m(z,null))),ne&&B.p(k,g)},i:re,o:re,d(k){k&&d(e),S.d(),A.d(),H.d(),x.d(),B&&B.d()}}}function mt(l,e,s){let{invoice:t}=e,{invoiceStore:i}=qe("invoiceStore");return xe(l,i,c=>s(2,c)),l.$$set=c=>{"invoice"in c&&s(0,t=c.invoice)},[t,i]}class gt extends ge{constructor(e){super(),be(this,e,mt,vt,me,{invoice:0})}}function Pe(l,e,s){const t=l.slice();return t[2]=e[s],t}function je(l){let e,s,t=Me(l[0]),i=[];for(let r=0;r<t.length;r+=1)i[r]=Ae(Pe(l,t,r));const c=r=>Q(i[r],1,1,()=>{i[r]=null});return{c(){e=p("tbody");for(let r=0;r<i.length;r+=1)i[r].c();this.h()},l(r){e=_(r,"TBODY",{class:!0});var f=I(e);for(let a=0;a<i.length;a+=1)i[a].l(f);f.forEach(d),this.h()},h(){h(e,"class","list")},m(r,f){$(r,e,f);for(let a=0;a<i.length;a+=1)i[a]&&i[a].m(e,null);s=!0},p(r,f){if(f&1){t=Me(r[0]);let a;for(a=0;a<t.length;a+=1){const v=Pe(r,t,a);i[a]?(i[a].p(v,f),G(i[a],1)):(i[a]=Ae(v),i[a].c(),G(i[a],1),i[a].m(e,null))}for(Re(),a=t.length;a<i.length;a+=1)c(a);Ge()}},i(r){if(!s){for(let f=0;f<t.length;f+=1)G(i[f]);s=!0}},o(r){i=i.filter(Boolean);for(let f=0;f<i.length;f+=1)Q(i[f]);s=!1},d(r){r&&d(e),Je(i,r)}}}function Ae(l){let e,s;return e=new gt({props:{invoice:l[2]}}),{c(){he(e.$$.fragment)},l(t){pe(e.$$.fragment,t)},m(t,i){_e(e,t,i),s=!0},p(t,i){const c={};i&1&&(c.invoice=t[2]),e.$set(c)},i(t){s||(G(e.$$.fragment,t),s=!0)},o(t){Q(e.$$.fragment,t),s=!1},d(t){ve(e,t)}}}function He(l){let e,s='<lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon>';return{c(){e=p("div"),e.innerHTML=s,this.h()},l(t){e=_(t,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-2svhwp"&&(e.innerHTML=s),this.h()},h(){h(e,"class","text-center")},m(t,i){$(t,e,i)},d(t){t&&d(e)}}}function bt(l){var m,b,E,V,ee,N,te,Y,P,O,L,X;let e,s,t,i,c='<tr><th scope="col" style="width: 25px;"><div class="form-check"><input class="form-check-input" type="checkbox" id="checkAll" value="option1"/></div></th> <th scope="col">ID</th> <th scope="col">Invoice Reference</th> <th scope="col">Subscription Reference</th> <th scope="col">Generated at</th> <th scope="col">Package</th> <th scope="col">Father</th> <th scope="col">Student</th> <th scope="col">Action</th></tr>',r,f,a,v,o=(l[1]==null||((E=(b=(m=l[1])==null?void 0:m.from)==null?void 0:b.route)==null?void 0:E.id)!=((N=(ee=(V=l[1])==null?void 0:V.to)==null?void 0:ee.route)==null?void 0:N.id))&&je(l),n=((P=(Y=(te=l[1])==null?void 0:te.from)==null?void 0:Y.route)==null?void 0:P.id)==((X=(L=(O=l[1])==null?void 0:O.to)==null?void 0:L.route)==null?void 0:X.id)&&l[1]&&He();return{c(){e=p("div"),s=p("div"),t=p("table"),i=p("thead"),i.innerHTML=c,r=y(),o&&o.c(),f=y(),n&&n.c(),a=Le(),this.h()},l(D){e=_(D,"DIV",{class:!0});var T=I(e);s=_(T,"DIV",{class:!0});var j=I(s);t=_(j,"TABLE",{class:!0});var M=I(t);i=_(M,"THEAD",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-1saike4"&&(i.innerHTML=c),r=w(M),o&&o.l(M),M.forEach(d),j.forEach(d),T.forEach(d),f=w(D),n&&n.l(D),a=Le(),this.h()},h(){h(i,"class","table-light"),h(t,"class","table align-middle table-nowrap mb-0 border-top"),h(s,"class","table-responsive"),h(e,"class","row pe-0")},m(D,T){$(D,e,T),u(e,s),u(s,t),u(t,i),u(t,r),o&&o.m(t,null),$(D,f,T),n&&n.m(D,T),$(D,a,T),v=!0},p(D,[T]){var j,M,se,z,ie,K,q,ne,ae,Z,S,oe;D[1]==null||((se=(M=(j=D[1])==null?void 0:j.from)==null?void 0:M.route)==null?void 0:se.id)!=((K=(ie=(z=D[1])==null?void 0:z.to)==null?void 0:ie.route)==null?void 0:K.id)?o?(o.p(D,T),T&2&&G(o,1)):(o=je(D),o.c(),G(o,1),o.m(t,null)):o&&(Re(),Q(o,1,1,()=>{o=null}),Ge()),((ae=(ne=(q=D[1])==null?void 0:q.from)==null?void 0:ne.route)==null?void 0:ae.id)==((oe=(S=(Z=D[1])==null?void 0:Z.to)==null?void 0:S.route)==null?void 0:oe.id)&&D[1]?n||(n=He(),n.c(),n.m(a.parentNode,a)):n&&(n.d(1),n=null)},i(D){v||(G(o),v=!0)},o(D){Q(o),v=!1},d(D){D&&(d(e),d(f),d(a)),o&&o.d(),n&&n.d(D)}}}function kt(l,e,s){let t;xe(l,st,c=>s(1,t=c));let{invoicesList:i}=e;return Be("invoiceStore",{invoiceStore:tt({})}),l.$$set=c=>{"invoicesList"in c&&s(0,i=c.invoicesList)},[i,t]}class It extends ge{constructor(e){super(),be(this,e,kt,bt,me,{invoicesList:0})}}function Dt(l){let e,s,t,i,c,r,f,a;t=new et({props:{type:"Invoice"}}),c=new It({props:{invoicesList:l[2]}});const v=[l[1]];let o={};for(let n=0;n<v.length;n+=1)o=Ye(o,v[n]);return f=new Ze({props:o}),{c(){e=p("div"),s=p("div"),he(t.$$.fragment),i=y(),he(c.$$.fragment),r=y(),he(f.$$.fragment),this.h()},l(n){e=_(n,"DIV",{class:!0});var m=I(e);s=_(m,"DIV",{class:!0});var b=I(s);pe(t.$$.fragment,b),i=w(b),pe(c.$$.fragment,b),r=w(b),pe(f.$$.fragment,b),b.forEach(d),m.forEach(d),this.h()},h(){h(s,"class","row"),h(e,"class","card-body")},m(n,m){$(n,e,m),u(e,s),_e(t,s,null),u(s,i),_e(c,s,null),u(s,r),_e(f,s,null),a=!0},p(n,m){const b={};m&4&&(b.invoicesList=n[2]),c.$set(b);const E=m&2?We(v,[Xe(n[1])]):{};f.$set(E)},i(n){a||(G(t.$$.fragment,n),G(c.$$.fragment,n),G(f.$$.fragment,n),a=!0)},o(n){Q(t.$$.fragment,n),Q(c.$$.fragment,n),Q(f.$$.fragment,n),a=!1},d(n){n&&d(e),ve(t),ve(c),ve(f)}}}function Et(l){let e,s,t,i,c='<h4 class="card-title mb-0 flex-grow-1">Invoices Managment</h4> <div class="flex-shrink-0"></div>',r,f=JSON.parse(sessionStorage.getItem("permissions")).includes("invoices.index"),a,v,o=f&&Dt(l);return{c(){e=p("div"),s=p("div"),t=p("div"),i=p("div"),i.innerHTML=c,r=y(),o&&o.c(),this.h()},l(n){e=_(n,"DIV",{class:!0});var m=I(e);s=_(m,"DIV",{class:!0});var b=I(s);t=_(b,"DIV",{class:!0});var E=I(t);i=_(E,"DIV",{class:!0,"data-svelte-h":!0}),W(i)!=="svelte-19bpzv3"&&(i.innerHTML=c),r=w(E),o&&o.l(E),E.forEach(d),b.forEach(d),m.forEach(d),this.h()},h(){h(i,"class","card-header align-items-center d-flex"),h(t,"class","card"),h(s,"class","col-lg-12"),h(e,"class","row")},m(n,m){$(n,e,m),u(e,s),u(s,t),u(t,i),u(t,r),o&&o.m(t,null),l[4](e),v=!0},p(n,[m]){f&&o.p(n,m)},i(n){v||(G(o),n&&(a||Fe(()=>{a=Ue(e,it,{duration:200}),a.start()})),v=!0)},o(n){Q(o),v=!1},d(n){n&&d(e),o&&o.d(),l[4](null)}}}function Tt(l,e,s){let t,i,{data:c}=e,r;Qe(()=>{lt(r)});function f(a){Ke[a?"unshift":"push"](()=>{r=a,s(0,r)})}return l.$$set=a=>{"data"in a&&s(3,c=a.data)},l.$$.update=()=>{l.$$.dirty&8&&s(2,t=c.invoicesResponse.data.invoices),l.$$.dirty&8&&s(1,i=c.invoicesResponse.pagination)},[r,i,t,c,f]}class Gt extends ge{constructor(e){super(),be(this,e,Tt,Et,me,{data:3})}}export{Gt as component,Rt as universal};
