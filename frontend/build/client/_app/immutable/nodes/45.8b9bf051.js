import{K as Z,D as ee}from"../chunks/paths.29c5142d.js";import{a as ae}from"../chunks/auth.82ff8344.js";import{s as te,f as h,a as y,l as J,g as v,h as P,d as f,c as D,m as K,E as Y,j as c,i as H,C as d,n as se,H as re,o as ie,z as ne,R as le,p as oe}from"../chunks/scheduler.726ac76d.js";import{S as ce,i as de,a as E,t as T,b as A,d as L,m as O,e as x,f as fe}from"../chunks/index.8a5ed380.js";import{g as ge,a as pe}from"../chunks/spread.8a54911c.js";import{P as me}from"../chunks/Pagination.0a529dad.js";import{S as ue}from"../chunks/SearchTable.1c079677.js";import{A as _e,P as he}from"../chunks/PackagesTable.0b4440e8.js";import{i as ve}from"../chunks/initToolTip.b2308c6a.js";import{f as ke}from"../chunks/index.955fed47.js";const be=!1;async function $e({fetch:o,url:e,depends:s,params:n}){s("packages:refresh");let i=await o(Z(n.schoolId,ee(e)),{headers:{Authorization:`${localStorage.getItem("SID")}`}});return ae(i),{packagesResponse:await i.json(),tabTitle:"Packages"}}const Oe=Object.freeze(Object.defineProperty({__proto__:null,load:$e,ssr:be},Symbol.toStringTag,{value:"Module"}));function Pe(o){let e,s='<i class="ri-add-line align-bottom me-1"></i>Add Package',n,i,l;return i=new _e({props:{schoolId:o[2].id}}),{c(){e=h("button"),e.innerHTML=s,n=y(),A(i.$$.fragment),this.h()},l(a){e=v(a,"BUTTON",{type:!0,"data-bs-toggle":!0,"data-bs-target":!0,class:!0,"data-svelte-h":!0}),ne(e)!=="svelte-v29cmp"&&(e.innerHTML=s),n=D(a),L(i.$$.fragment,a),this.h()},h(){c(e,"type","button"),c(e,"data-bs-toggle","modal"),c(e,"data-bs-target","#addPackageModal"),c(e,"class","btn btn-primary waves-effect waves-light")},m(a,t){H(a,e,t),H(a,n,t),O(i,a,t),l=!0},p(a,t){const g={};t&4&&(g.schoolId=a[2].id),i.$set(g)},i(a){l||(E(i.$$.fragment,a),l=!0)},o(a){T(i.$$.fragment,a),l=!1},d(a){a&&(f(e),f(n)),x(i,a)}}}function Ie(o){let e,s,n,i,l,a,t,g;n=new ue({props:{type:"Package"}}),l=new he({props:{packagesList:o[3]}});const m=[o[1]];let k={};for(let r=0;r<m.length;r+=1)k=le(k,m[r]);return t=new me({props:k}),{c(){e=h("div"),s=h("div"),A(n.$$.fragment),i=y(),A(l.$$.fragment),a=y(),A(t.$$.fragment),this.h()},l(r){e=v(r,"DIV",{class:!0});var u=P(e);s=v(u,"DIV",{class:!0});var p=P(s);L(n.$$.fragment,p),i=D(p),L(l.$$.fragment,p),a=D(p),L(t.$$.fragment,p),p.forEach(f),u.forEach(f),this.h()},h(){c(s,"class","row"),c(e,"class","card-body")},m(r,u){H(r,e,u),d(e,s),O(n,s,null),d(s,i),O(l,s,null),d(s,a),O(t,s,null),g=!0},p(r,u){const p={};u&8&&(p.packagesList=r[3]),l.$set(p);const M=u&2?ge(m,[pe(r[1])]):{};t.$set(M)},i(r){g||(E(n.$$.fragment,r),E(l.$$.fragment,r),E(t.$$.fragment,r),g=!0)},o(r){T(n.$$.fragment,r),T(l.$$.fragment,r),T(t.$$.fragment,r),g=!1},d(r){r&&f(e),x(n),x(l),x(t)}}}function Se(o){let e,s,n,i,l,a,t,g,m,k,r,u=o[2].name+"",p,M,N,z,S,Q=JSON.parse(sessionStorage.getItem("permissions")).includes("packages.storeBySchool"),B,U=JSON.parse(sessionStorage.getItem("permissions")).includes("packages.indexBySchool"),C,w,b=Q&&Pe(o),$=U&&Ie(o);return{c(){e=h("div"),s=h("div"),n=h("div"),i=h("div"),l=h("div"),a=h("div"),t=h("img"),m=y(),k=h("h4"),r=h("span"),p=J(u),M=J("'s"),N=J(" Packages Management"),z=y(),S=h("div"),b&&b.c(),B=y(),$&&$.c(),this.h()},l(_){e=v(_,"DIV",{class:!0});var I=P(e);s=v(I,"DIV",{class:!0});var F=P(s);n=v(F,"DIV",{class:!0});var V=P(n);i=v(V,"DIV",{class:!0});var R=P(i);l=v(R,"DIV",{class:!0});var j=P(l);a=v(j,"DIV",{class:!0});var W=P(a);t=v(W,"IMG",{src:!0,alt:!0,class:!0}),W.forEach(f),m=D(j),k=v(j,"H4",{class:!0});var G=P(k);r=v(G,"SPAN",{class:!0});var q=P(r);p=K(q,u),M=K(q,"'s"),q.forEach(f),N=K(G," Packages Management"),G.forEach(f),j.forEach(f),z=D(R),S=v(R,"DIV",{class:!0});var X=P(S);b&&b.l(X),X.forEach(f),R.forEach(f),B=D(V),$&&$.l(V),V.forEach(f),F.forEach(f),I.forEach(f),this.h()},h(){Y(t.src,g=o[2].logo.full_path)||c(t,"src",g),c(t,"alt",""),c(t,"class","avatar-xs rounded-circle"),c(a,"class","flex-shrink-0"),c(r,"class","text-primary"),c(k,"class","card-title mb-0 flex-grow-1"),c(l,"class","d-flex gap-2 align-items-center flex-grow-1"),c(S,"class","flex-shrink-0"),c(i,"class","card-header align-items-center d-flex"),c(n,"class","card"),c(s,"class","col-lg-12"),c(e,"class","row")},m(_,I){H(_,e,I),d(e,s),d(s,n),d(n,i),d(i,l),d(l,a),d(a,t),d(l,m),d(l,k),d(k,r),d(r,p),d(r,M),d(k,N),d(i,z),d(i,S),b&&b.m(S,null),d(n,B),$&&$.m(n,null),o[5](e),w=!0},p(_,[I]){(!w||I&4&&!Y(t.src,g=_[2].logo.full_path))&&c(t,"src",g),(!w||I&4)&&u!==(u=_[2].name+"")&&se(p,u),Q&&b.p(_,I),U&&$.p(_,I)},i(_){w||(E(b),E($),_&&(C||re(()=>{C=fe(e,ke,{duration:200}),C.start()})),w=!0)},o(_){T(b),T($),w=!1},d(_){_&&f(e),b&&b.d(),$&&$.d(),o[5](null)}}}function we(o,e,s){let n,i,l,{data:a}=e,t;ie(()=>{ve(t)});function g(m){oe[m?"unshift":"push"](()=>{t=m,s(0,t)})}return o.$$set=m=>{"data"in m&&s(4,a=m.data)},o.$$.update=()=>{o.$$.dirty&16&&s(3,n=a.packagesResponse.data.packages),o.$$.dirty&16&&s(2,i=a.packagesResponse.data.school),o.$$.dirty&16&&s(1,l=a.packagesResponse.pagination)},[t,l,i,n,a,g]}class xe extends ce{constructor(e){super(),de(this,e,we,Se,te,{data:4})}}export{xe as component,Oe as universal};
