import{p as Dt,D as tt,q as Tt,r as Mt,u as Vt}from"../chunks/paths.29c5142d.js";import{a as je}from"../chunks/auth.82ff8344.js";import{s as He,f as h,a as S,g as v,h as g,z as W,c as w,d as m,j as u,K as st,H as Xe,B as Je,i as G,C as r,L as lt,F as $e,Q as xt,A as _e,G as $t,T as Ye,y as Ge,l as se,m as le,n as Se,p as De,M as Lt,E as Pe,W as Fe,k as Ke,X as ht,I as Pt,e as Te,R as vt,o as _t,J as gt,D as Ht}from"../chunks/scheduler.726ac76d.js";import{S as Ne,i as Oe,a as B,t as F,g as Ue,c as ze,b as re,d as ue,m as oe,e as ce,f as pt}from"../chunks/index.8a5ed380.js";import{g as bt,a as qt}from"../chunks/spread.8a54911c.js";import{A as St,V as wt,D as We,E as Nt,C as Ot,a as At,Q as jt}from"../chunks/CloseQueueModal.7573cbe4.js";import{P as It}from"../chunks/Pagination.0a529dad.js";import{w as kt}from"../chunks/singletons.df66ea99.js";import"../chunks/paths.7846b4ff.js";import{f as Et}from"../chunks/index.955fed47.js";import{e as Re,u as Jt,o as Rt}from"../chunks/each.381f634d.js";import{i as Ct,g as Be}from"../chunks/utils.5f096ebf.js";import{n as Bt}from"../chunks/stores.1008b3f8.js";import{t as yt}from"../chunks/toast.aca1940a.js";import{i as Gt}from"../chunks/initToolTip.b2308c6a.js";import{E as Ut}from"../chunks/ExitQueueStudent.51973554.js";const zt=!1;async function Ft({fetch:n,url:e,depends:s,params:t}){s("queues:refresh");let l=await n(Dt(t.canteenId,tt(e)),{headers:{Authorization:`${localStorage.getItem("SID")}`}});je(l);let a=await l.json();a.data.activeQueue;let o,c;l=await n(Tt(t.queueId,tt(e),!0),{headers:{Authorization:`${localStorage.getItem("SID")}`}}),je(l);let f=await l.json();return o=f.data.queueStudents,c=f.data.queue,{queuesResponse:a,currentQueue:c,activeQueueStudents:o,tabTitle:"Queues"}}const Ws=Object.freeze(Object.defineProperty({__proto__:null,load:Ft,ssr:zt},Symbol.toStringTag,{value:"Module"}));function at(n){let e,s='<lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon>';return{c(){e=h("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-dxv6g9"&&(e.innerHTML=s),this.h()},h(){u(e,"class","text-center")},m(t,l){G(t,e,l)},d(t){t&&m(e)}}}function nt(n){let e,s=n[1].type[0]+"",t;return{c(){e=h("strong"),t=se(s),this.h()},l(l){e=v(l,"STRONG",{class:!0});var a=g(e);t=le(a,s),a.forEach(m),this.h()},h(){u(e,"class","text-danger ms-1 my-2")},m(l,a){G(l,e,a),r(e,t)},p(l,a){a&2&&s!==(s=l[1].type[0]+"")&&Se(t,s)},d(l){l&&m(e)}}}function it(n){let e,s=n[1][422]+"",t;return{c(){e=h("strong"),t=se(s),this.h()},l(l){e=v(l,"STRONG",{class:!0});var a=g(e);t=le(a,s),a.forEach(m),this.h()},h(){u(e,"class","text-danger ms-1 my-2")},m(l,a){G(l,e,a),r(e,t)},p(l,a){a&2&&s!==(s=l[1][422]+"")&&Se(t,s)},d(l){l&&m(e)}}}function Kt(n){var O,ae;let e,s,t,l,a='<h5 class="modal-title" id="exampleModalgridLabel">Start Queue</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>',o,c,f,i,d,_,p,y="Type",K,k,E,$="Main Meal",b,ee="Snack",q,Q,R,J,M,L="Close",N,V,P,U,T=n[2]&&at(),C=((O=n[1])==null?void 0:O.type)&&nt(n),D=((ae=n[1])==null?void 0:ae["422"])&&it(n);return{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),l.innerHTML=a,o=S(),c=h("div"),T&&T.c(),f=S(),i=h("form"),d=h("div"),_=h("div"),p=h("label"),p.textContent=y,K=S(),k=h("select"),E=h("option"),E.textContent=$,b=h("option"),b.textContent=ee,q=S(),C&&C.c(),Q=S(),D&&D.c(),R=S(),J=h("div"),M=h("button"),M.textContent=L,N=S(),V=h("input"),this.h()},l(x){e=v(x,"DIV",{class:!0,id:!0,tabindex:!0,"aria-labelledby":!0,"aria-modal":!0});var j=g(e);s=v(j,"DIV",{class:!0});var Z=g(s);t=v(Z,"DIV",{class:!0});var de=g(t);l=v(de,"DIV",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-6wsm1a"&&(l.innerHTML=a),o=w(de),c=v(de,"DIV",{class:!0});var fe=g(c);T&&T.l(fe),f=w(fe),i=v(fe,"FORM",{});var ge=g(i);d=v(ge,"DIV",{class:!0});var X=g(d);_=v(X,"DIV",{class:!0});var A=g(_);p=v(A,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),W(p)!=="svelte-vk0u42"&&(p.textContent=y),K=w(A),k=v(A,"SELECT",{class:!0,name:!0,id:!0,"aria-label":!0});var ne=g(k);E=v(ne,"OPTION",{"data-svelte-h":!0}),W(E)!=="svelte-wki2rk"&&(E.textContent=$),b=v(ne,"OPTION",{"data-svelte-h":!0}),W(b)!=="svelte-54q1vx"&&(b.textContent=ee),ne.forEach(m),q=w(A),C&&C.l(A),A.forEach(m),Q=w(X),D&&D.l(X),R=w(X),J=v(X,"DIV",{class:!0});var z=g(J);M=v(z,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"data-svelte-h":!0}),W(M)!=="svelte-1h5uvws"&&(M.textContent=L),N=w(z),V=v(z,"INPUT",{type:!0,class:!0}),z.forEach(m),X.forEach(m),ge.forEach(m),fe.forEach(m),de.forEach(m),Z.forEach(m),j.forEach(m),this.h()},h(){u(l,"class","modal-header"),u(p,"for","role"),u(p,"class","form-label"),E.__value=0,st(E,E.__value),b.__value=1,st(b,b.__value),u(k,"class","form-select"),u(k,"name","type"),u(k,"id","role"),u(k,"aria-label","Default select example"),n[5]===void 0&&Xe(()=>n[10].call(k)),u(_,"class","col-lg-12"),u(M,"type","button"),u(M,"class","btn btn-light fw-light"),u(M,"data-bs-dismiss","modal"),u(V,"type","submit"),u(V,"class","btn btn-primary waves-effect waves-light"),V.value="Save",u(J,"class","hstack gap-2 justify-content-end"),u(d,"class","row g-3"),Je(i,"d-none",n[2]),u(c,"class","modal-body"),u(t,"class","modal-content"),u(s,"class","modal-dialog modal-dialog-centered"),u(e,"class","modal fade"),u(e,"id","editQueueModal"),u(e,"tabindex","-1"),u(e,"aria-labelledby","exampleModalgridLabel"),u(e,"aria-modal","true")},m(x,j){G(x,e,j),r(e,s),r(s,t),r(t,l),r(t,o),r(t,c),T&&T.m(c,null),r(c,f),r(c,i),r(i,d),r(d,_),r(_,p),r(_,K),r(_,k),r(k,E),r(k,b),n[9](k),lt(k,n[5],!0),r(_,q),C&&C.m(_,null),r(d,Q),D&&D.m(d,null),r(d,R),r(d,J),r(J,M),n[11](M),r(J,N),r(J,V),n[12](i),P||(U=[$e(k,"change",n[10]),$e(i,"submit",xt(n[7])),$e(e,"hidden.bs.modal",n[8])],P=!0)},p(x,[j]){var Z,de;x[2]?T||(T=at(),T.c(),T.m(c,f)):T&&(T.d(1),T=null),j&32&&lt(k,x[5]),(Z=x[1])!=null&&Z.type?C?C.p(x,j):(C=nt(x),C.c(),C.m(_,null)):C&&(C.d(1),C=null),(de=x[1])!=null&&de["422"]?D?D.p(x,j):(D=it(x),D.c(),D.m(d,R)):D&&(D.d(1),D=null),j&4&&Je(i,"d-none",x[2])},i:_e,o:_e,d(x){x&&m(e),T&&T.d(),n[9](null),C&&C.d(),D&&D.d(),n[11](null),n[12](null),P=!1,$t(U)}}}function Wt(n,e,s){let t,{queueStore:l}=Ye("queueStore");Ge(n,l,$=>s(13,t=$));let a,o,c=!1,f,i,d=0;async function _(){s(2,c=!0),s(1,o={});let $=new FormData(i),b=await fetch(Mt(t.id),{headers:{Authorization:`${localStorage.getItem("SID")}`},method:"POST",body:$});je(b),b=await b.json(),s(2,c=!1),b.status=="success"?(a.click(),yt("Successfuly Edited","success"),Ct("queues:refresh"),p()):s(1,o=b.errors)}function p(){i.reset(),s(1,o={})}l.subscribe(()=>{s(5,d=t.type)});function y($){De[$?"unshift":"push"](()=>{f=$,s(3,f)})}function K(){d=Lt(this),s(5,d)}function k($){De[$?"unshift":"push"](()=>{a=$,s(0,a)})}function E($){De[$?"unshift":"push"](()=>{i=$,s(4,i)})}return[a,o,c,f,i,d,l,_,p,y,K,k,E]}class Xt extends Ne{constructor(e){super(),Oe(this,e,Wt,Kt,He,{})}}function rt(n){let e,s='<div class="text-center"><lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon></div>';return{c(){e=h("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1ei7695"&&(e.innerHTML=s),this.h()},h(){u(e,"class","mt-2")},m(t,l){G(t,e,l)},d(t){t&&m(e)}}}function Yt(n){let e,s,t=n[2].close[0]+"",l,a,o;return{c(){e=h("div"),s=h("i"),l=se(t),a=S(),o=h("button"),this.h()},l(c){e=v(c,"DIV",{class:!0,role:!0});var f=g(e);s=v(f,"I",{class:!0}),g(s).forEach(m),l=le(f,t),a=w(f),o=v(f,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"aria-label":!0}),g(o).forEach(m),f.forEach(m),this.h()},h(){u(s,"class","ri-alert-line me-3 align-middle"),u(o,"type","button"),u(o,"class","btn-close"),u(o,"data-bs-dismiss","alert"),u(o,"aria-label","Close"),u(e,"class","alert text-start alert-danger alert-border-left alert-dismissible fade show"),u(e,"role","alert")},m(c,f){G(c,e,f),r(e,s),r(e,l),r(e,a),r(e,o)},p:_e,d(c){c&&m(e)}}}function Zt(n){var T;let e,s,t,l,a,o='<button type="button" class="btn-close text-end" data-bs-dismiss="modal" aria-label="Close"></button>',c,f,i,d,_,p,y,K="Are you Sure ?",k,E,$='Are you Sure You want to close this <span class="text-primary">active Queue</span> ?',b,ee,q,Q,R="Cancel",J,M,L="Close Queue",N,V,P=n[1]&&rt(),U=((T=n[2])==null?void 0:T.close)&&Yt(n);return{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),a=h("div"),a.innerHTML=o,c=S(),P&&P.c(),f=S(),i=h("div"),d=h("lord-icon"),p=S(),y=h("h4"),y.textContent=K,k=S(),E=h("p"),E.innerHTML=$,b=S(),U&&U.c(),ee=S(),q=h("div"),Q=h("button"),Q.textContent=R,J=S(),M=h("button"),M.textContent=L,this.h()},l(C){e=v(C,"DIV",{id:!0,class:!0,tabindex:!0,"aria-hidden":!0,style:!0});var D=g(e);s=v(D,"DIV",{class:!0});var O=g(s);t=v(O,"DIV",{class:!0});var ae=g(t);l=v(ae,"DIV",{class:!0});var x=g(l);a=v(x,"DIV",{class:!0,"data-svelte-h":!0}),W(a)!=="svelte-3pipod"&&(a.innerHTML=o),c=w(x),P&&P.l(x),f=w(x),i=v(x,"DIV",{class:!0});var j=g(i);d=v(j,"LORD-ICON",{src:!0,trigger:!0,colors:!0,style:!0}),g(d).forEach(m),p=w(j),y=v(j,"H4",{class:!0,"data-svelte-h":!0}),W(y)!=="svelte-1s07vlj"&&(y.textContent=K),k=w(j),E=v(j,"P",{class:!0,"data-svelte-h":!0}),W(E)!=="svelte-tu6baa"&&(E.innerHTML=$),b=w(j),U&&U.l(j),ee=w(j),q=v(j,"DIV",{class:!0});var Z=g(q);Q=v(Z,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"data-svelte-h":!0}),W(Q)!=="svelte-s1avm2"&&(Q.textContent=R),J=w(Z),M=v(Z,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),W(M)!=="svelte-17dma38"&&(M.textContent=L),Z.forEach(m),j.forEach(m),x.forEach(m),ae.forEach(m),O.forEach(m),D.forEach(m),this.h()},h(){u(a,"class","text-end"),Pe(d.src,_="https://cdn.lordicon.com/crithpny.json")||Fe(d,"src",_),Fe(d,"trigger","loop"),Fe(d,"colors","primary:#f7b84b,secondary:#f06548"),Ke(d,"width","100px"),Ke(d,"height","100px"),u(y,"class","mb-3 mt-4"),u(E,"class","text-muted fs-15 mb-4"),u(Q,"type","button"),u(Q,"class","btn btn-light fw-light"),u(Q,"data-bs-dismiss","modal"),u(M,"type","button"),u(M,"class","btn btn-warning waves-effect waves-light"),u(q,"class","hstack gap-2 justify-content-center"),u(i,"class","mt-2"),Je(i,"d-none",n[1]),u(l,"class","modal-body text-center p-5"),u(t,"class","modal-content"),u(s,"class","modal-dialog modal-dialog-centered"),u(e,"id","closeQueueModal"),u(e,"class","modal fade"),u(e,"tabindex","-1"),u(e,"aria-hidden","true"),Ke(e,"display","none")},m(C,D){G(C,e,D),r(e,s),r(s,t),r(t,l),r(l,a),r(l,c),P&&P.m(l,null),r(l,f),r(l,i),r(i,d),r(i,p),r(i,y),r(i,k),r(i,E),r(i,b),U&&U.m(i,null),r(i,ee),r(i,q),r(q,Q),n[5](Q),r(q,J),r(q,M),N||(V=$e(M,"click",n[3]),N=!0)},p(C,[D]){var O;C[1]?P||(P=rt(),P.c(),P.m(l,f)):P&&(P.d(1),P=null),(O=C[2])!=null&&O.close&&U.p(C,D),D&2&&Je(i,"d-none",C[1])},i:_e,o:_e,d(C){C&&m(e),P&&P.d(),U&&U.d(),n[5](null),N=!1,V()}}}function es(n,e,s){let t,l=!1,{queue:a}=e,o;async function c(){s(1,l=!0);let i=await fetch(Vt(a.id),{headers:{Authorization:`${localStorage.getItem("SID")}`},method:"Post"});je(i),i=await i.json(),s(1,l=!1),i.status=="success"&&(t.click(),yt("Queue closed","success"),Ct("queues:refresh"))}function f(i){De[i?"unshift":"push"](()=>{t=i,s(0,t)})}return n.$$set=i=>{"queue"in i&&s(4,a=i.queue)},[t,l,o,c,a,f]}class ts extends Ne{constructor(e){super(),Oe(this,e,es,Zt,He,{queue:4})}}function ss(n){let e,s='<button type="button" class="btn col-12 text-start btn-soft-primary btn-label waves-effect waves-light"><i class="ri-user-2-line label-icon align-middle fs-16 me-2"></i> Students</button>',t,l;return{c(){e=h("span"),e.innerHTML=s,this.h()},l(a){e=v(a,"SPAN",{class:!0,"data-bs-dismiss":!0,"data-svelte-h":!0}),W(e)!=="svelte-1owwoi6"&&(e.innerHTML=s),this.h()},h(){u(e,"class","col-12"),u(e,"data-bs-dismiss","modal")},m(a,o){G(a,e,o),n[6](e),t||(l=$e(e,"click",ht(n[3])),t=!0)},p:_e,d(a){a&&m(e),n[6](null),t=!1,l()}}}function ls(n){var ne;let e,s,t,l,a,o,c=(((ne=n[0])==null?void 0:ne.started_at)==null?"Not started yet":n[0].started_at)+"",f,i,d,_,p=n[0].type==1?"Snack":"Main Meal",y,K,k,E,$,b="All",ee,q,Q=n[0].studentsCount+"",R,J,M,L,N="In",V,P,U=n[0].studentsInCount+"",T,C,D,O,ae="Out",x,j,Z=n[0].studentsExitedCount+"",de,fe,ge,X=JSON.parse(sessionStorage.getItem("permissions")).includes("queueStudents.index.simplified"),A=X&&ss(n);return{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),a=h("p"),o=se("Started At : "),f=se(c),i=S(),d=h("td"),_=h("span"),y=se(p),K=S(),k=h("div"),E=h("div"),$=h("p"),$.textContent=b,ee=S(),q=h("h2"),R=se(Q),J=S(),M=h("div"),L=h("p"),L.textContent=N,V=S(),P=h("h2"),T=se(U),C=S(),D=h("div"),O=h("p"),O.textContent=ae,x=S(),j=h("h2"),de=se(Z),fe=S(),ge=h("div"),A&&A.c(),this.h()},l(z){e=v(z,"DIV",{class:!0});var H=g(e);s=v(H,"DIV",{class:!0,role:!0});var te=g(s);t=v(te,"DIV",{class:!0});var me=g(t);l=v(me,"DIV",{class:!0});var Ie=g(l);a=v(Ie,"P",{class:!0});var Ce=g(a);o=le(Ce,"Started At : "),f=le(Ce,c),Ce.forEach(m),Ie.forEach(m),i=w(me),d=v(me,"TD",{});var we=g(d);_=v(we,"SPAN",{class:!0});var he=g(_);y=le(he,p),he.forEach(m),we.forEach(m),me.forEach(m),K=w(te),k=v(te,"DIV",{class:!0});var ie=g(k);E=v(ie,"DIV",{class:!0});var pe=g(E);$=v(pe,"P",{class:!0,"data-svelte-h":!0}),W($)!=="svelte-1a9rlwd"&&($.textContent=b),ee=w(pe),q=v(pe,"H2",{class:!0});var qe=g(q);R=le(qe,Q),qe.forEach(m),pe.forEach(m),J=w(ie),M=v(ie,"DIV",{class:!0});var ve=g(M);L=v(ve,"P",{class:!0,"data-svelte-h":!0}),W(L)!=="svelte-8yas4f"&&(L.textContent=N),V=w(ve),P=v(ve,"H2",{class:!0});var be=g(P);T=le(be,U),be.forEach(m),ve.forEach(m),C=w(ie),D=v(ie,"DIV",{class:!0});var Le=g(D);O=v(Le,"P",{class:!0,"data-svelte-h":!0}),W(O)!=="svelte-1nbudfu"&&(O.textContent=ae),x=w(Le),j=v(Le,"H2",{class:!0});var I=g(j);de=le(I,Z),I.forEach(m),Le.forEach(m),ie.forEach(m),fe=w(te),ge=v(te,"DIV",{class:!0});var Y=g(ge);A&&A.l(Y),Y.forEach(m),te.forEach(m),H.forEach(m),this.h()},h(){u(a,"class","text-muted mb-0"),u(l,"class","flex-grow-1"),u(_,"class","badge bg-primary-subtle text-primary"),u(t,"class","d-flex align-items-center"),u($,"class","text-muted mb-0"),u(q,"class","mb-1"),u(E,"class","col-4"),u(L,"class","text-muted mb-0"),u(P,"class","mb-1"),u(M,"class","col-4"),u(O,"class","text-muted mb-0"),u(j,"class","mb-1"),u(D,"class","col-4"),u(k,"class","d-flex mt-2 justify-content-center"),u(ge,"class","d-flex gap-2 mt-4 flex-wrap"),u(s,"class","card card-animate p-3 "),u(s,"role","button"),u(e,"class","col-xxl-3 col-xl-4 col-lg-5 col-sm-6 col-xs-12")},m(z,H){G(z,e,H),r(e,s),r(s,t),r(t,l),r(l,a),r(a,o),r(a,f),r(t,i),r(t,d),r(d,_),r(_,y),r(s,K),r(s,k),r(k,E),r(E,$),r(E,ee),r(E,q),r(q,R),r(k,J),r(k,M),r(M,L),r(M,V),r(M,P),r(P,T),r(k,C),r(k,D),r(D,O),r(D,x),r(D,j),r(j,de),r(s,fe),r(s,ge),A&&A.m(ge,null)},p(z,[H]){var te;H&1&&c!==(c=(((te=z[0])==null?void 0:te.started_at)==null?"Not started yet":z[0].started_at)+"")&&Se(f,c),H&1&&p!==(p=z[0].type==1?"Snack":"Main Meal")&&Se(y,p),H&1&&Q!==(Q=z[0].studentsCount+"")&&Se(R,Q),H&1&&U!==(U=z[0].studentsInCount+"")&&Se(T,U),H&1&&Z!==(Z=z[0].studentsExitedCount+"")&&Se(de,Z),X&&A.p(z,H)},i:_e,o:_e,d(z){z&&m(e),A&&A.d()}}}function as(n,e,s){let{queue:t}=e,{active:l}=e,{canteen:a}=e,o,{queueStore:c}=Ye("queueStore");Ge(n,c,d=>s(7,d));async function f(){bootstrap.Tooltip.getOrCreateInstance(o).hide(),l&&await Be(`/admin/canteens/${a.id}/queues`),await Be(`/admin/canteens/${a.id}/queues/${t.id}/`)}function i(d){De[d?"unshift":"push"](()=>{o=d,s(1,o)})}return n.$$set=d=>{"queue"in d&&s(0,t=d.queue),"active"in d&&s(4,l=d.active),"canteen"in d&&s(5,a=d.canteen)},[t,o,c,f,l,a,i]}class Qt extends Ne{constructor(e){super(),Oe(this,e,as,ls,He,{queue:0,active:4,canteen:5})}}function ns(n){let e,s='<button type="button" class="btn col-12 text-start btn-soft-success btn-label waves-effect waves-light"><i class="ri-logout-box-r-line label-icon align-middle fs-16 me-2"></i> Exit Queue</button>',t,l;return{c(){e=h("span"),e.innerHTML=s,this.h()},l(a){e=v(a,"SPAN",{"data-bs-toggle":!0,class:!0,"data-bs-target":!0,"data-svelte-h":!0}),W(e)!=="svelte-mi0vlo"&&(e.innerHTML=s),this.h()},h(){u(e,"data-bs-toggle","modal"),u(e,"class","col-12"),u(e,"data-bs-target","#exitQueueStudent")},m(a,o){G(a,e,o),t||(l=$e(e,"click",ht(n[2])),t=!0)},p:_e,d(a){a&&m(e),t=!1,l()}}}function is(n){let e,s,t,l,a,o,c,f,i,d,_=n[0].number+"",p,y,K,k=n[0].student.fullname+"",E,$,b,ee,q=n[0].started_at+"",Q,R,J,M=JSON.parse(sessionStorage.getItem("permissions")).includes("queueStudents.exit.simplified"),L=M&&ns(n);return{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),a=h("div"),o=h("img"),f=S(),i=h("p"),d=se("#"),p=se(_),y=S(),K=h("h5"),E=se(k),$=S(),b=h("p"),ee=se("Started at : "),Q=se(q),R=S(),J=h("div"),L&&L.c(),this.h()},l(N){e=v(N,"DIV",{class:!0});var V=g(e);s=v(V,"DIV",{class:!0,role:!0});var P=g(s);t=v(P,"DIV",{class:!0});var U=g(t);l=v(U,"DIV",{class:!0});var T=g(l);a=v(T,"DIV",{class:!0});var C=g(a);o=v(C,"IMG",{src:!0,alt:!0,id:!0,class:!0}),C.forEach(m),f=w(T),i=v(T,"P",{class:!0});var D=g(i);d=le(D,"#"),p=le(D,_),D.forEach(m),y=w(T),K=v(T,"H5",{id:!0,class:!0});var O=g(K);E=le(O,k),O.forEach(m),$=w(T),b=v(T,"P",{class:!0});var ae=g(b);ee=le(ae,"Started at : "),Q=le(ae,q),ae.forEach(m),R=w(T),J=v(T,"DIV",{class:!0});var x=g(J);L&&L.l(x),x.forEach(m),T.forEach(m),U.forEach(m),P.forEach(m),V.forEach(m),this.h()},h(){Pe(o.src,c=n[0].student.image.full_path)||u(o,"src",c),u(o,"alt",""),u(o,"id","candidate-img"),u(o,"class","avatar-md rounded-circle"),u(a,"class","avatar-md mb-3 mx-auto"),u(i,"class","text-muted mb-0 fs-6"),u(K,"id","candidate-name"),u(K,"class","mb-1 text-truncate"),u(b,"class","text-muted mb-0 fs-6"),u(J,"class","d-flex gap-2 mt-4 flex-wrap"),u(l,"class","card-body text-center"),u(t,"class","row g-0"),u(s,"class","card card-animate p-3 py-2"),u(s,"role","button"),u(e,"class","col-xxl-3 col-xl-4 col-lg-5 col-sm-6 col-xs-12")},m(N,V){G(N,e,V),r(e,s),r(s,t),r(t,l),r(l,a),r(a,o),r(l,f),r(l,i),r(i,d),r(i,p),r(l,y),r(l,K),r(K,E),r(l,$),r(l,b),r(b,ee),r(b,Q),r(l,R),r(l,J),L&&L.m(J,null)},p(N,[V]){V&1&&!Pe(o.src,c=N[0].student.image.full_path)&&u(o,"src",c),V&1&&_!==(_=N[0].number+"")&&Se(p,_),V&1&&k!==(k=N[0].student.fullname+"")&&Se(E,k),V&1&&q!==(q=N[0].started_at+"")&&Se(Q,q),M&&L.p(N,V)},i:_e,o:_e,d(N){N&&m(e),L&&L.d()}}}function rs(n,e,s){let t,{queueStudent:l}=e,{queueStudentStore:a}=Ye("queueStudentStore");Ge(n,a,c=>s(3,t=c));function o(){Pt(a,t=JSON.parse(JSON.stringify(l)),t)}return n.$$set=c=>{"queueStudent"in c&&s(0,l=c.queueStudent)},[l,a,o]}class us extends Ne{constructor(e){super(),Oe(this,e,rs,is,He,{queueStudent:0})}}function ut(n,e,s){const t=n.slice();return t[6]=e[s],t[8]=s,t}function os(n){let e,s,t,l;const a=[ds,cs],o=[];function c(f,i){return f[1]?0:1}return e=c(n),s=o[e]=a[e](n),{c(){s.c(),t=Te()},l(f){s.l(f),t=Te()},m(f,i){o[e].m(f,i),G(f,t,i),l=!0},p(f,i){let d=e;e=c(f),e===d?o[e].p(f,i):(Ue(),F(o[d],1,1,()=>{o[d]=null}),ze(),s=o[e],s?s.p(f,i):(s=o[e]=a[e](f),s.c()),B(s,1),s.m(t.parentNode,t))},i(f){l||(B(s),l=!0)},o(f){F(s),l=!1},d(f){f&&m(t),o[e].d(f)}}}function cs(n){let e,s=`<i class="ri-airplay-line me-3 align-middle"></i> There are no <strong>Active Queues</strong> at the moment 
                                        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>`;return{c(){e=h("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),W(e)!=="svelte-119pvrl"&&(e.innerHTML=s),this.h()},h(){u(e,"class","alert alert-info alert-border-left alert-dismissible fade show"),u(e,"role","alert")},m(t,l){G(t,e,l)},p:_e,i:_e,o:_e,d(t){t&&m(e)}}}function ds(n){let e,s;return e=new Qt({props:{canteen:n[2],queue:n[1],active:!0}}),{c(){re(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,l){oe(e,t,l),s=!0},p(t,l){const a={};l&4&&(a.canteen=t[2]),l&2&&(a.queue=t[1]),e.$set(a)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function fs(n){let e,s=[],t=new Map,l,a,o,c=Re(n[0]);const f=_=>_[6].id;for(let _=0;_<c.length;_+=1){let p=ut(n,c,_),y=f(p);t.set(y,s[_]=ot(y,p))}const i=[n[3]];let d={};for(let _=0;_<i.length;_+=1)d=vt(d,i[_]);return a=new It({props:d}),{c(){e=h("div");for(let _=0;_<s.length;_+=1)s[_].c();l=S(),re(a.$$.fragment),this.h()},l(_){e=v(_,"DIV",{class:!0});var p=g(e);for(let y=0;y<s.length;y+=1)s[y].l(p);l=w(p),ue(a.$$.fragment,p),p.forEach(m),this.h()},h(){u(e,"class","row")},m(_,p){G(_,e,p);for(let y=0;y<s.length;y+=1)s[y]&&s[y].m(e,null);r(e,l),oe(a,e,null),o=!0},p(_,p){p&5&&(c=Re(_[0]),Ue(),s=Jt(s,p,f,1,_,c,t,e,Rt,ot,l,ut),ze());const y=p&8?bt(i,[qt(_[3])]):{};a.$set(y)},i(_){if(!o){for(let p=0;p<c.length;p+=1)B(s[p]);B(a.$$.fragment,_),o=!0}},o(_){for(let p=0;p<s.length;p+=1)F(s[p]);F(a.$$.fragment,_),o=!1},d(_){_&&m(e);for(let p=0;p<s.length;p+=1)s[p].d();ce(a)}}}function ot(n,e){let s,t,l;return t=new Qt({props:{canteen:e[2],queue:e[6]}}),{key:n,first:null,c(){s=Te(),re(t.$$.fragment),this.h()},l(a){s=Te(),ue(t.$$.fragment,a),this.h()},h(){this.first=s},m(a,o){G(a,s,o),oe(t,a,o),l=!0},p(a,o){e=a;const c={};o&4&&(c.canteen=e[2]),o&1&&(c.queue=e[6]),t.$set(c)},i(a){l||(B(t.$$.fragment,a),l=!0)},o(a){F(t.$$.fragment,a),l=!1},d(a){a&&m(s),ce(t,a)}}}function ms(n){let e,s,t,l,a='<h5 class="modal-title" id="exampleModalgridLabel">Queues</h5> <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>',o,c,f,i,d,_,p="Active Queue Students",y,K=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index.simplified"),k,E,$="All queues",b,ee=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index.simplified"),q,Q,R,J="Close",M,L=K&&os(n),N=ee&&fs(n);return{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),l.innerHTML=a,o=S(),c=h("div"),f=S(),i=h("div"),d=h("div"),_=h("h4"),_.textContent=p,y=S(),L&&L.c(),k=S(),E=h("h4"),E.textContent=$,b=S(),N&&N.c(),q=S(),Q=h("div"),R=h("button"),R.textContent=J,this.h()},l(V){e=v(V,"DIV",{class:!0,id:!0,tabindex:!0,"data-bs-focus":!0,"aria-labelledby":!0,"aria-modal":!0});var P=g(e);s=v(P,"DIV",{class:!0});var U=g(s);t=v(U,"DIV",{class:!0});var T=g(t);l=v(T,"DIV",{class:!0,"data-svelte-h":!0}),W(l)!=="svelte-xvci6d"&&(l.innerHTML=a),o=w(T),c=v(T,"DIV",{class:!0});var C=g(c);f=w(C),i=v(C,"DIV",{class:!0});var D=g(i);d=v(D,"DIV",{class:!0});var O=g(d);_=v(O,"H4",{class:!0,"data-svelte-h":!0}),W(_)!=="svelte-17fypv1"&&(_.textContent=p),y=w(O),L&&L.l(O),k=w(O),E=v(O,"H4",{class:!0,"data-svelte-h":!0}),W(E)!=="svelte-a0tarp"&&(E.textContent=$),b=w(O),N&&N.l(O),q=w(O),Q=v(O,"DIV",{class:!0});var ae=g(Q);R=v(ae,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"data-svelte-h":!0}),W(R)!=="svelte-1h5uvws"&&(R.textContent=J),ae.forEach(m),O.forEach(m),D.forEach(m),C.forEach(m),T.forEach(m),U.forEach(m),P.forEach(m),this.h()},h(){u(l,"class","modal-header"),u(_,"class","card-title mb-0 flex-grow-1 mb-3"),u(E,"class","card-title mb-0 flex-grow-1 mb-3"),u(R,"type","button"),u(R,"class","btn btn-light fw-light"),u(R,"data-bs-dismiss","modal"),u(Q,"class","hstack gap-2 justify-content-end"),u(d,"class","col-lg-12"),u(i,"class","row g-3"),u(c,"class","modal-body"),u(t,"class","modal-content"),u(s,"class","modal-dialog modal-dialog-centered modal-xl"),u(e,"class","modal fade"),u(e,"id","ViewAllQueuesModal"),u(e,"tabindex","-1"),u(e,"data-bs-focus","false"),u(e,"aria-labelledby","exampleModalgridLabel"),u(e,"aria-modal","true")},m(V,P){G(V,e,P),r(e,s),r(s,t),r(t,l),r(t,o),r(t,c),r(c,f),r(c,i),r(i,d),r(d,_),r(d,y),L&&L.m(d,null),r(d,k),r(d,E),r(d,b),N&&N.m(d,null),r(d,q),r(d,Q),r(Q,R),n[5](R),M=!0},p(V,[P]){K&&L.p(V,P),ee&&N.p(V,P)},i(V){M||(B(L),B(N),M=!0)},o(V){F(L),F(N),M=!1},d(V){V&&m(e),L&&L.d(),N&&N.d(),n[5](null)}}}function hs(n,e,s){let{queuesList:t}=e,{activeQueue:l}=e,{canteen:a}=e,{queuesPagination:o}=e,c;function f(i){De[i?"unshift":"push"](()=>{c=i,s(4,c)})}return n.$$set=i=>{"queuesList"in i&&s(0,t=i.queuesList),"activeQueue"in i&&s(1,l=i.activeQueue),"canteen"in i&&s(2,a=i.canteen),"queuesPagination"in i&&s(3,o=i.queuesPagination)},[t,l,a,o,c,f]}class vs extends Ne{constructor(e){super(),Oe(this,e,hs,ms,He,{queuesList:0,activeQueue:1,canteen:2,queuesPagination:3})}}function ct(n,e,s){const t=n.slice();return t[15]=e[s],t}function _s(n){let e,s='<button type="button" class="btn col-12 text-start btn-success btn-label waves-effect waves-light"><i class="ri-add-line label-icon align-middle fs-16 me-2"></i> Open Queue</button>';return{c(){e=h("span"),e.innerHTML=s,this.h()},l(t){e=v(t,"SPAN",{"data-bs-toggle":!0,"data-bs-target":!0,"data-svelte-h":!0}),W(e)!=="svelte-1t5ib29"&&(e.innerHTML=s),this.h()},h(){u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#addQueueModal")},m(t,l){G(t,e,l)},d(t){t&&m(e)}}}function gs(n){let e,s='<button type="button" class="btn col-12 text-start btn-danger btn-label waves-effect waves-light"><i class="ri-stop-circle-line label-icon align-middle fs-16 me-2"></i> Close queue</button>';return{c(){e=h("span"),e.innerHTML=s,this.h()},l(t){e=v(t,"SPAN",{"data-bs-toggle":!0,"data-bs-target":!0,"data-svelte-h":!0}),W(e)!=="svelte-1y9t1y0"&&(e.innerHTML=s),this.h()},h(){u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#closeQueueModal")},m(t,l){G(t,e,l)},d(t){t&&m(e)}}}function ps(n){let e,s='<button type="button" class="btn col-12 text-start btn-secondary btn-label waves-effect waves-light"><i class="ri-team-line label-icon align-middle fs-16 me-2"></i> Queues</button>';return{c(){e=h("span"),e.innerHTML=s,this.h()},l(t){e=v(t,"SPAN",{"data-bs-toggle":!0,"data-bs-target":!0,"data-svelte-h":!0}),W(e)!=="svelte-1rh5ls1"&&(e.innerHTML=s),this.h()},h(){u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#ViewAllQueuesModal")},m(t,l){G(t,e,l)},d(t){t&&m(e)}}}function bs(n){let e,s='<button type="button" class="btn col-12 text-start btn-info btn-label waves-effect waves-light"><i class="ri-qr-code-line label-icon align-middle fs-16 me-2"></i> Qr Exit</button>',t,l;return{c(){e=h("span"),e.innerHTML=s},l(a){e=v(a,"SPAN",{"data-svelte-h":!0}),W(e)!=="svelte-qtnahq"&&(e.innerHTML=s)},m(a,o){G(a,e,o),n[12](e),t||(l=$e(e,"click",n[10]),t=!0)},p:_e,d(a){a&&m(e),n[12](null),t=!1,l()}}}function qs(n){let e,s='<button type="button" class="btn col-12 text-start btn-info btn-label waves-effect waves-light"><i class="ri-survey-line label-icon align-middle fs-16 me-2"></i> POS</button>',t,l;return{c(){e=h("span"),e.innerHTML=s},l(a){e=v(a,"SPAN",{"data-svelte-h":!0}),W(e)!=="svelte-1mqzaoc"&&(e.innerHTML=s)},m(a,o){G(a,e,o),n[13](e),t||(l=$e(e,"click",n[11]),t=!0)},p:_e,d(a){a&&m(e),n[13](null),t=!1,l()}}}function Ss(n){let e,s,t=n[5].id+"",l,a,o=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index.simplified"),c,f,i=o&&Is(n);return{c(){e=h("h4"),s=se("Queue #"),l=se(t),a=S(),i&&i.c(),c=Te(),this.h()},l(d){e=v(d,"H4",{class:!0});var _=g(e);s=le(_,"Queue #"),l=le(_,t),_.forEach(m),a=w(d),i&&i.l(d),c=Te(),this.h()},h(){u(e,"class","card-title mb-0 flex-grow-1 mb-3")},m(d,_){G(d,e,_),r(e,s),r(e,l),G(d,a,_),i&&i.m(d,_),G(d,c,_),f=!0},p(d,_){(!f||_&32)&&t!==(t=d[5].id+"")&&Se(l,t),o&&i.p(d,_)},i(d){f||(B(i),f=!0)},o(d){F(i),f=!1},d(d){d&&(m(e),m(a),m(c)),i&&i.d(d)}}}function ws(n){let e,s='<lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon>';return{c(){e=h("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,"data-svelte-h":!0}),W(e)!=="svelte-y60bxl"&&(e.innerHTML=s),this.h()},h(){u(e,"class","text-center")},m(t,l){G(t,e,l)},p:_e,i:_e,o:_e,d(t){t&&m(e)}}}function Is(n){let e,s,t=Re(n[4]),l=[];for(let c=0;c<t.length;c+=1)l[c]=mt(ct(n,t,c));const a=c=>F(l[c],1,1,()=>{l[c]=null});let o=null;return t.length||(o=dt(n)),{c(){e=h("div");for(let c=0;c<l.length;c+=1)l[c].c();o&&o.c(),this.h()},l(c){e=v(c,"DIV",{class:!0});var f=g(e);for(let i=0;i<l.length;i+=1)l[i].l(f);o&&o.l(f),f.forEach(m),this.h()},h(){u(e,"class","row g-3")},m(c,f){G(c,e,f);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(e,null);o&&o.m(e,null),s=!0},p(c,f){if(f&18){t=Re(c[4]);let i;for(i=0;i<t.length;i+=1){const d=ct(c,t,i);l[i]?(l[i].p(d,f),B(l[i],1)):(l[i]=mt(d),l[i].c(),B(l[i],1),l[i].m(e,null))}for(Ue(),i=t.length;i<l.length;i+=1)a(i);ze(),!t.length&&o?o.p(c,f):t.length?o&&(o.d(1),o=null):(o=dt(c),o.c(),o.m(e,null))}},i(c){if(!s){for(let f=0;f<t.length;f+=1)B(l[f]);s=!0}},o(c){l=l.filter(Boolean);for(let f=0;f<l.length;f+=1)F(l[f]);s=!1},d(c){c&&m(e),Ht(l,c),o&&o.d()}}}function dt(n){let e,s=n[1]&&ft();return{c(){s&&s.c(),e=Te()},l(t){s&&s.l(t),e=Te()},m(t,l){s&&s.m(t,l),G(t,e,l)},p(t,l){t[1]?s||(s=ft(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null)},d(t){t&&m(e),s&&s.d(t)}}}function ft(n){let e,s=`<i class="ri-airplay-line me-3 align-middle"></i> There are no <strong>Students</strong> at the moment 
                            <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button> `;return{c(){e=h("div"),e.innerHTML=s,this.h()},l(t){e=v(t,"DIV",{class:!0,role:!0,"data-svelte-h":!0}),W(e)!=="svelte-1y2pdmf"&&(e.innerHTML=s),this.h()},h(){u(e,"class","alert alert-info alert-border-left alert-dismissible fade show"),u(e,"role","alert")},m(t,l){G(t,e,l)},d(t){t&&m(e)}}}function mt(n){let e,s;return e=new us({props:{queueStudent:n[15]}}),{c(){re(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,l){oe(e,t,l),s=!0},p(t,l){const a={};l&16&&(a.queueStudent=t[15]),e.$set(a)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function ks(n){let e,s,t,l,a,o,c,f,i,d,_,p=n[2].school.name+"",y,K,k,E=n[2].name+"",$,b,ee,q,Q,R,J,M,L=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index.simplified"),N,V=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.exit.simplified"),P,U=JSON.parse(sessionStorage.getItem("permissions")).includes("orders.index"),T,C,D,O,ae,x,j,Z,de,fe,ge,X,A,ne,z,H,te,me,Ie;function Ce(I,Y){if(Y&2&&(R=null),R==null&&(R=!!(I[1]&&JSON.parse(sessionStorage.getItem("permissions")).includes("queues.close.simplified"))),R)return gs;if(J==null&&(J=!!JSON.parse(sessionStorage.getItem("permissions")).includes("queues.store.simplified")),J)return _s}let we=Ce(n,-1),he=we&&we(n),ie=L&&ps(),pe=V&&bs(n),qe=U&&qs(n);C=new St({props:{canteen:n[2]}}),O=new wt({}),x=new Xt({}),Z=new We({}),fe=new ts({props:{queue:n[1]}});const ve=[ws,Ss],be=[];function Le(I,Y){var Qe,Me,ye,ke,Ae,Ve;return((ye=(Me=(Qe=I[9])==null?void 0:Qe.from)==null?void 0:Me.route)==null?void 0:ye.id)==((Ve=(Ae=(ke=I[9])==null?void 0:ke.to)==null?void 0:Ae.route)==null?void 0:Ve.id)&&I[9]?0:1}return X=Le(n),A=be[X]=ve[X](n),H=new Ut({props:{route:"queues"}}),me=new vs({props:{queuesList:n[0],activeQueue:n[1],canteen:n[2],queuesPagination:n[3]}}),{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),a=h("div"),o=h("div"),c=h("img"),i=S(),d=h("h4"),_=h("span"),y=se(p),K=se(" - "),k=h("span"),$=se(E),b=se(" - Queue Managment"),ee=S(),q=h("div"),Q=h("div"),he&&he.c(),M=S(),ie&&ie.c(),N=S(),pe&&pe.c(),P=S(),qe&&qe.c(),T=S(),re(C.$$.fragment),D=S(),re(O.$$.fragment),ae=S(),re(x.$$.fragment),j=S(),re(Z.$$.fragment),de=S(),re(fe.$$.fragment),ge=S(),A.c(),z=S(),re(H.$$.fragment),te=S(),re(me.$$.fragment),this.h()},l(I){e=v(I,"DIV",{class:!0});var Y=g(e);s=v(Y,"DIV",{class:!0});var Qe=g(s);t=v(Qe,"DIV",{class:!0});var Me=g(t);l=v(Me,"DIV",{class:!0});var ye=g(l);a=v(ye,"DIV",{class:!0});var ke=g(a);o=v(ke,"DIV",{class:!0});var Ae=g(o);c=v(Ae,"IMG",{src:!0,alt:!0,class:!0}),Ae.forEach(m),i=w(ke),d=v(ke,"H4",{class:!0});var Ve=g(d);_=v(Ve,"SPAN",{class:!0});var Ze=g(_);y=le(Ze,p),Ze.forEach(m),K=le(Ve," - "),k=v(Ve,"SPAN",{class:!0});var et=g(k);$=le(et,E),et.forEach(m),b=le(Ve," - Queue Managment"),Ve.forEach(m),ke.forEach(m),ee=w(ye),q=v(ye,"DIV",{class:!0});var Ee=g(q);Q=v(Ee,"DIV",{class:!0});var xe=g(Q);he&&he.l(xe),M=w(xe),ie&&ie.l(xe),N=w(xe),pe&&pe.l(xe),P=w(xe),qe&&qe.l(xe),xe.forEach(m),T=w(Ee),ue(C.$$.fragment,Ee),D=w(Ee),ue(O.$$.fragment,Ee),ae=w(Ee),ue(x.$$.fragment,Ee),j=w(Ee),ue(Z.$$.fragment,Ee),de=w(Ee),ue(fe.$$.fragment,Ee),Ee.forEach(m),ye.forEach(m),Me.forEach(m),ge=w(Qe),A.l(Qe),Qe.forEach(m),Y.forEach(m),z=w(I),ue(H.$$.fragment,I),te=w(I),ue(me.$$.fragment,I),this.h()},h(){Pe(c.src,f=n[2].school.logo.full_path)||u(c,"src",f),u(c,"alt",""),u(c,"class","avatar-xs rounded-circle"),u(o,"class","flex-shrink-0"),u(_,"class","text-primary"),u(k,"class","text-primary"),u(d,"class","card-title mb-0 flex-grow-1"),u(a,"class","d-flex gap-2 align-items-center flex-grow-1"),u(Q,"class","hstack gap-2 justify-content-end"),u(q,"class","flex-shrink-0"),u(l,"class","card-header align-items-center d-flex"),u(t,"class","card"),u(s,"class","col-lg-12"),u(e,"class","row")},m(I,Y){G(I,e,Y),r(e,s),r(s,t),r(t,l),r(l,a),r(a,o),r(o,c),r(a,i),r(a,d),r(d,_),r(_,y),r(d,K),r(d,k),r(k,$),r(d,b),r(l,ee),r(l,q),r(q,Q),he&&he.m(Q,null),r(Q,M),ie&&ie.m(Q,null),r(Q,N),pe&&pe.m(Q,null),r(Q,P),qe&&qe.m(Q,null),r(q,T),oe(C,q,null),r(q,D),oe(O,q,null),r(q,ae),oe(x,q,null),r(q,j),oe(Z,q,null),r(q,de),oe(fe,q,null),r(s,ge),be[X].m(s,null),n[14](e),G(I,z,Y),oe(H,I,Y),G(I,te,Y),oe(me,I,Y),Ie=!0},p(I,[Y]){(!Ie||Y&4&&!Pe(c.src,f=I[2].school.logo.full_path))&&u(c,"src",f),(!Ie||Y&4)&&p!==(p=I[2].school.name+"")&&Se(y,p),(!Ie||Y&4)&&E!==(E=I[2].name+"")&&Se($,E),we!==(we=Ce(I,Y))&&(he&&he.d(1),he=we&&we(I),he&&(he.c(),he.m(Q,M))),V&&pe.p(I,Y),U&&qe.p(I,Y);const Qe={};Y&4&&(Qe.canteen=I[2]),C.$set(Qe);const Me={};Y&2&&(Me.queue=I[1]),fe.$set(Me);let ye=X;X=Le(I),X===ye?be[X].p(I,Y):(Ue(),F(be[ye],1,1,()=>{be[ye]=null}),ze(),A=be[X],A?A.p(I,Y):(A=be[X]=ve[X](I),A.c()),B(A,1),A.m(s,null));const ke={};Y&1&&(ke.queuesList=I[0]),Y&2&&(ke.activeQueue=I[1]),Y&4&&(ke.canteen=I[2]),Y&8&&(ke.queuesPagination=I[3]),me.$set(ke)},i(I){Ie||(B(C.$$.fragment,I),B(O.$$.fragment,I),B(x.$$.fragment,I),B(Z.$$.fragment,I),B(fe.$$.fragment,I),B(A),I&&(ne||Xe(()=>{ne=pt(e,Et,{duration:200}),ne.start()})),B(H.$$.fragment,I),B(me.$$.fragment,I),Ie=!0)},o(I){F(C.$$.fragment,I),F(O.$$.fragment,I),F(x.$$.fragment,I),F(Z.$$.fragment,I),F(fe.$$.fragment,I),F(A),F(H.$$.fragment,I),F(me.$$.fragment,I),Ie=!1},d(I){I&&(m(e),m(z),m(te)),he&&he.d(),ie&&ie.d(),pe&&pe.d(),qe&&qe.d(),ce(C),ce(O),ce(x),ce(Z),ce(fe),be[X].d(),n[14](null),ce(H,I),ce(me,I)}}}function Es(n,e,s){let t;Ge(n,Bt,b=>s(9,t=b));let{queuesList:l}=e,{activeQueue:a}=e,{canteen:o}=e,{queuesPagination:c}=e,{activeQueueStudents:f}=e,{currentQueue:i}=e,d;_t(()=>{Gt(d)}),gt("queueStudentStore",{queueStudentStore:kt({})});let _;function p(){let b=bootstrap.Tooltip.getOrCreateInstance(_);Be(`/admin/canteens/${o.id}/qr-exit`),b.hide()}let y;function K(){let b=bootstrap.Tooltip.getOrCreateInstance(y);Be(`/admin/canteens/${o.id}/orders`),b.hide()}function k(b){De[b?"unshift":"push"](()=>{_=b,s(7,_)})}function E(b){De[b?"unshift":"push"](()=>{y=b,s(8,y)})}function $(b){De[b?"unshift":"push"](()=>{d=b,s(6,d)})}return n.$$set=b=>{"queuesList"in b&&s(0,l=b.queuesList),"activeQueue"in b&&s(1,a=b.activeQueue),"canteen"in b&&s(2,o=b.canteen),"queuesPagination"in b&&s(3,c=b.queuesPagination),"activeQueueStudents"in b&&s(4,f=b.activeQueueStudents),"currentQueue"in b&&s(5,i=b.currentQueue)},[l,a,o,c,f,i,d,_,y,t,p,K,k,E,$]}class Cs extends Ne{constructor(e){super(),Oe(this,e,Es,ks,He,{queuesList:0,activeQueue:1,canteen:2,queuesPagination:3,activeQueueStudents:4,currentQueue:5})}}function ys(n){let e,s,t,l,a,o,c,f,i,d,_,p=n[4].school.name+"",y,K,k,E=n[4].name+"",$,b,ee,q,Q=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.store"),R,J,M,L,N,V,P,U,T,C,D,O=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index"),ae,x,j,Z='<h4 class="card-title mb-0 flex-grow-1">All queues</h4>',de,fe=JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index"),ge,X,A=Q&&Ds(n);J=new wt({}),L=new Nt({}),V=new We({}),U=new We({}),C=new Ot({});let ne=O&&Ts(n),z=fe&&Ms(n);return{c(){e=h("div"),s=h("div"),t=h("div"),l=h("div"),a=h("div"),o=h("div"),c=h("img"),i=S(),d=h("h4"),_=h("span"),y=se(p),K=se(" - "),k=h("span"),$=se(E),b=se(" - Queue Managment"),ee=S(),q=h("div"),A&&A.c(),R=S(),re(J.$$.fragment),M=S(),re(L.$$.fragment),N=S(),re(V.$$.fragment),P=S(),re(U.$$.fragment),T=S(),re(C.$$.fragment),D=S(),ne&&ne.c(),ae=S(),x=h("div"),j=h("div"),j.innerHTML=Z,de=S(),z&&z.c(),this.h()},l(H){e=v(H,"DIV",{class:!0});var te=g(e);s=v(te,"DIV",{class:!0});var me=g(s);t=v(me,"DIV",{class:!0});var Ie=g(t);l=v(Ie,"DIV",{class:!0});var Ce=g(l);a=v(Ce,"DIV",{class:!0});var we=g(a);o=v(we,"DIV",{class:!0});var he=g(o);c=v(he,"IMG",{src:!0,alt:!0,class:!0}),he.forEach(m),i=w(we),d=v(we,"H4",{class:!0});var ie=g(d);_=v(ie,"SPAN",{class:!0});var pe=g(_);y=le(pe,p),pe.forEach(m),K=le(ie," - "),k=v(ie,"SPAN",{class:!0});var qe=g(k);$=le(qe,E),qe.forEach(m),b=le(ie," - Queue Managment"),ie.forEach(m),we.forEach(m),ee=w(Ce),q=v(Ce,"DIV",{class:!0});var ve=g(q);A&&A.l(ve),R=w(ve),ue(J.$$.fragment,ve),M=w(ve),ue(L.$$.fragment,ve),N=w(ve),ue(V.$$.fragment,ve),P=w(ve),ue(U.$$.fragment,ve),T=w(ve),ue(C.$$.fragment,ve),ve.forEach(m),Ce.forEach(m),Ie.forEach(m),D=w(me),ne&&ne.l(me),ae=w(me),x=v(me,"DIV",{class:!0});var be=g(x);j=v(be,"DIV",{class:!0,"data-svelte-h":!0}),W(j)!=="svelte-12yogok"&&(j.innerHTML=Z),de=w(be),z&&z.l(be),be.forEach(m),me.forEach(m),te.forEach(m),this.h()},h(){Pe(c.src,f=n[4].school.logo.full_path)||u(c,"src",f),u(c,"alt",""),u(c,"class","avatar-xs rounded-circle"),u(o,"class","flex-shrink-0"),u(_,"class","text-primary"),u(k,"class","text-primary"),u(d,"class","card-title mb-0 flex-grow-1"),u(a,"class","d-flex gap-2 align-items-center flex-grow-1"),u(q,"class","flex-shrink-0"),u(l,"class","card-header align-items-center d-flex"),u(t,"class","card"),u(j,"class","card-header align-items-center d-flex"),u(x,"class","card"),u(s,"class","col-lg-12"),u(e,"class","row")},m(H,te){G(H,e,te),r(e,s),r(s,t),r(t,l),r(l,a),r(a,o),r(o,c),r(a,i),r(a,d),r(d,_),r(_,y),r(d,K),r(d,k),r(k,$),r(d,b),r(l,ee),r(l,q),A&&A.m(q,null),r(q,R),oe(J,q,null),r(q,M),oe(L,q,null),r(q,N),oe(V,q,null),r(q,P),oe(U,q,null),r(q,T),oe(C,q,null),r(s,D),ne&&ne.m(s,null),r(s,ae),r(s,x),r(x,j),r(x,de),z&&z.m(x,null),n[8](e),X=!0},p(H,te){(!X||te&16&&!Pe(c.src,f=H[4].school.logo.full_path))&&u(c,"src",f),(!X||te&16)&&p!==(p=H[4].school.name+"")&&Se(y,p),(!X||te&16)&&E!==(E=H[4].name+"")&&Se($,E),Q&&A.p(H,te),O&&ne.p(H,te),fe&&z.p(H,te)},i(H){X||(B(A),B(J.$$.fragment,H),B(L.$$.fragment,H),B(V.$$.fragment,H),B(U.$$.fragment,H),B(C.$$.fragment,H),B(ne),B(z),H&&(ge||Xe(()=>{ge=pt(e,Et,{duration:200}),ge.start()})),X=!0)},o(H){F(A),F(J.$$.fragment,H),F(L.$$.fragment,H),F(V.$$.fragment,H),F(U.$$.fragment,H),F(C.$$.fragment,H),F(ne),F(z),X=!1},d(H){H&&m(e),A&&A.d(),ce(J),ce(L),ce(V),ce(U),ce(C),ne&&ne.d(),z&&z.d(),n[8](null)}}}function Qs(n){let e,s;return e=new Cs({props:{queuesList:n[6],activeQueue:n[5],canteen:n[4],queuesPagination:n[3],activeQueueStudents:n[2],currentQueue:n[1]}}),{c(){re(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,l){oe(e,t,l),s=!0},p(t,l){const a={};l&64&&(a.queuesList=t[6]),l&32&&(a.activeQueue=t[5]),l&16&&(a.canteen=t[4]),l&8&&(a.queuesPagination=t[3]),l&4&&(a.activeQueueStudents=t[2]),l&2&&(a.currentQueue=t[1]),e.$set(a)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Ds(n){let e,s='<i class="ri-add-line align-bottom me-1"></i>Start Queue',t,l,a;return l=new St({props:{canteen:n[4]}}),{c(){e=h("button"),e.innerHTML=s,t=S(),re(l.$$.fragment),this.h()},l(o){e=v(o,"BUTTON",{type:!0,"data-bs-toggle":!0,"data-bs-target":!0,class:!0,"data-svelte-h":!0}),W(e)!=="svelte-1vhclkq"&&(e.innerHTML=s),t=w(o),ue(l.$$.fragment,o),this.h()},h(){u(e,"type","button"),u(e,"data-bs-toggle","modal"),u(e,"data-bs-target","#addQueueModal"),u(e,"class","btn btn-primary waves-effect waves-light")},m(o,c){G(o,e,c),G(o,t,c),oe(l,o,c),a=!0},p(o,c){const f={};c&16&&(f.canteen=o[4]),l.$set(f)},i(o){a||(B(l.$$.fragment,o),a=!0)},o(o){F(l.$$.fragment,o),a=!1},d(o){o&&(m(e),m(t)),ce(l,o)}}}function Ts(n){let e,s;return e=new At({props:{activeQueue:n[5]}}),{c(){re(e.$$.fragment)},l(t){ue(e.$$.fragment,t)},m(t,l){oe(e,t,l),s=!0},p(t,l){const a={};l&32&&(a.activeQueue=t[5]),e.$set(a)},i(t){s||(B(e.$$.fragment,t),s=!0)},o(t){F(e.$$.fragment,t),s=!1},d(t){ce(e,t)}}}function Ms(n){let e,s,t,l,a,o;t=new jt({props:{queuesList:n[6]}});const c=[n[3]];let f={};for(let i=0;i<c.length;i+=1)f=vt(f,c[i]);return a=new It({props:f}),{c(){e=h("div"),s=h("div"),re(t.$$.fragment),l=S(),re(a.$$.fragment),this.h()},l(i){e=v(i,"DIV",{class:!0});var d=g(e);s=v(d,"DIV",{class:!0});var _=g(s);ue(t.$$.fragment,_),l=w(_),ue(a.$$.fragment,_),_.forEach(m),d.forEach(m),this.h()},h(){u(s,"class","row"),u(e,"class","card-body")},m(i,d){G(i,e,d),r(e,s),oe(t,s,null),r(s,l),oe(a,s,null),o=!0},p(i,d){const _={};d&64&&(_.queuesList=i[6]),t.$set(_);const p=d&8?bt(c,[qt(i[3])]):{};a.$set(p)},i(i){o||(B(t.$$.fragment,i),B(a.$$.fragment,i),o=!0)},o(i){F(t.$$.fragment,i),F(a.$$.fragment,i),o=!1},d(i){i&&m(e),ce(t),ce(a)}}}function Vs(n){let e,s,t,l;const a=[Qs,ys],o=[];function c(f,i){return JSON.parse(sessionStorage.getItem("permissions")).includes("queues.index.simplified")?0:1}return e=c(),s=o[e]=a[e](n),{c(){s.c(),t=Te()},l(f){s.l(f),t=Te()},m(f,i){o[e].m(f,i),G(f,t,i),l=!0},p(f,[i]){s.p(f,i)},i(f){l||(B(s),l=!0)},o(f){F(s),l=!1},d(f){f&&m(t),o[e].d(f)}}}function xs(n,e,s){let t,l,a,o,c,f,{data:i}=e;gt("queueStore",{queueStore:kt({})});let d;_t(()=>{});function _(p){De[p?"unshift":"push"](()=>{d=p,s(0,d)})}return n.$$set=p=>{"data"in p&&s(7,i=p.data)},n.$$.update=()=>{n.$$.dirty&128&&s(6,t=i.queuesResponse.data.queues),n.$$.dirty&128&&s(5,l=i.queuesResponse.data.activeQueue),n.$$.dirty&128&&s(4,a=i.queuesResponse.data.canteen),n.$$.dirty&128&&s(3,o=i.queuesResponse.pagination),n.$$.dirty&128&&s(2,c=i.activeQueueStudents),n.$$.dirty&128&&s(1,f=i.currentQueue)},[d,f,c,o,a,l,t,i,_]}class Xs extends Ne{constructor(e){super(),Oe(this,e,xs,Vs,He,{data:7})}}export{Xs as component,Ws as universal};
