import{s as Dt,f,a as w,l as x,g as u,h as g,z as rt,c as C,d as c,m as L,j as i,E as Ut,W as bt,k as Et,B as ht,i as G,C as s,F as Tt,Q as Gt,n as ot,A as ct,G as Qt,T as Bt,y as kt,p as Wt,I as Kt,e as $t,J as Xt,D as Zt}from"./scheduler.726ac76d.js";import{S as St,i as yt,b as Jt,d as Pt,m as qt,a as it,g as Ft,t as dt,c as zt,e as Yt}from"./index.8a5ed380.js";import{e as Mt}from"./each.381f634d.js";import{I as te}from"./paths.29c5142d.js";import{t as ee}from"./toast.aca1940a.js";import{i as le}from"./utils.5f096ebf.js";import{a as re}from"./auth.82ff8344.js";import"./paths.7846b4ff.js";import{w as se}from"./singletons.df66ea99.js";import{n as ae}from"./stores.1008b3f8.js";function Ht(o){let t,r='<div class="text-center"><lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon></div>';return{c(){t=f("div"),t.innerHTML=r,this.h()},l(l){t=u(l,"DIV",{class:!0,"data-svelte-h":!0}),rt(t)!=="svelte-1ei7695"&&(t.innerHTML=r),this.h()},h(){i(t,"class","mt-2")},m(l,e){G(l,t,e)},d(l){l&&c(t)}}}function oe(o){let t,r,l,e,a,n='<button type="button" class="btn-close text-end" data-bs-dismiss="modal" aria-label="Close"></button>',h,d,m,v,k,b,T,I,X="Are you Sure ?",P,A,Q,J,M=`#${o[2].id}`,Y,q,U,H,S,p="Close",y,D,B="Delete",W,F,E=o[1]&&Ht();return{c(){t=f("div"),r=f("div"),l=f("div"),e=f("div"),a=f("div"),a.innerHTML=n,h=w(),E&&E.c(),d=w(),m=f("div"),v=f("form"),k=f("lord-icon"),T=w(),I=f("h4"),I.textContent=X,P=w(),A=f("p"),Q=x("Are you Sure You want to Delete "),J=f("span"),Y=x(M),q=x(" ?"),U=w(),H=f("div"),S=f("button"),S.textContent=p,y=w(),D=f("button"),D.textContent=B,this.h()},l(O){t=u(O,"DIV",{id:!0,class:!0,tabindex:!0,"aria-hidden":!0,style:!0});var V=g(t);r=u(V,"DIV",{class:!0});var Z=g(r);l=u(Z,"DIV",{class:!0});var z=g(l);e=u(z,"DIV",{class:!0});var N=g(e);a=u(N,"DIV",{class:!0,"data-svelte-h":!0}),rt(a)!=="svelte-3pipod"&&(a.innerHTML=n),h=C(N),E&&E.l(N),d=C(N),m=u(N,"DIV",{class:!0});var K=g(m);v=u(K,"FORM",{});var j=g(v);k=u(j,"LORD-ICON",{src:!0,trigger:!0,colors:!0,style:!0}),g(k).forEach(c),T=C(j),I=u(j,"H4",{class:!0,"data-svelte-h":!0}),rt(I)!=="svelte-1s07vlj"&&(I.textContent=X),P=C(j),A=u(j,"P",{class:!0});var st=g(A);Q=L(st,"Are you Sure You want to Delete "),J=u(st,"SPAN",{class:!0});var at=g(J);Y=L(at,M),at.forEach(c),q=L(st," ?"),st.forEach(c),U=C(j),H=u(j,"DIV",{class:!0});var R=g(H);S=u(R,"BUTTON",{type:!0,class:!0,"data-bs-dismiss":!0,"data-svelte-h":!0}),rt(S)!=="svelte-1h5uvws"&&(S.textContent=p),y=C(R),D=u(R,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),rt(D)!=="svelte-iuig3c"&&(D.textContent=B),R.forEach(c),j.forEach(c),K.forEach(c),N.forEach(c),z.forEach(c),Z.forEach(c),V.forEach(c),this.h()},h(){i(a,"class","text-end"),Ut(k.src,b="https://cdn.lordicon.com/gsqxdxog.json")||bt(k,"src",b),bt(k,"trigger","loop"),bt(k,"colors","primary:#f7b84b,secondary:#f06548"),Et(k,"width","100px"),Et(k,"height","100px"),i(I,"class","mb-3 mt-4"),i(J,"class","text-primary"),i(A,"class","text-muted fs-15 mb-4"),i(S,"type","button"),i(S,"class","btn btn-light fw-light"),i(S,"data-bs-dismiss","modal"),i(D,"type","button"),i(D,"class","btn btn-danger waves-effect waves-light"),i(H,"class","hstack gap-2 justify-content-center"),ht(v,"d-none",o[1]),i(m,"class","mt-2"),ht(m,"d-none",o[1]),i(e,"class","modal-body text-center p-5"),i(l,"class","modal-content"),i(r,"class","modal-dialog modal-dialog-centered"),i(t,"id","deleteOrderModal"),i(t,"class","modal fade"),i(t,"tabindex","-1"),i(t,"aria-hidden","true"),Et(t,"display","none")},m(O,V){G(O,t,V),s(t,r),s(r,l),s(l,e),s(e,a),s(e,h),E&&E.m(e,null),s(e,d),s(e,m),s(m,v),s(v,k),s(v,T),s(v,I),s(v,P),s(v,A),s(A,Q),s(A,J),s(J,Y),s(A,q),s(v,U),s(v,H),s(H,S),o[5](S),s(H,y),s(H,D),W||(F=[Tt(D,"click",o[4]),Tt(v,"submit",Gt(o[4]))],W=!0)},p(O,[V]){O[1]?E||(E=Ht(),E.c(),E.m(e,d)):E&&(E.d(1),E=null),V&4&&M!==(M=`#${O[2].id}`)&&ot(Y,M),V&2&&ht(v,"d-none",O[1]),V&2&&ht(m,"d-none",O[1])},i:ct,o:ct,d(O){O&&c(t),E&&E.d(),o[5](null),W=!1,Qt(F)}}}function ie(o,t,r){let l,e,a=!1,{orderStore:n}=Bt("orderStore");kt(o,n,m=>r(2,l=m));async function h(){r(1,a=!0);let m=await fetch(te(l.id),{headers:{Authorization:`${localStorage.getItem("SID")}`},method:"DELETE"});if(re(m),m=await m.json(),r(1,a=!1),m.status=="success"){e.click();let v=`Deleted #${l.id}`;ee(v,"success"),le("orders:refresh")}}function d(m){Wt[m?"unshift":"push"](()=>{e=m,r(0,e)})}return[e,a,l,n,h,d]}class ne extends St{constructor(t){super(),yt(this,t,ie,oe,Dt,{})}}function de(o){let t,r,l;return{c(){t=f("a"),r=f("i"),this.h()},l(e){t=u(e,"A",{href:!0,target:!0,class:!0,"data-bs-toggle":!0,"data-bs-original-title":!0});var a=g(t);r=u(a,"I",{class:!0}),g(r).forEach(c),a.forEach(c),this.h()},h(){i(r,"class","ri-eye-fill"),i(t,"href",l="/admin/orders/"+o[0].id),i(t,"target","_blank"),i(t,"class","fs-15"),i(t,"data-bs-toggle","tooltip"),i(t,"data-bs-original-title","View")},m(e,a){G(e,t,a),s(t,r)},p(e,a){a&1&&l!==(l="/admin/orders/"+e[0].id)&&i(t,"href",l)},d(e){e&&c(t)}}}function ce(o){let t,r,l;return{c(){t=f("a"),r=f("i"),this.h()},l(e){t=u(e,"A",{href:!0,target:!0,class:!0,"data-bs-toggle":!0,"data-bs-original-title":!0});var a=g(t);r=u(a,"I",{class:!0}),g(r).forEach(c),a.forEach(c),this.h()},h(){i(r,"class","ri-edit-2-line"),i(t,"href",l="/admin/orders/"+o[0].id+"/edit"),i(t,"target","_blank"),i(t,"class","fs-15"),i(t,"data-bs-toggle","tooltip"),i(t,"data-bs-original-title","Edit")},m(e,a){G(e,t,a),s(t,r)},p(e,a){a&1&&l!==(l="/admin/orders/"+e[0].id+"/edit")&&i(t,"href",l)},d(e){e&&c(t)}}}function fe(o){let t,r='<a href="javascript:void(0);" class="fs-15" data-bs-toggle="tooltip" data-bs-original-title="Delete"><i class="ri-delete-bin-line"></i></a>',l,e;return{c(){t=f("span"),t.innerHTML=r,this.h()},l(a){t=u(a,"SPAN",{"data-bs-toggle":!0,"data-bs-target":!0,"data-svelte-h":!0}),rt(t)!=="svelte-1etalvg"&&(t.innerHTML=r),this.h()},h(){i(t,"data-bs-toggle","modal"),i(t,"data-bs-target","#deleteOrderModal")},m(a,n){G(a,t,n),l||(e=Tt(t,"click",o[2]),l=!0)},p:ct,d(a){a&&c(t),l=!1,e()}}}function ue(o){let t,r,l='<div class="form-check"><input class="form-check-input" type="checkbox" id="inlineCheckbox2" value="option1"/></div>',e,a,n=o[0].id+"",h,d,m,v,k=o[0].ref+"",b,T,I,X,P=o[0].tax+"",A,Q,J,M,Y,q=o[0].taxCalculated+"",U,H,S,p,y=o[0].discount+"",D,B,W,F,E=o[0].subtotal+"",O,V,Z,z,N=o[0].total+"",K,j,st,at,R,wt=JSON.parse(sessionStorage.getItem("permissions")).includes("orders.show"),mt,Ct=JSON.parse(sessionStorage.getItem("permissions")).includes("orders.update"),pt,It=JSON.parse(sessionStorage.getItem("permissions")).includes("orders.destroy"),tt=wt&&de(o),et=Ct&&ce(o),lt=It&&fe(o);return{c(){t=f("tr"),r=f("td"),r.innerHTML=l,e=w(),a=f("td"),h=x(n),d=w(),m=f("td"),v=f("span"),b=x(k),T=w(),I=f("td"),X=x("+ "),A=x(P),Q=x("%"),J=w(),M=f("td"),Y=x("+ "),U=x(q),H=w(),S=f("td"),p=x("- "),D=x(y),B=x("%"),W=w(),F=f("td"),O=x(E),V=x(" SAR"),Z=w(),z=f("td"),K=x(N),j=x(" SAR"),st=w(),at=f("td"),R=f("div"),tt&&tt.c(),mt=w(),et&&et.c(),pt=w(),lt&&lt.c(),this.h()},l($){t=u($,"TR",{scope:!0});var _=g(t);r=u(_,"TD",{"data-svelte-h":!0}),rt(r)!=="svelte-1wqjv4e"&&(r.innerHTML=l),e=C(_),a=u(_,"TD",{});var Ot=g(a);h=L(Ot,n),Ot.forEach(c),d=C(_),m=u(_,"TD",{});var xt=g(m);v=u(xt,"SPAN",{class:!0});var Lt=g(v);b=L(Lt,k),Lt.forEach(c),xt.forEach(c),T=C(_),I=u(_,"TD",{});var ft=g(I);X=L(ft,"+ "),A=L(ft,P),Q=L(ft,"%"),ft.forEach(c),J=C(_),M=u(_,"TD",{});var _t=g(M);Y=L(_t,"+ "),U=L(_t,q),_t.forEach(c),H=C(_),S=u(_,"TD",{});var ut=g(S);p=L(ut,"- "),D=L(ut,y),B=L(ut,"%"),ut.forEach(c),W=C(_),F=u(_,"TD",{});var vt=g(F);O=L(vt,E),V=L(vt," SAR"),vt.forEach(c),Z=C(_),z=u(_,"TD",{});var gt=g(z);K=L(gt,N),j=L(gt," SAR"),gt.forEach(c),st=C(_),at=u(_,"TD",{});var At=g(at);R=u(At,"DIV",{class:!0});var nt=g(R);tt&&tt.l(nt),mt=C(nt),et&&et.l(nt),pt=C(nt),lt&&lt.l(nt),nt.forEach(c),At.forEach(c),_.forEach(c),this.h()},h(){i(v,"class","badge border border-primary text-primary"),i(R,"class","hstack gap-3 flex-wrap"),i(t,"scope","row")},m($,_){G($,t,_),s(t,r),s(t,e),s(t,a),s(a,h),s(t,d),s(t,m),s(m,v),s(v,b),s(t,T),s(t,I),s(I,X),s(I,A),s(I,Q),s(t,J),s(t,M),s(M,Y),s(M,U),s(t,H),s(t,S),s(S,p),s(S,D),s(S,B),s(t,W),s(t,F),s(F,O),s(F,V),s(t,Z),s(t,z),s(z,K),s(z,j),s(t,st),s(t,at),s(at,R),tt&&tt.m(R,null),s(R,mt),et&&et.m(R,null),s(R,pt),lt&&lt.m(R,null)},p($,[_]){_&1&&n!==(n=$[0].id+"")&&ot(h,n),_&1&&k!==(k=$[0].ref+"")&&ot(b,k),_&1&&P!==(P=$[0].tax+"")&&ot(A,P),_&1&&q!==(q=$[0].taxCalculated+"")&&ot(U,q),_&1&&y!==(y=$[0].discount+"")&&ot(D,y),_&1&&E!==(E=$[0].subtotal+"")&&ot(O,E),_&1&&N!==(N=$[0].total+"")&&ot(K,N),wt&&tt.p($,_),Ct&&et.p($,_),It&&lt.p($,_)},i:ct,o:ct,d($){$&&c(t),tt&&tt.d(),et&&et.d(),lt&&lt.d()}}}function he(o,t,r){let l,{order:e}=t,{orderStore:a}=Bt("orderStore");kt(o,a,h=>r(3,l=h));function n(){Kt(a,l=JSON.parse(JSON.stringify(e)),l)}return o.$$set=h=>{"order"in h&&r(0,e=h.order)},[e,a,n]}class me extends St{constructor(t){super(),yt(this,t,he,ue,Dt,{order:0})}}function Vt(o,t,r){const l=o.slice();return l[2]=t[r],l}function Nt(o){let t,r,l=Mt(o[0]),e=[];for(let n=0;n<l.length;n+=1)e[n]=jt(Vt(o,l,n));const a=n=>dt(e[n],1,1,()=>{e[n]=null});return{c(){t=f("tbody");for(let n=0;n<e.length;n+=1)e[n].c();this.h()},l(n){t=u(n,"TBODY",{class:!0});var h=g(t);for(let d=0;d<e.length;d+=1)e[d].l(h);h.forEach(c),this.h()},h(){i(t,"class","list")},m(n,h){G(n,t,h);for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(t,null);r=!0},p(n,h){if(h&1){l=Mt(n[0]);let d;for(d=0;d<l.length;d+=1){const m=Vt(n,l,d);e[d]?(e[d].p(m,h),it(e[d],1)):(e[d]=jt(m),e[d].c(),it(e[d],1),e[d].m(t,null))}for(Ft(),d=l.length;d<e.length;d+=1)a(d);zt()}},i(n){if(!r){for(let h=0;h<l.length;h+=1)it(e[h]);r=!0}},o(n){e=e.filter(Boolean);for(let h=0;h<e.length;h+=1)dt(e[h]);r=!1},d(n){n&&c(t),Zt(e,n)}}}function jt(o){let t,r;return t=new me({props:{order:o[2]}}),{c(){Jt(t.$$.fragment)},l(l){Pt(t.$$.fragment,l)},m(l,e){qt(t,l,e),r=!0},p(l,e){const a={};e&1&&(a.order=l[2]),t.$set(a)},i(l){r||(it(t.$$.fragment,l),r=!0)},o(l){dt(t.$$.fragment,l),r=!1},d(l){Yt(t,l)}}}function Rt(o){let t,r='<lord-icon src="https://cdn.lordicon.com/xjovhxra.json" trigger="loop" colors="primary:#E16F28,secondary:#73dce9" style="width:120px;height:120px"></lord-icon>';return{c(){t=f("div"),t.innerHTML=r,this.h()},l(l){t=u(l,"DIV",{class:!0,"data-svelte-h":!0}),rt(t)!=="svelte-2svhwp"&&(t.innerHTML=r),this.h()},h(){i(t,"class","text-center")},m(l,e){G(l,t,e)},d(l){l&&c(t)}}}function pe(o){var I,X,P,A,Q,J,M,Y,q,U,H,S;let t,r,l,e,a='<tr><th scope="col" style="width: 25px;"><div class="form-check"><input class="form-check-input" type="checkbox" id="checkAll" value="option1"/></div></th> <th scope="col">ID</th> <th scope="col">Order Ref</th> <th scope="col">Tax</th> <th scope="col">Calculated Tax</th> <th scope="col">Discount</th> <th scope="col">SubTotal</th> <th scope="col">Total</th> <th scope="col">Action</th></tr>',n,h,d,m,v,k,b=(o[1]==null||((P=(X=(I=o[1])==null?void 0:I.from)==null?void 0:X.route)==null?void 0:P.id)!=((J=(Q=(A=o[1])==null?void 0:A.to)==null?void 0:Q.route)==null?void 0:J.id))&&Nt(o);d=new ne({});let T=((q=(Y=(M=o[1])==null?void 0:M.from)==null?void 0:Y.route)==null?void 0:q.id)==((S=(H=(U=o[1])==null?void 0:U.to)==null?void 0:H.route)==null?void 0:S.id)&&o[1]&&Rt();return{c(){t=f("div"),r=f("div"),l=f("table"),e=f("thead"),e.innerHTML=a,n=w(),b&&b.c(),h=w(),Jt(d.$$.fragment),m=w(),T&&T.c(),v=$t(),this.h()},l(p){t=u(p,"DIV",{class:!0});var y=g(t);r=u(y,"DIV",{class:!0});var D=g(r);l=u(D,"TABLE",{class:!0});var B=g(l);e=u(B,"THEAD",{class:!0,"data-svelte-h":!0}),rt(e)!=="svelte-93bzrp"&&(e.innerHTML=a),n=C(B),b&&b.l(B),B.forEach(c),h=C(D),Pt(d.$$.fragment,D),D.forEach(c),y.forEach(c),m=C(p),T&&T.l(p),v=$t(),this.h()},h(){i(e,"class","table-light"),i(l,"class","table align-middle table-nowrap mb-0 border-top"),i(r,"class","table-responsive"),i(t,"class","row pe-0")},m(p,y){G(p,t,y),s(t,r),s(r,l),s(l,e),s(l,n),b&&b.m(l,null),s(r,h),qt(d,r,null),G(p,m,y),T&&T.m(p,y),G(p,v,y),k=!0},p(p,[y]){var D,B,W,F,E,O,V,Z,z,N,K,j;p[1]==null||((W=(B=(D=p[1])==null?void 0:D.from)==null?void 0:B.route)==null?void 0:W.id)!=((O=(E=(F=p[1])==null?void 0:F.to)==null?void 0:E.route)==null?void 0:O.id)?b?(b.p(p,y),y&2&&it(b,1)):(b=Nt(p),b.c(),it(b,1),b.m(l,null)):b&&(Ft(),dt(b,1,1,()=>{b=null}),zt()),((z=(Z=(V=p[1])==null?void 0:V.from)==null?void 0:Z.route)==null?void 0:z.id)==((j=(K=(N=p[1])==null?void 0:N.to)==null?void 0:K.route)==null?void 0:j.id)&&p[1]?T||(T=Rt(),T.c(),T.m(v.parentNode,v)):T&&(T.d(1),T=null)},i(p){k||(it(b),it(d.$$.fragment,p),k=!0)},o(p){dt(b),dt(d.$$.fragment,p),k=!1},d(p){p&&(c(t),c(m),c(v)),b&&b.d(),Yt(d),T&&T.d(p)}}}function _e(o,t,r){let l;kt(o,ae,a=>r(1,l=a));let{ordersList:e}=t;return Xt("orderStore",{orderStore:se({})}),o.$$set=a=>{"ordersList"in a&&r(0,e=a.ordersList)},[e,l]}class Ce extends St{constructor(t){super(),yt(this,t,_e,pe,Dt,{ordersList:0})}}export{Ce as O};
